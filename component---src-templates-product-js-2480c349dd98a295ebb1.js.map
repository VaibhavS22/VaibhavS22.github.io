{"version":3,"sources":["webpack:///./src/components/ReviewFormModal.js","webpack:///./node_modules/decode-uri-component/index.js","webpack:///./node_modules/split-on-first/index.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./src/assets/mention_for_mobile.svg","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./src/assets/mention_for_desktop.svg","webpack:///./src/components/Form.js","webpack:///./node_modules/query-string/node_modules/strict-uri-encode/index.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/query-string/index.js","webpack:///./src/components/Product/Usp.js","webpack:///./src/components/Product/ProductDetails.js","webpack:///./src/components/Product/PairWith.js","webpack:///./src/components/ProductReview.js","webpack:///./src/components/OptionsOverallRating.js","webpack:///./src/components/UGCReviewThumbnail.js","webpack:///./src/components/Product/UGCSection.js","webpack:///./src/components/ReviewItemThumbnail.js","webpack:///./src/components/Product/ProductReviewSection.js","webpack:///./src/components/Product/ProductOverview.js","webpack:///./src/components/ProductCarouselMobile.js","webpack:///./src/components/Product/ProductOverviewMobile.js","webpack:///./src/components/Product/SectionContainer/TransparentPricingSection.js","webpack:///./src/components/Product/SectionContainer/ImageWithBadgesSection.js","webpack:///./src/components/Product/SectionContainer/HeroSection.js","webpack:///./src/components/Product/SectionContainer/BadgesSection.js","webpack:///./src/components/Product/SectionContainer/ImageWithTextCarouselSection.js","webpack:///./src/components/Product/SectionContainer/index.js","webpack:///./src/utils/transparentPricing.js","webpack:///./src/components/SimilarProductsShow.js","webpack:///./src/templates/Product.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./src/assets/review-plus.svg","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js"],"names":["FULL_REVIEW_PRODUCT_TYPES","FULL_REVIEW_FIELDS","StyledModal","styled","Modal","props","theme","breakpoints","desktopSmall","desktopVw","Prompt","div","PromptMsg","fonts","primary","CloseModalBtn","Button","colors","secondary","apiKeyPublic","process","ReviewFormModal","open","closeModal","productId","productName","productTypeName","reviewForm","useForm","register","handleSubmit","errors","useState","photos","setPhotos","useFetch","fetchData","response","error","loading","photoParams","map","toString","photosParam","length","url","imageUrl","reviewFormFields","contentfulfields","includes","filter","field","label","showForm","disableSubmit","some","onClose","documentToReactComponents","successMessage","json","type","onClick","fields","title","formValues","user","getCurrentUser","name","email","family_name","author","getDefaultValues","submitButtonText","data","urlencoded","URLSearchParams","append","Object","entries","key","value","method","headers","body","redirect","eventTracker","trackClick","EventType","FORM_SUBMIT","trackGA","trackInternal","category","action","context","product_id","imageApiUrl","handleFiles","e","target","files","i","file","reader","FileReader","readAsDataURL","onload","prevState","result","onerror","console","log","removePhoto","fileName","singleMatcher","RegExp","multiMatcher","decodeComponents","components","split","decodeURIComponent","join","err","left","slice","right","Array","prototype","concat","call","decode","input","tokens","match","module","exports","encodedURI","TypeError","replace","replaceMap","exec","keys","customDecodeURIComponent","string","separator","separatorIndex","indexOf","React","MentionForMobile","createElement","defaultProps","default","iter","Symbol","iterator","from","arrayLikeToArray","arr","isArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","MentionForDesktop","StyledForm","form","FieldsContainer","StyledContainer","Container","SubmitButton","greyLighter","CheckBox","DefaultAddressContainer","Form","children","defaultAddressCheckbox","onCheckboxChange","onSubmit","f","__typename","Fragment","id","className","width","placeholder","required","aria-label","defaultValue","range","displayValues","options","radioOptions","defaultChecked","onChange","black","disabled","str","encodeURIComponent","x","charCodeAt","toUpperCase","arrayWithoutHoles","iterableToArray","nonIterableSpread","len","arr2","o","minLen","n","constructor","test","_slicedToArray","_toConsumableArray","_createForOfIteratorHelper","allowArrayLike","it","_arrayLikeToArray","_unsupportedIterableToArray","F","s","done","_e","normalCompletion","didErr","step","next","_e2","return","strictUriEncode","decodeComponent","splitOnFirst","validateArrayFormatSeparator","encode","strict","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","Number","isNaN","trim","parseBooleans","toLowerCase","parse","assign","sort","arrayFormat","arrayFormatSeparator","formatter","accumulator","undefined","newValue","item","parserForArrayFormat","ret","create","_step","_iterator","param","_splitOnFirst","_splitOnFirst2","_key","_value","_i","_Object$keys","_i2","_Object$keys2","k","reduce","Boolean","keysSorter","a","b","stringify","object","shouldFilter","skipNull","skipEmptyString","index","encoderForArrayFormat","objectCopy","_i3","_Object$keys3","parseUrl","_splitOnFirst3","_splitOnFirst4","hash","query","parseFragmentIdentifier","fragmentIdentifier","stringifyUrl","queryFromUrl","parsedQueryFromUrl","queryString","getHash","UniqueSellingPoints","UspIcon","UspIconText","span","Usp","icons","image","text","src","alt","description","StyledProductDetails","desktopVh","StyledAccordion","Accordion","AccordionWrapper","getShippingInfoHTML","shippingInformation","ProductDetails","accordion","detailsHTML","descriptionHTML","items","activeIndex","trackParams","htmlContent","Details","Description","Shipping","settings","slidesToShow","slidesToScroll","leftArrowStyle","top","rightArrowStyle","showDisabledArrows","StyledPairWith","section","PairWithTitle","h3","mobileVw","PairWithMobile","PairWithItem","PairWithDesktop","Carousel","PairsWithDesktop","StyledDesktopLoaderContainer","PairWith","startingSize","selectedColor","pairedProducts","gender","newPairedProducts","pairedProduct","sourceColor","pairedColor","product","extractProductJsonFromAPIProduct","renderPairedProducts","PairWithThumbnail","contentfulProduct","shopifyProduct","staticPrice","variants","edges","node","price","startingColor","tracker","colorObj","find","color","addToCartTrackerSection","SpinningLoader","StyledProductReview","article","ReviewDetails","greyLight","Content","MessageContainer","MessageWrapper","Header","header","Title","h4","Message","p","ThumbnailWrapper","AuthorWrapper","Author","cite","Location","PurchaseDetails","PurchaseDetail","Footer","footer","RatingBarWrapper","RatingBar","RatingBarInner","RatingBarVal","StyledRating","Rating","ProductReview","location","reviewTitle","reviewMessage","reviewRating","rating","reviewOptionsList","reviewOptions","reviewDate","dateCreated","reviewUserPhotos","imagesFileName","mounted","useMounted","hasOptions","barRatings","fit","message","fitRating","parseInt","lengthRating","priceForQuality","priceForQualityRating","purchaseDetails","dayjs","format","hasPhotos","style","OverallRatingsContainer","justifyContent","FitContainer","bottomMargin","HeadingContainer","Label","textAlign","Heading","BarContainer","columns","Bar","filled","isPrice","shamrockGreen","GreenTick","GreenCheckbox","show","getRatingsAverage","reviews","key1","key2","totalReviewValue","totalReviewCount","review","forEach","reviewOption","average","Math","round","OptionsOverallRating","lengthRatings","priceQualityRatings","fitRatings","ratingKey","StyledEyeIcon","EyeIcon","StyledReviewThumbnail","ImgWrapper","figure","Img","img","UGCReviewThumbnail","openModal","reviewerPhotoUrl","cloneElement","UGCReviewSection","KeyWordMobile","MentionMobile","KeyWordDesktop","MentionDesktop","UGCSection","renderReviewWithPhotos","carouselSettings","UGCDesktop","StyledThumbnail","ReviewItemThumbnail","modalOpen","setModalOpen","reviewPhotos","ReviewModal","activeModal","onPrevClick","onNextClick","reviewsLength","StyledProductReviewSection","ReviewContainer","ReviewWithPhotos","TitleContainer","NoReviewsTitle","StarsText","ReviewSummary","ProductRating","ReviewThumbnailListContainer","StyledReviewItemThumbnail","WriteAReviewButton","SelectWrapper","Select","tablet","Reviews","ReviewsList","ul","ReviewsFooter","ViewMoreBtn","TextButton","ViewMore","ReviewItem","li","ReviewThumbnail","SwiperWrapper","ReviewButtonAndOverallRatingContainer","UploadReviewThumbnail","StyledPlus","Plus","UGCMobile","StyledMobileLoader","StyledDesktopLoader","params","slidesPerColumn","rebuildOnUpdate","pagination","el","preloadImages","selectOptions","REVIEWS_FILTER","HIGHEST_RATING","sortBy","sortOrder","WITH_PHOTOS","isWithPhotos","LOWEST_RATING","LATEST","ProductReviewSection","r","setPage","summary","productReviewsWithSummary","reviewsWithPhotos","obj","uniqueElementsBy","r1","r2","page","sortType","pageCount","setPageCount","setReviews","reviewsCount","setReviewsCount","sortOption","setSortOption","showButton","setShowButton","size","setSize","useEffect","count","remaining","emptyPhotosThumbnail","reviewFormModalOpen","setReviewFormModalOpen","averageRating","toFixed","parseFloat","toLocaleString","as","shouldSwiperUpdate","MemoizedProductReviewSection","memo","prevProps","nextProps","StyledProductOverview","CarouselContainer","ProductOverview","carouselImages","imageNamePrefix","imageToColorMap","ProductCarousel","images","SidePanel","SidePanelMobile","StyledProductCarousel","Slide","display","ProductCarouselMobile","productImages","useContext","ProductContext","getFirstNProductColorImages","setCarouselImages","getEagerLoadCarouselClassName","bucket","video","poster","fluid","contentType","lazyLoad","onVisible","eventType","VIDEO_LOAD","track","ScaledImage","backgroundColor","position","bottom","zIndex","ProductOverviewMobile","StyledTransparentPricing","heading","TitleMobile","TitleDesktop","Wrapper","Costing","Subtitle","CostList","ListItem","IconWrapper","ItemTitle","ItemPrice","TotalCost","RelativePricingWrapper","RelativePricing","Column","ColumnPrice","ColumnVariable","ColumnBase","ColumnTitle","Logo","LogoIcon","ImageWrapper","ImageDesktop","ImageMobile","withErrorBoundary","pricing","pricingListJson","pricingTitle","quincePrice","traditionalRetailPrice","selectedVariantId","transparentPricingIcons","showTitle","imageDesktop","imageMobile","customSortOrder","applicableCostingParts","crafting","materials","packaging","creditCardFees","shippingHandling","pricingJson","shopifyId","parts","j","push","totalCost","acc","val","computeHeight","height","cost","baseHeight","subtitleWords","newQuincePrice","newTraditionalRetailPrice","quinceHeight","trpHeight","pricingWithCustomOrder","pricingKey","isIconPresent","icon","word","itemPrice","dangerouslySetInnerHTML","__html","getStyledPrice","relative__pricing__traditional_price_column","fallbackRender","FirstSection","SecondSection","StyledSVG","SVGWithText","DesktopVideoContainer","Video","VideoMobile","SVGWrapper","showArrows","showDots","StyledCarousel","DescriptionDesktop","DescriptionMobile","SectionToComponentMapping","svgList","first","second","third","fourth","rootTopMargin","window","innerHeight","Hero","Badges","svgObj","SocialPhotosSection","imageWithTextList","valueObj","textMobile","SectionRender","productPageSections","sectionName","sectionData","sectionType","Component","SectionContainer","getTransparentPrice","productPackVariantMap","shopifyVariantId","variantPrice","selectedSize","packQuantity","desktopSettings","mobileSettings","StyledSimilarProductItem","CarouselWrapper","SimilarProductWrapper","SimilarProducts","similarProducts","setSimilarProducts","setLoading","fetchSimilarProducts","getSimilarProducts","responseSimilarData","mq","matchMedia","matches","experimentManager","getBucketForUser","newSimilarProducts","similarProduct","productColor","PRODUCT_CLICK","similar_product_id","decodeIdFromGraphQLResponse","similar_product_color","similar_product_position","source_product_id","source_product_color","ProductThumbnail","showColors","prefetchedColor","StyledProduct","mobile","ProductDesktop","ProductMobile","EmptyRow","ProductReviewWrapper","RecommendedProductsWrapper","Card","StyledPRPanel","PrPanel","computeLeastComparisonPricing","productComparisonPricing","comparisonPricing","leastPrice","min","variantId","prices","extractCompetitorPricesOfAVariant","pricingObject","prev","current","currentPrice","getAccordion","Product","reviewsAndRatings","referralPopupData","welcomePopup","prPanelList","getProductPackVariantMap","setPairedProducts","viewContextGender","setViewContextGender","forceHydration","setForceHydration","__client_side_navigation__","getProductCarousel","carousel","setCarousel","urlParamColor","search","getFullColorName","getSelectedColor","welcomePopupData","nodes","col","stateColor","state","queryParams","getHyphenatedColorName","navigate","getPathParams","useShopifyProduct","handle","devices","useDetectDevices","sizes","setSizes","setSelectedSize","setSelectedColor","colorToMinPriceVariantMap","setShopifyVariantId","colorToMinPriceMap","setVariantPrice","leastCompetitorPrice","setLeastCompetitorPrice","initialColorLoad","setInitialColorLoad","shopifyColors","setShopifyColors","setProductReviewsWithSummary","pairsWithLoading","setPairsWithLoading","variant","setVariant","transparentPricing","setTransparentPricing","setComparisonPricing","variantLevelPrices","productLevelPrices","variantOption","newOption","option","fetchPairsWithData","getPairWithProducts","responsePairsData","filterPairedProducts","sizeOption","colorOption","isGiftCard","values","availableSizes","currentSize","selectedColorVariantEdge","edge","selectedOptions","captureWarning","selectedColorVariant","PRODUCT_VIEW","variantTitle","sku","productTitle","presentmentPrices","amount","productType","vendor","requiredVariant","priceV2","requiredVariants","minPrice","minPriceVariantId","selected","selectedImages","thumbnail","videoIndex","splice","setCarouselImagesWithVideoThumbnail","imageIdToColors","carouselItem","imageColor","getImageIdToColorMap","viewContextGenderParam","pairedProds","filteredPairedProducts","cp","relatedProductGender","fp","relatedProduct","filterUnisexProductImages","slug","newPage","newCarouselImages","getProductImagesOnSizeAndColor","transparentPricingData","reviewSectionRef","useRef","scrollToReviewSection","scrollTo","getBoundingClientRect","scrollY","desktop","behavior","offset","getProductReviews","limit","normalizedReview","getProductOverviewChildren","ProductForm","productPreorderInformation","preOrder","contentfulVariants","getVariantOption","trackerSection","traditionalRetailPriceStandalone","retiredVariants","productDetails","productDescription","hideSections","ComparisonPricing","computePerPack","ComparisonPricingMobile","getTransparentPricingData","showProductReviewMarginTop","Provider","orgPImg","productImagesVariant","SEO","seoTitle","seoDescription","pageType","metaImage","schemaData","capitalizeWord","seoPrice","WelcomeModal","subHeading","klaviyoListId","subscribeForm","colorTheme","random","subscriptionType","data-product-id","SimilarProductsShow","ProgressiveHydration","rootMargin","force","panelList","systemTransparentPricing","TransparentPricing","subTitle","ref","recommendedProducts","BestSellersSection","textColor","products","hideImageOnMobile","ReferralModal","ProductQuery","ProductWrapper","allContentfulAsset","pageContext","orderedColors","finalColors","zipObject","colorsNotInList","colorName","cObj","findIndex","imageObj","_arr","_n","_d","_s","ReviewPlus"],"mappings":"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","file":"component---src-templates-product-js-2480c349dd98a295ebb1.js","sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { documentToReactComponents } from '@contentful/rich-text-react-renderer'\nimport { useForm } from 'react-hook-form'\n\nimport { desktopVw } from '../styles/utils'\nimport { getCurrentUser } from '../utils'\n\nimport useFetch from '../hooks/useFetch'\n\nimport Modal from './Modal'\nimport Form from './Form'\nimport { ImageUpload } from './FormElements'\n\nimport Button from './Button'\nimport eventTracker from '../trackers/EventTracker'\nimport EventType from '../trackers/eventType'\n\nconst FULL_REVIEW_PRODUCT_TYPES = [\n  'bottoms',\n  'sweaters',\n  'tops',\n  'shirts',\n  'dresses',\n  'fleece',\n  'loungewear',\n  't-shirts',\n]\nconst FULL_REVIEW_FIELDS = [\n  'Fit',\n  'Length',\n  'Typical size',\n  'Size purchased',\n  'Height',\n  'Weight (lbs)',\n]\n\nconst StyledModal = styled(Modal)`\n  overflow-y: scroll !important;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  padding: 25px 20px 20px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(53)} ${desktopVw(80)} ${desktopVw(77)};\n    height: auto;\n    max-height: 90vh;\n    width: auto;\n    max-width: ${desktopVw(880)};\n    box-sizing: border-box;\n  }\n`\n\nconst Prompt = styled.div`\n  position: relative;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    min-width: ${desktopVw(480)};\n    padding: ${desktopVw(84)} 0 0;\n  }\n`\n\nconst PromptMsg = styled.div`\n  text-align: center;\n\n  p {\n    text-align: center;\n    font-family: ${props => props.theme.fonts.primary};\n    font-weight: 500;\n    margin: 0 auto;\n    font-size: 25px;\n    line-height: 30px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    p {\n      margin: 0 auto;\n      font-size: ${desktopVw(25)};\n      line-height: ${desktopVw(30)};\n      max-width: ${desktopVw(380)};\n    }\n  }\n`\n\nconst CloseModalBtn = styled(Button)`\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-family: ${props => props.theme.fonts.primary};\n  background: ${props => props.theme.colors.primary};\n  color: ${props => props.theme.colors.secondary};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    position: static;\n    margin: 0 auto;\n    padding: ${desktopVw(23)} ${desktopVw(66)};\n    margin-top: ${desktopVw(50)};\n    font-size: ${desktopVw(20)};\n  }\n`\n\nconst apiKeyPublic = process.env.GATSBY_STAMPED_API_KEY_PUBLIC\nconst storeHash = process.env.GATSBY_STAMPED_STORE_HASH\n\nconst ReviewFormModal = ({\n  open,\n  closeModal,\n  productId,\n  productName,\n  productTypeName,\n  reviewForm,\n}) => {\n  const { register, handleSubmit, errors } = useForm()\n\n  const [photos, setPhotos] = useState([])\n\n  const { fetchData, response, error, loading } = useFetch()\n\n  const handleFiles = e => {\n    if (!e.target.files) return\n    const { files } = e.target\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i]\n\n      if (photos.some(({ name }) => name === file.name)) return\n\n      const reader = new FileReader()\n      reader.readAsDataURL(file)\n\n      reader.onload = () => {\n        setPhotos(prevState => [\n          ...prevState,\n          { name: file.name, value: reader.result, response: '' },\n        ])\n      }\n\n      reader.onerror = function(error) {\n        console.log('Error: ', error)\n      }\n    }\n  }\n\n  const removePhoto = fileName =>\n    setPhotos(prevState => prevState.filter(({ name }) => name !== fileName))\n\n  const photoParams = photos.map(({ response }) => response).toString()\n  const photosParam = photos.length > 0 ? `&photos=${photoParams}` : ''\n  const url = `https://stamped.io/api/reviews2?apiKey=${apiKeyPublic}&sId=${storeHash}${photosParam}`\n  const imageUrl = `https://stamped.io/api/widget/upload?productId=${productId}&apiKey=${apiKeyPublic}&sId=${storeHash}`\n\n  const onSubmit = data => {\n    const urlencoded = new URLSearchParams()\n    urlencoded.append('productId', productId)\n    if (productName) urlencoded.append('productName', productName)\n    for (const [key, value] of Object.entries(data)) {\n      urlencoded.append(key, value)\n    }\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: urlencoded,\n      redirect: 'follow',\n    }\n\n    if (!loading) {\n      fetchData(url, options)\n      eventTracker.trackClick(EventType.FORM_SUBMIT, {\n        trackGA: true,\n        trackInternal: true,\n        category: 'reviews',\n        action: 'submit_a_review',\n        context: { product_id: productId, urlencoded },\n      })\n    }\n  }\n\n  let reviewFormFields = reviewForm.contentfulfields\n  if (!FULL_REVIEW_PRODUCT_TYPES.includes(productTypeName)) {\n    reviewFormFields = reviewForm.contentfulfields.filter(\n      field => !FULL_REVIEW_FIELDS.includes(field.label),\n    )\n  }\n\n  const showForm = !response && !error\n  const disableSubmit = photos.some(({ response }) => response === '')\n\n  const getDefaultValues = () => {\n    const user = getCurrentUser()\n\n    if (user.name && user.email) {\n      if (user.family_name) {\n        return {\n          author: `${user.name} ${user.family_name}`,\n          email: user.email,\n        }\n      }\n      return {\n        author: user.name,\n        email: user.email,\n      }\n    }\n  }\n\n  return (\n    <StyledModal open={open} onClose={closeModal}>\n      {response && (\n        <Prompt>\n          <PromptMsg>\n            {documentToReactComponents(reviewForm.successMessage.json)}\n          </PromptMsg>\n          <CloseModalBtn type='button' onClick={() => closeModal()}>\n            Back to shopping\n          </CloseModalBtn>\n        </Prompt>\n      )}\n      {!response && error && (\n        <Prompt>\n          <PromptMsg>\n            <h3>Something went wrong try again later</h3>\n          </PromptMsg>\n          <CloseModalBtn onClick={() => closeModal()}>\n            Back to shopping\n          </CloseModalBtn>\n        </Prompt>\n      )}\n      {showForm && (\n        <Form\n          fields={reviewFormFields}\n          title={reviewForm.title}\n          formValues={getDefaultValues()}\n          submitButtonText={reviewForm.submitButtonText}\n          handleSubmit={handleSubmit(onSubmit)}\n          disableSubmit={disableSubmit}\n          register={register}\n          errors={errors}\n          loading={loading}\n        >\n          <ImageUpload\n            imageApiUrl={imageUrl}\n            handleFiles={handleFiles}\n            photos={photos}\n            setPhotos={setPhotos}\n            removePhoto={removePhoto}\n            label='Upload a picture'\n          />\n        </Form>\n      )}\n    </StyledModal>\n  )\n}\n\nexport default ReviewFormModal\n","'use strict';\n\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n  try {\n    // Try to decode the entire string first\n    return decodeURIComponent(components.join(''));\n  } catch (err) {// Do nothing\n  }\n\n  if (components.length === 1) {\n    return components;\n  }\n\n  split = split || 1; // Split the array in 2 parts\n\n  var left = components.slice(0, split);\n  var right = components.slice(split);\n  return Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input);\n  } catch (err) {\n    var tokens = input.match(singleMatcher);\n\n    for (var i = 1; i < tokens.length; i++) {\n      input = decodeComponents(tokens, i).join('');\n      tokens = input.match(singleMatcher);\n    }\n\n    return input;\n  }\n}\n\nfunction customDecodeURIComponent(input) {\n  // Keep track of all the replacements and prefill the map with the `BOM`\n  var replaceMap = {\n    '%FE%FF': \"\\uFFFD\\uFFFD\",\n    '%FF%FE': \"\\uFFFD\\uFFFD\"\n  };\n  var match = multiMatcher.exec(input);\n\n  while (match) {\n    try {\n      // Decode as big chunks as possible\n      replaceMap[match[0]] = decodeURIComponent(match[0]);\n    } catch (err) {\n      var result = decode(match[0]);\n\n      if (result !== match[0]) {\n        replaceMap[match[0]] = result;\n      }\n    }\n\n    match = multiMatcher.exec(input);\n  } // Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\n\n  replaceMap['%C2'] = \"\\uFFFD\";\n  var entries = Object.keys(replaceMap);\n\n  for (var i = 0; i < entries.length; i++) {\n    // Replace all decoded components\n    var key = entries[i];\n    input = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n  }\n\n  return input;\n}\n\nmodule.exports = function (encodedURI) {\n  if (typeof encodedURI !== 'string') {\n    throw new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n  }\n\n  try {\n    encodedURI = encodedURI.replace(/\\+/g, ' '); // Try the built in decoder first\n\n    return decodeURIComponent(encodedURI);\n  } catch (err) {\n    // Fallback to a more advanced decoder\n    return customDecodeURIComponent(encodedURI);\n  }\n};","'use strict';\n\nmodule.exports = function (string, separator) {\n  if (!(typeof string === 'string' && typeof separator === 'string')) {\n    throw new TypeError('Expected the arguments to be of type `string`');\n  }\n\n  if (separator === '') {\n    return [string];\n  }\n\n  var separatorIndex = string.indexOf(separator);\n\n  if (separatorIndex === -1) {\n    return [string];\n  }\n\n  return [string.slice(0, separatorIndex), string.slice(separatorIndex + separator.length)];\n};","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var React = require('react');\n\nfunction MentionForMobile (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"path\",{\"d\":\"M10.7678 23.8588C10.7678 20.4508 13.5998 13.9228 17.4398 13.9228C18.8798 13.9228 19.5998 14.9788 19.2638 16.2268C18.4478 19.0108 16.0478 26.8828 12.6878 26.8828C11.1518 26.8828 10.7678 25.0588 10.7678 23.8588ZM17.2958 25.0108C16.9118 27.4108 17.9678 29.1388 20.3198 29.1388C24.7838 29.1388 29.1998 23.3308 29.1998 17.0908C29.1998 9.60282 24.0157 5.33082 16.8158 5.33082C7.26375 5.33082 0.78375 13.1068 0.78375 21.8428C0.78375 29.2828 5.43975 35.9548 14.3678 35.9548C18.5438 35.9548 22.4318 34.5148 25.0718 32.2588C21.9998 34.3228 18.8318 35.4748 14.9918 35.4748C6.25575 35.4748 1.88775 29.3788 1.88775 22.0348C1.88775 13.6348 7.79175 6.05082 16.8158 6.05082C23.5837 6.05082 28.6238 10.3228 28.6238 17.3788C28.6238 23.0428 24.7358 27.6508 21.6158 28.3708C21.4718 28.4188 21.3278 28.4188 21.1838 28.4188C19.8878 28.4188 19.8398 26.9308 20.1758 25.7788L23.7278 12.5788L19.7918 14.4028C19.1198 12.9628 17.9678 12.3868 16.2398 12.3868C10.6238 12.3868 7.35975 19.1068 7.35975 24.0028C7.35975 26.6908 8.31975 29.0908 11.0558 29.0908C14.4158 29.0908 16.5278 25.5868 18.0158 22.0828C17.9198 22.7548 17.3918 24.3388 17.2958 25.0108Z\",\"fill\":\"black\",\"key\":0}),React.createElement(\"path\",{\"d\":\"M43.6496 30.225C50.3096 30.225 53.9996 24.915 53.9546 19.425C53.9546 14.025 50.3996 8.94 43.9196 8.94C37.2596 8.94 33.6146 14.34 33.6596 19.83C33.6596 25.23 37.2146 30.225 43.6496 30.225ZM44.6846 29.595C40.4096 29.595 37.9796 24.51 37.5296 19.695C37.0796 14.52 38.6096 9.57 42.8846 9.57C47.2046 9.57 49.6796 14.655 50.0396 19.425C50.4896 24.555 48.9146 29.595 44.6846 29.595ZM56.642 11.55C57.767 12.945 57.992 14.79 57.992 16.41V25.14C57.992 26.76 57.767 28.605 56.642 30H62.852C61.727 28.605 61.502 26.76 61.502 25.14V15.06C63.482 12.135 65.552 10.74 67.802 10.74C72.392 10.74 72.077 15.24 72.077 19.695V25.14C72.077 26.76 71.852 28.605 70.727 30H76.937C75.812 28.605 75.587 26.76 75.587 25.14V18.84C75.587 14.025 75.497 8.985 69.692 8.985C66.092 8.985 63.572 11.19 61.502 14.79V9.12L56.642 11.55ZM79.6254 19.605C79.6254 25.68 83.5404 30.225 89.5254 30.225C93.3054 30.225 96.1854 28.425 98.0754 24.51C96.0054 27.48 93.7554 28.38 91.4604 28.38C85.7904 28.38 83.6754 23.115 83.4954 19.02H98.2554C98.3904 13.125 95.4654 8.94 89.7504 8.94C83.9904 8.94 79.6254 13.17 79.6254 19.605ZM83.4054 18.48C83.4054 17.895 83.4054 17.31 83.4504 16.77C83.9004 12.63 86.0154 9.525 89.0754 9.525C92.2254 9.525 94.3404 12.63 94.3404 15.51C94.3404 18.3 92.3154 18.3 89.7954 18.39L83.4054 18.48ZM110.974 8.94C104.629 8.94 100.939 13.71 100.939 19.785C100.939 25.5 104.449 30.27 110.479 30.27C113.089 30.27 115.429 29.055 116.959 26.985V34.185C116.959 36.075 116.689 38.055 115.249 39.45H121.774C120.694 38.055 120.424 36.3 120.424 34.59V8.76L118.399 12.675C116.599 10.155 114.079 8.94 110.974 8.94ZM104.674 18.12C104.674 14.475 106.069 9.525 110.479 9.525C114.979 9.525 116.959 15.78 116.959 19.605V26.76C115.744 28.11 114.124 29.055 112.234 29.055C106.699 29.055 104.674 22.755 104.674 18.12ZM125.844 16.59V20.865C125.844 25.725 126.114 30.225 131.739 30.225C135.609 30.225 138.039 27.66 139.929 24.465V30.45L144.744 28.11C143.619 26.715 143.394 24.78 143.394 23.25V9.12L138.579 11.55C139.704 12.945 139.929 14.88 139.929 16.41V24.15C138.084 26.805 136.059 28.425 133.539 28.425C129.084 28.425 129.309 24.33 129.309 19.74V9.3L124.494 11.73C125.619 13.125 125.844 15.06 125.844 16.59ZM147.883 2.685C147.883 1.245 148.873 0.299999 150.313 0.299999C151.753 0.299999 152.698 1.245 152.698 2.685C152.698 4.125 151.753 5.115 150.313 5.115C148.873 5.115 147.883 4.125 147.883 2.685ZM148.873 25.14C148.873 26.76 148.648 28.605 147.523 30H153.733C152.608 28.605 152.383 26.76 152.383 25.14V9.12L147.523 11.55C148.648 12.945 148.873 14.79 148.873 16.41V25.14ZM156.442 11.55C157.567 12.945 157.792 14.79 157.792 16.41V25.14C157.792 26.76 157.567 28.605 156.442 30H162.652C161.527 28.605 161.302 26.76 161.302 25.14V15.06C163.282 12.135 165.352 10.74 167.602 10.74C172.192 10.74 171.877 15.24 171.877 19.695V25.14C171.877 26.76 171.652 28.605 170.527 30H176.737C175.612 28.605 175.387 26.76 175.387 25.14V18.84C175.387 14.025 175.297 8.985 169.492 8.985C165.892 8.985 163.372 11.19 161.302 14.79V9.12L156.442 11.55ZM195.31 16.905L197.2 11.325C195.175 9.525 192.475 8.94 190.045 8.94C182.8 8.94 179.425 14.205 179.425 19.425C179.425 24.87 183.07 30.225 189.82 30.225C193.375 30.225 196.12 28.74 197.74 25.545C195.94 27.885 193.6 28.47 191.755 28.47C186.085 28.47 183.16 23.115 183.16 18.03C183.16 13.53 185.41 9.48 189.505 9.48C192.43 9.48 194.635 11.55 195.31 16.905ZM199.772 19.605C199.772 25.68 203.687 30.225 209.672 30.225C213.452 30.225 216.332 28.425 218.222 24.51C216.152 27.48 213.902 28.38 211.607 28.38C205.937 28.38 203.822 23.115 203.642 19.02H218.402C218.537 13.125 215.612 8.94 209.897 8.94C204.137 8.94 199.772 13.17 199.772 19.605ZM203.552 18.48C203.552 17.895 203.552 17.31 203.597 16.77C204.047 12.63 206.162 9.525 209.222 9.525C212.372 9.525 214.487 12.63 214.487 15.51C214.487 18.3 212.462 18.3 209.942 18.39L203.552 18.48Z\",\"fill\":\"black\",\"key\":1})]);\n}\n\nMentionForMobile.defaultProps = {\"width\":\"220\",\"height\":\"40\",\"viewBox\":\"0 0 220 40\",\"fill\":\"none\"};\n\nmodule.exports = MentionForMobile;\n\nMentionForMobile.default = MentionForMobile;\n","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var React = require('react');\n\nfunction MentionForDesktop (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"path\",{\"d\":\"M20.5355 50.536C20.5355 43.72 26.1995 30.664 33.8795 30.664C36.7595 30.664 38.1995 32.776 37.5275 35.272C35.8955 40.84 31.0955 56.584 24.3755 56.584C21.3035 56.584 20.5355 52.936 20.5355 50.536ZM33.5915 52.84C32.8235 57.64 34.9355 61.096 39.6395 61.096C48.5675 61.096 57.3995 49.48 57.3995 37C57.3995 22.024 47.0315 13.48 32.6315 13.48C13.5275 13.48 0.5675 29.032 0.5675 46.504C0.5675 61.384 9.8795 74.728 27.7355 74.728C36.0875 74.728 43.8635 71.848 49.1435 67.336C42.9995 71.464 36.6635 73.768 28.9835 73.768C11.5115 73.768 2.7755 61.576 2.7755 46.888C2.7755 30.088 14.5835 14.92 32.6315 14.92C46.1675 14.92 56.2475 23.464 56.2475 37.576C56.2475 48.904 48.4715 58.12 42.2315 59.56C41.9435 59.656 41.6555 59.656 41.3675 59.656C38.7755 59.656 38.6795 56.68 39.3515 54.376L46.4555 27.976L38.5835 31.624C37.2395 28.744 34.9355 27.592 31.4795 27.592C20.2475 27.592 13.7195 41.032 13.7195 50.824C13.7195 56.2 15.6395 61 21.1115 61C27.8315 61 32.0555 53.992 35.0315 46.984C34.8395 48.328 33.7835 51.496 33.5915 52.84Z\",\"fill\":\"black\",\"key\":0}),React.createElement(\"path\",{\"d\":\"M89.3193 64.48C103.527 64.48 111.399 53.152 111.303 41.44C111.303 29.92 103.719 19.072 89.8953 19.072C75.6873 19.072 67.9113 30.592 68.0073 42.304C68.0073 53.824 75.5913 64.48 89.3193 64.48ZM91.5273 63.136C82.4073 63.136 77.2233 52.288 76.2633 42.016C75.3033 30.976 78.5673 20.416 87.6873 20.416C96.9033 20.416 102.183 31.264 102.951 41.44C103.911 52.384 100.551 63.136 91.5273 63.136ZM117.036 24.64C119.436 27.616 119.916 31.552 119.916 35.008V53.632C119.916 57.088 119.436 61.024 117.036 64H130.284C127.884 61.024 127.404 57.088 127.404 53.632V32.128C131.628 25.888 136.044 22.912 140.844 22.912C150.636 22.912 149.964 32.512 149.964 42.016V53.632C149.964 57.088 149.484 61.024 147.084 64H160.332C157.932 61.024 157.452 57.088 157.452 53.632V40.192C157.452 29.92 157.26 19.168 144.876 19.168C137.196 19.168 131.82 23.872 127.404 31.552V19.456L117.036 24.64ZM166.068 41.824C166.068 54.784 174.42 64.48 187.188 64.48C195.252 64.48 201.396 60.64 205.428 52.288C201.012 58.624 196.212 60.544 191.316 60.544C179.22 60.544 174.708 49.312 174.324 40.576H205.812C206.1 28 199.86 19.072 187.668 19.072C175.38 19.072 166.068 28.096 166.068 41.824ZM174.132 39.424C174.132 38.176 174.132 36.928 174.228 35.776C175.188 26.944 179.7 20.32 186.228 20.32C192.948 20.32 197.46 26.944 197.46 33.088C197.46 39.04 193.14 39.04 187.764 39.232L174.132 39.424ZM232.944 19.072C219.408 19.072 211.536 29.248 211.536 42.208C211.536 54.4 219.024 64.576 231.888 64.576C237.456 64.576 242.448 61.984 245.712 57.568V72.928C245.712 76.96 245.136 81.184 242.064 84.16H255.984C253.68 81.184 253.104 77.44 253.104 73.792V18.688L248.784 27.04C244.944 21.664 239.568 19.072 232.944 19.072ZM219.504 38.656C219.504 30.88 222.48 20.32 231.888 20.32C241.488 20.32 245.712 33.664 245.712 41.824V57.088C243.12 59.968 239.664 61.984 235.632 61.984C223.824 61.984 219.504 48.544 219.504 38.656ZM264.666 35.392V44.512C264.666 54.88 265.242 64.48 277.242 64.48C285.498 64.48 290.682 59.008 294.714 52.192V64.96L304.986 59.968C302.586 56.992 302.106 52.864 302.106 49.6V19.456L291.834 24.64C294.234 27.616 294.714 31.744 294.714 35.008V51.52C290.778 57.184 286.458 60.64 281.082 60.64C271.578 60.64 272.058 51.904 272.058 42.112V19.84L261.786 25.024C264.186 28 264.666 32.128 264.666 35.392ZM311.684 5.72799C311.684 2.65599 313.796 0.639997 316.868 0.639997C319.94 0.639997 321.956 2.65599 321.956 5.72799C321.956 8.8 319.94 10.912 316.868 10.912C313.796 10.912 311.684 8.8 311.684 5.72799ZM313.796 53.632C313.796 57.088 313.316 61.024 310.916 64H324.164C321.764 61.024 321.284 57.088 321.284 53.632V19.456L310.916 24.64C313.316 27.616 313.796 31.552 313.796 35.008V53.632ZM329.943 24.64C332.343 27.616 332.823 31.552 332.823 35.008V53.632C332.823 57.088 332.343 61.024 329.943 64H343.191C340.791 61.024 340.311 57.088 340.311 53.632V32.128C344.535 25.888 348.951 22.912 353.751 22.912C363.543 22.912 362.871 32.512 362.871 42.016V53.632C362.871 57.088 362.391 61.024 359.991 64H373.239C370.839 61.024 370.359 57.088 370.359 53.632V40.192C370.359 29.92 370.167 19.168 357.783 19.168C350.103 19.168 344.727 23.872 340.311 31.552V19.456L329.943 24.64ZM412.862 36.064L416.894 24.16C412.574 20.32 406.814 19.072 401.63 19.072C386.174 19.072 378.974 30.304 378.974 41.44C378.974 53.056 386.75 64.48 401.15 64.48C408.734 64.48 414.59 61.312 418.046 54.496C414.206 59.488 409.214 60.736 405.278 60.736C393.182 60.736 386.942 49.312 386.942 38.464C386.942 28.864 391.742 20.224 400.478 20.224C406.718 20.224 411.422 24.64 412.862 36.064ZM422.38 41.824C422.38 54.784 430.732 64.48 443.5 64.48C451.564 64.48 457.708 60.64 461.74 52.288C457.324 58.624 452.524 60.544 447.628 60.544C435.532 60.544 431.02 49.312 430.636 40.576H462.124C462.412 28 456.172 19.072 443.98 19.072C431.692 19.072 422.38 28.096 422.38 41.824ZM430.444 39.424C430.444 38.176 430.444 36.928 430.54 35.776C431.5 26.944 436.012 20.32 442.54 20.32C449.26 20.32 453.772 26.944 453.772 33.088C453.772 39.04 449.452 39.04 444.076 39.232L430.444 39.424Z\",\"fill\":\"black\",\"key\":1})]);\n}\n\nMentionForDesktop.defaultProps = {\"width\":\"174\",\"height\":\"40\",\"viewBox\":\"0 0 465 85\",\"fill\":\"none\"};\n\nmodule.exports = MentionForDesktop;\n\nMentionForDesktop.default = MentionForDesktop;\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../styles/utils'\n\nimport {\n  Input,\n  TextArea,\n  RatingInput,\n  RadioSelection,\n  Select,\n  RadioGroup,\n  Container,\n} from './FormElements'\n\nimport ModalHeader from './ModalHeader'\nimport Button from './Button'\n\nconst StyledForm = styled.form`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    min-width: ${desktopVw(720)};\n  }\n`\n\nconst FieldsContainer = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 -${desktopVw(10)};\n  }\n`\n\nconst StyledContainer = styled(Container)`\n  &.container--radio-selection {\n    + div:not(.container--radio-selection) {\n      margin-top: 32px;\n    }\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 ${desktopVw(10)};\n\n    &.container__half {\n      display: inline-flex;\n      flex-direction: column;\n      width: 50%;\n      box-sizing: border-box;\n    }\n\n    &.container--radio-selection {\n      + div:not(.container--radio-selection) {\n        margin-top: ${desktopVw(36)};\n      }\n    }\n  }\n`\n\nconst SubmitButton = styled(Button)`\n  display: block;\n  font-family: ${props => props.theme.fonts.primary};\n  width: 100%;\n\n  &:disabled {\n    background: ${props => props.theme.colors.greyLighter};\n    cursor: initial;\n    border-color: ${props => props.theme.colors.greyLighter};\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 auto;\n    margin-top: ${desktopVw(30)};\n    width: auto;\n  }\n`\n\nconst CheckBox = styled.input`\n  &:checked + label {\n    background: ${props => props.theme.colors.primary};\n    color: ${props => props.theme.colors.secondary};\n    border-color: ${props => props.theme.colors.primary};\n  }\n`\n\nconst DefaultAddressContainer = styled.div`\n  margin: auto;\n`\n\nconst Form = ({\n  children,\n  fields,\n  title,\n  register,\n  errors,\n  formValues,\n  handleSubmit,\n  disableSubmit,\n  submitButtonText,\n  loading,\n  defaultAddressCheckbox = false,\n  onCheckboxChange,\n}) => {\n  return (\n    <StyledForm onSubmit={handleSubmit}>\n      <ModalHeader title={title} />\n      <FieldsContainer>\n        {fields.map((f, i) => {\n          switch (f.__typename) {\n            case 'ContentfulInput':\n              return (\n                <React.Fragment key={f.id}>\n                  {f.type === 'text' && (\n                    <StyledContainer className={!f.width && 'container__half'}>\n                      <Input\n                        placeholder={f.placeholder}\n                        required={f.required}\n                        aria-label={f.label}\n                        name={f.name}\n                        defaultValue={formValues && formValues[f.name]}\n                        type={f.type}\n                        register={register}\n                        errors={errors}\n                        required={f.required === false ? false : true}\n                      />\n                    </StyledContainer>\n                  )}\n                  {f.type === 'textarea' && (\n                    <StyledContainer className={!f.width && 'container__half'}>\n                      <TextArea\n                        name={f.name}\n                        placeholder={f.placeholder}\n                        defaultValue={formValues && formValues[f.name]}\n                        register={register}\n                        errors={errors}\n                        required={f.required}\n                      />\n                    </StyledContainer>\n                  )}\n                </React.Fragment>\n              )\n\n            case 'ContentfulRadio':\n              return (\n                <React.Fragment key={f.id}>\n                  {f.type === 'rating' && (\n                    <StyledContainer>\n                      <RatingInput\n                        name={f.name}\n                        range={f.range}\n                        register={register}\n                        errors={errors}\n                      />\n                    </StyledContainer>\n                  )}\n                  {f.type === 'range' && (\n                    <StyledContainer className='container--radio-selection'>\n                      <RadioSelection\n                        label={f.label}\n                        name={f.name}\n                        range={f.range}\n                        register={register}\n                        errors={errors}\n                        displayValues={f.displayValues}\n                      />\n                    </StyledContainer>\n                  )}\n                  {f.type === 'radio' && (\n                    <StyledContainer>\n                      <RadioGroup\n                        label={f.label}\n                        name={f.name}\n                        options={f.radioOptions}\n                        register={register}\n                        errors={errors}\n                      />\n                    </StyledContainer>\n                  )}\n                </React.Fragment>\n              )\n\n            case 'ContentfulSelect':\n              return (\n                <StyledContainer\n                  key={f.id}\n                  className={!f.width && 'container__half'}\n                >\n                  <Select\n                    label={f.label}\n                    name={f.name}\n                    options={f.options}\n                    register={register}\n                    defaultValue={formValues && formValues[f.name]}\n                    errors={errors}\n                  />\n                </StyledContainer>\n              )\n\n            default:\n              return null\n          }\n        })}\n        {children && <StyledContainer>{children}</StyledContainer>}\n        {defaultAddressCheckbox && ( //TODO: This is not generic enough.\n          <DefaultAddressContainer>\n            <CheckBox\n              type='checkbox'\n              name='Default Address'\n              defaultChecked={false}\n              onChange={onCheckboxChange}\n            />{' '}\n            Set as default address\n          </DefaultAddressContainer>\n        )}\n\n        <SubmitButton\n          black\n          type='submit'\n          loading={loading}\n          disabled={disableSubmit}\n        >\n          {submitButtonText}\n        </SubmitButton>\n      </FieldsContainer>\n    </StyledForm>\n  )\n}\n\nexport default Form\n","'use strict';\n\nmodule.exports = function (str) {\n  return encodeURIComponent(str).replace(/[!'()*]/g, function (x) {\n    return \"%\".concat(x.charCodeAt(0).toString(16).toUpperCase());\n  });\n};","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","'use strict';\n\nvar _slicedToArray = require(\"/Users/apple/Desktop/quince_repos/ecomm-site/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _toConsumableArray = require(\"/Users/apple/Desktop/quince_repos/ecomm-site/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar strictUriEncode = require('strict-uri-encode');\n\nvar decodeComponent = require('decode-uri-component');\n\nvar splitOnFirst = require('split-on-first');\n\nvar isNullOrUndefined = function isNullOrUndefined(value) {\n  return value === null || value === undefined;\n};\n\nfunction encoderForArrayFormat(options) {\n  switch (options.arrayFormat) {\n    case 'index':\n      return function (key) {\n        return function (result, value) {\n          var index = result.length;\n\n          if (value === undefined || options.skipNull && value === null || options.skipEmptyString && value === '') {\n            return result;\n          }\n\n          if (value === null) {\n            return [].concat(_toConsumableArray(result), [[encode(key, options), '[', index, ']'].join('')]);\n          }\n\n          return [].concat(_toConsumableArray(result), [[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')]);\n        };\n      };\n\n    case 'bracket':\n      return function (key) {\n        return function (result, value) {\n          if (value === undefined || options.skipNull && value === null || options.skipEmptyString && value === '') {\n            return result;\n          }\n\n          if (value === null) {\n            return [].concat(_toConsumableArray(result), [[encode(key, options), '[]'].join('')]);\n          }\n\n          return [].concat(_toConsumableArray(result), [[encode(key, options), '[]=', encode(value, options)].join('')]);\n        };\n      };\n\n    case 'comma':\n    case 'separator':\n      return function (key) {\n        return function (result, value) {\n          if (value === null || value === undefined || value.length === 0) {\n            return result;\n          }\n\n          if (result.length === 0) {\n            return [[encode(key, options), '=', encode(value, options)].join('')];\n          }\n\n          return [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n        };\n      };\n\n    default:\n      return function (key) {\n        return function (result, value) {\n          if (value === undefined || options.skipNull && value === null || options.skipEmptyString && value === '') {\n            return result;\n          }\n\n          if (value === null) {\n            return [].concat(_toConsumableArray(result), [encode(key, options)]);\n          }\n\n          return [].concat(_toConsumableArray(result), [[encode(key, options), '=', encode(value, options)].join('')]);\n        };\n      };\n  }\n}\n\nfunction parserForArrayFormat(options) {\n  var result;\n\n  switch (options.arrayFormat) {\n    case 'index':\n      return function (key, value, accumulator) {\n        result = /\\[(\\d*)\\]$/.exec(key);\n        key = key.replace(/\\[\\d*\\]$/, '');\n\n        if (!result) {\n          accumulator[key] = value;\n          return;\n        }\n\n        if (accumulator[key] === undefined) {\n          accumulator[key] = {};\n        }\n\n        accumulator[key][result[1]] = value;\n      };\n\n    case 'bracket':\n      return function (key, value, accumulator) {\n        result = /(\\[\\])$/.exec(key);\n        key = key.replace(/\\[\\]$/, '');\n\n        if (!result) {\n          accumulator[key] = value;\n          return;\n        }\n\n        if (accumulator[key] === undefined) {\n          accumulator[key] = [value];\n          return;\n        }\n\n        accumulator[key] = [].concat(accumulator[key], value);\n      };\n\n    case 'comma':\n    case 'separator':\n      return function (key, value, accumulator) {\n        var isArray = typeof value === 'string' && value.split('').indexOf(options.arrayFormatSeparator) > -1;\n        var newValue = isArray ? value.split(options.arrayFormatSeparator).map(function (item) {\n          return decode(item, options);\n        }) : value === null ? value : decode(value, options);\n        accumulator[key] = newValue;\n      };\n\n    default:\n      return function (key, value, accumulator) {\n        if (accumulator[key] === undefined) {\n          accumulator[key] = value;\n          return;\n        }\n\n        accumulator[key] = [].concat(accumulator[key], value);\n      };\n  }\n}\n\nfunction validateArrayFormatSeparator(value) {\n  if (typeof value !== 'string' || value.length !== 1) {\n    throw new TypeError('arrayFormatSeparator must be single character string');\n  }\n}\n\nfunction encode(value, options) {\n  if (options.encode) {\n    return options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n  }\n\n  return value;\n}\n\nfunction decode(value, options) {\n  if (options.decode) {\n    return decodeComponent(value);\n  }\n\n  return value;\n}\n\nfunction keysSorter(input) {\n  if (Array.isArray(input)) {\n    return input.sort();\n  }\n\n  if (typeof input === 'object') {\n    return keysSorter(Object.keys(input)).sort(function (a, b) {\n      return Number(a) - Number(b);\n    }).map(function (key) {\n      return input[key];\n    });\n  }\n\n  return input;\n}\n\nfunction removeHash(input) {\n  var hashStart = input.indexOf('#');\n\n  if (hashStart !== -1) {\n    input = input.slice(0, hashStart);\n  }\n\n  return input;\n}\n\nfunction getHash(url) {\n  var hash = '';\n  var hashStart = url.indexOf('#');\n\n  if (hashStart !== -1) {\n    hash = url.slice(hashStart);\n  }\n\n  return hash;\n}\n\nfunction extract(input) {\n  input = removeHash(input);\n  var queryStart = input.indexOf('?');\n\n  if (queryStart === -1) {\n    return '';\n  }\n\n  return input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n  if (options.parseNumbers && !Number.isNaN(Number(value)) && typeof value === 'string' && value.trim() !== '') {\n    value = Number(value);\n  } else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n    value = value.toLowerCase() === 'true';\n  }\n\n  return value;\n}\n\nfunction parse(input, options) {\n  options = Object.assign({\n    decode: true,\n    sort: true,\n    arrayFormat: 'none',\n    arrayFormatSeparator: ',',\n    parseNumbers: false,\n    parseBooleans: false\n  }, options);\n  validateArrayFormatSeparator(options.arrayFormatSeparator);\n  var formatter = parserForArrayFormat(options); // Create an object with no prototype\n\n  var ret = Object.create(null);\n\n  if (typeof input !== 'string') {\n    return ret;\n  }\n\n  input = input.trim().replace(/^[?#&]/, '');\n\n  if (!input) {\n    return ret;\n  }\n\n  var _iterator = _createForOfIteratorHelper(input.split('&')),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var param = _step.value;\n\n      var _splitOnFirst = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '='),\n          _splitOnFirst2 = _slicedToArray(_splitOnFirst, 2),\n          _key = _splitOnFirst2[0],\n          _value = _splitOnFirst2[1]; // Missing `=` should be `null`:\n      // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\n\n      _value = _value === undefined ? null : ['comma', 'separator'].includes(options.arrayFormat) ? _value : decode(_value, options);\n      formatter(decode(_key, options), _value, ret);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(ret); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n    var value = ret[key];\n\n    if (typeof value === 'object' && value !== null) {\n      for (var _i2 = 0, _Object$keys2 = Object.keys(value); _i2 < _Object$keys2.length; _i2++) {\n        var k = _Object$keys2[_i2];\n        value[k] = parseValue(value[k], options);\n      }\n    } else {\n      ret[key] = parseValue(value, options);\n    }\n  }\n\n  if (options.sort === false) {\n    return ret;\n  }\n\n  return (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce(function (result, key) {\n    var value = ret[key];\n\n    if (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n      // Sort object keys, not values\n      result[key] = keysSorter(value);\n    } else {\n      result[key] = value;\n    }\n\n    return result;\n  }, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = function (object, options) {\n  if (!object) {\n    return '';\n  }\n\n  options = Object.assign({\n    encode: true,\n    strict: true,\n    arrayFormat: 'none',\n    arrayFormatSeparator: ','\n  }, options);\n  validateArrayFormatSeparator(options.arrayFormatSeparator);\n\n  var shouldFilter = function shouldFilter(key) {\n    return options.skipNull && isNullOrUndefined(object[key]) || options.skipEmptyString && object[key] === '';\n  };\n\n  var formatter = encoderForArrayFormat(options);\n  var objectCopy = {};\n\n  for (var _i3 = 0, _Object$keys3 = Object.keys(object); _i3 < _Object$keys3.length; _i3++) {\n    var key = _Object$keys3[_i3];\n\n    if (!shouldFilter(key)) {\n      objectCopy[key] = object[key];\n    }\n  }\n\n  var keys = Object.keys(objectCopy);\n\n  if (options.sort !== false) {\n    keys.sort(options.sort);\n  }\n\n  return keys.map(function (key) {\n    var value = object[key];\n\n    if (value === undefined) {\n      return '';\n    }\n\n    if (value === null) {\n      return encode(key, options);\n    }\n\n    if (Array.isArray(value)) {\n      return value.reduce(formatter(key), []).join('&');\n    }\n\n    return encode(key, options) + '=' + encode(value, options);\n  }).filter(function (x) {\n    return x.length > 0;\n  }).join('&');\n};\n\nexports.parseUrl = function (input, options) {\n  options = Object.assign({\n    decode: true\n  }, options);\n\n  var _splitOnFirst3 = splitOnFirst(input, '#'),\n      _splitOnFirst4 = _slicedToArray(_splitOnFirst3, 2),\n      url = _splitOnFirst4[0],\n      hash = _splitOnFirst4[1];\n\n  return Object.assign({\n    url: url.split('?')[0] || '',\n    query: parse(extract(input), options)\n  }, options && options.parseFragmentIdentifier && hash ? {\n    fragmentIdentifier: decode(hash, options)\n  } : {});\n};\n\nexports.stringifyUrl = function (input, options) {\n  options = Object.assign({\n    encode: true,\n    strict: true\n  }, options);\n  var url = removeHash(input.url).split('?')[0] || '';\n  var queryFromUrl = exports.extract(input.url);\n  var parsedQueryFromUrl = exports.parse(queryFromUrl, {\n    sort: false\n  });\n  var query = Object.assign(parsedQueryFromUrl, input.query);\n  var queryString = exports.stringify(query, options);\n\n  if (queryString) {\n    queryString = \"?\".concat(queryString);\n  }\n\n  var hash = getHash(input.url);\n\n  if (input.fragmentIdentifier) {\n    hash = \"#\".concat(encode(input.fragmentIdentifier, options));\n  }\n\n  return \"\".concat(url).concat(queryString).concat(hash);\n};","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nconst UniqueSellingPoints = styled.div`\n  display: none;\n  justify-content: center;\n  margin: 13px 0 19px;\n  padding: 0 20px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(14)} ${desktopVw(32)} ${desktopVw(14)};\n    margin: ${desktopVw(12)} 0 0;\n    border-top: 1px solid ${props => props.theme.colors.greyLighter};\n    border-bottom: 1px solid ${props => props.theme.colors.greyLighter};\n  }\n`\n\nconst UspIcon = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  text-align: center;\n  max-width: 103px;\n  padding: 0 15px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    max-width: ${desktopVw(100)};\n    padding: 0 ${desktopVw(15)};\n  }\n`\n\nconst UspIconText = styled.span`\n  display: flex;\n  justify-content: center;\n  height: 100%;\n  margin: 3px 0 auto;\n  font-size: 8px;\n  line-height: 12px;\n  text-transform: uppercase;\n  color: #4f4f4f;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: ${desktopVw(3)} 0 0;\n    font-size: ${desktopVw(8)};\n    line-height: ${desktopVw(12)};\n  }\n`\n\nconst Usp = ({ icons }) => {\n  return (\n    <UniqueSellingPoints>\n      {icons &&\n        icons.map(({ id, image, text }) => (\n          <UspIcon key={id}>\n            <img src={image.file.url} alt={image.description} />\n            <UspIconText>{text}</UspIconText>\n          </UspIcon>\n        ))}\n    </UniqueSellingPoints>\n  )\n}\n\nexport default Usp\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVh, desktopVw } from '../../styles/utils'\n\nimport Accordion from '../Accordion'\n\nconst StyledProductDetails = styled.div`\n  padding: 0 10px;\n\n  h2 {\n    font-size: 11px;\n    line-height: 20px;\n    text-transform: uppercase;\n  }\n\n  p {\n    color: #4f4f4f;\n    font-size: 11px;\n    line-height: 18px;\n\n    &:last-child {\n      margin: 0;\n    }\n  }\n\n  ol:last-of-type,\n  ul:last-of-type {\n    margin: 0;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0;\n\n    h2 {\n      font-size: ${desktopVw(11)};\n      line-height: ${desktopVw(20)};\n    }\n\n    p {\n      font-size: ${desktopVw(11)};\n      line-height: ${desktopVw(18)};\n    }\n\n    .accordion-label-container {\n      padding-top: ${desktopVh(16)};\n    }\n  }\n`\n\nconst StyledAccordion = styled(Accordion)`\n  padding: 0 11px 0 8px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0;\n  }\n`\n\nconst AccordionWrapper = styled.div`\n  border-top: 1px solid #e3e3e3;\n\n  &:first-child {\n    border-top: none;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    border-top: none;\n  }\n`\n\nconst getShippingInfoHTML = shippingInformation => {\n  return shippingInformation &&\n    shippingInformation.includes('<ul>') &&\n    shippingInformation.includes('</ul>')\n    ? shippingInformation\n    : `<ul><li>${shippingInformation}</li></ul>`\n}\n\nconst ProductDetails = ({\n  accordion,\n  productId,\n  detailsHTML,\n  descriptionHTML,\n  shippingInformation,\n}) => {\n  return (\n    <StyledProductDetails>\n      {accordion && (\n        <AccordionWrapper>\n          <StyledAccordion\n            items={accordion}\n            activeIndex={[0, 1]}\n            trackParams={{\n              trackInternal: true,\n              trackGA: true,\n              trackInternal: true,\n              category: 'education',\n              action: 'view_product_details',\n              context: { product_id: productId },\n            }}\n            htmlContent={{\n              Details: detailsHTML,\n              Description: descriptionHTML,\n              Shipping: getShippingInfoHTML(shippingInformation),\n            }}\n          />\n        </AccordionWrapper>\n      )}\n    </StyledProductDetails>\n  )\n}\n\nexport default ProductDetails\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw, mobileVw } from '../../styles/utils'\n\nimport PairWithThumbnail from '../PairWithThumbnail'\n\nimport Carousel from '../common/Carousel'\nimport { extractProductJsonFromAPIProduct } from '../../utils/build'\nimport SpinningLoader from '../SpinningLoader'\n\nconst settings = {\n  slidesToShow: 2,\n  slidesToScroll: 2,\n  leftArrowStyle: { top: desktopVw(140) },\n  rightArrowStyle: { top: desktopVw(140) },\n  showDisabledArrows: false,\n}\n\nconst StyledPairWith = styled.section`\n  margin-bottom: 10px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    padding: 10px;\n  }\n`\n\nconst PairWithTitle = styled.h3`\n  font-size: ${mobileVw(25)};\n  line-height: ${mobileVw(20)};\n  font-weight: 500;\n  padding: 0 10px;\n  font-family: ${props => props.theme.fonts.primary};\n  margin-bottom: ${mobileVw(25)};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 0 0 8px;\n    font-size: ${desktopVw(25)};\n    line-height: ${desktopVw(20)};\n    margin: ${desktopVw(22)} 0 ${desktopVw(39)};\n  }\n`\n\nconst PairWithMobile = styled.div`\n  display: flex;\n  flex: 1;\n  margin: 10px 0 0;\n  padding: 0 10px;\n  overflow-x: scroll;\n  white-space: nowrap;\n  -webkit-overflow-scrolling: touch;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst PairWithItem = styled.div`\n  padding-right: 10px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(220)} !important;\n    padding: 0 10px;\n    margin-bottom: 20px;\n  }\n`\n\nconst PairWithDesktop = styled(Carousel)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n// no need to have carousel, when cards length less than 3\nconst PairsWithDesktop = styled.div`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n  }\n`\n\nconst StyledDesktopLoaderContainer = styled.div`\n  position: relative;\n  height: ${mobileVw(400)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(400)};\n  }\n`\n\nconst PairWith = ({\n  startingSize,\n  selectedColor,\n  pairedProducts,\n  gender,\n  loading,\n}) => {\n  const newPairedProducts = (pairedProducts ?? []).map(pairedProduct => {\n    return {\n      sourceColor: pairedProduct.sourceColor,\n      pairedColor: pairedProduct.pairedColor,\n      product: extractProductJsonFromAPIProduct(\n        pairedProduct.pairedProduct,\n        1440,\n      ),\n    }\n  })\n\n  const tracker = 'pair_with_section'\n\n  function renderPairedProducts() {\n    return newPairedProducts\n      .slice(0, 6)\n      .map(({ product, pairedColor }, index) => (\n        <PairWithItem key={product.id}>\n          <PairWithThumbnail\n            contentfulProduct={product}\n            title={product.title || product.shopifyProduct.title}\n            staticPrice={product.shopifyProduct.variants.edges[0].node.price}\n            startingColor={pairedColor}\n            startingSize={startingSize}\n            tracker={`pair_with_section__${index}`}\n            colorObj={(product.colors || []).find(\n              color => color.name === pairedColor,\n            )}\n            gender={gender}\n            addToCartTrackerSection='pair_with_section'\n          />\n        </PairWithItem>\n      ))\n  }\n\n  return (\n    <StyledPairWith key={selectedColor}>\n      {((newPairedProducts && newPairedProducts.length > 0) || loading) && (\n        <>\n          <PairWithTitle>Pair It With</PairWithTitle>\n          {loading ? (\n            <StyledDesktopLoaderContainer>\n              <SpinningLoader />\n            </StyledDesktopLoaderContainer>\n          ) : (\n            <>\n              <PairWithMobile>{renderPairedProducts()}</PairWithMobile>\n              {newPairedProducts.length > 2 ? (\n                <PairWithDesktop {...settings}>\n                  {renderPairedProducts()}\n                </PairWithDesktop>\n              ) : (\n                <PairsWithDesktop>{renderPairedProducts()}</PairsWithDesktop>\n              )}\n            </>\n          )}\n        </>\n      )}\n    </StyledPairWith>\n  )\n}\n\nexport default PairWith\n","import React from 'react'\nimport styled from 'styled-components'\nimport dayjs from 'dayjs'\nimport { desktopVw } from '../styles/utils'\nimport Rating from './Rating'\nimport useMounted from '../hooks/useMounted'\n\nconst StyledProductReview = styled.article`\n  display: flex;\n  flex-direction: column-reverse;\n  position: relative;\n  padding: 30px 20px 36px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    padding: ${desktopVw(25)} 0 ${desktopVw(29)};\n  }\n`\n\nconst ReviewDetails = styled.div`\n  display: flex;\n  color: ${props => props.theme.colors.greyLight};\n  text-transform: uppercase;\n  font-size: 10px;\n  line-height: 16px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: column;\n    margin: ${desktopVw(5)} ${desktopVw(65)} 0 0;\n    max-width: ${desktopVw(135)};\n    width: 100%;\n    font-size: ${desktopVw(10)};\n  }\n`\n\nconst Content = styled.div`\n  flex: 1;\n`\n\nconst MessageContainer = styled.div`\n  display: flex;\n`\n\nconst MessageWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst Header = styled.header`\n  margin: 0 0 8px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: ${desktopVw(8)} 0;\n  }\n`\n\nconst Title = styled.h4`\n  font-size: 15px;\n  line-height: 20px;\n  font-family: ${props => props.theme.fonts.primary};\n  font-weight: 500;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(15)};\n    line-height: ${desktopVw(20)};\n  }\n`\n\nconst Message = styled.p`\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  width: 100%;\n  margin-bottom: 26px;\n  font-size: 13px;\n  line-height: 16px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    -webkit-line-clamp: unset;\n    font-size: ${desktopVw(15)};\n    line-height: ${desktopVw(20)};\n    margin-bottom: ${desktopVw(24)};\n  }\n`\n\nconst ThumbnailWrapper = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex: 1;\n    margin-left: ${desktopVw(30)};\n  }\n`\n\nconst AuthorWrapper = styled.div`\n  flex: 1;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-grow: 0;\n    margin: 0 0 ${desktopVw(24)};\n  }\n`\n\nconst Author = styled.cite`\n  font-style: normal;\n  white-space: pre;\n  color: ${props => props.theme.colors.primary};\n`\n\nconst Location = styled.div``\n\nconst PurchaseDetails = styled.div`\n  flex: 1;\n`\n\nconst PurchaseDetail = styled.p`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(2)};\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n`\n\nconst Footer = styled.footer`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  font-size: 10px;\n  color: ${props => props.theme.colors.greyLight};\n  text-transform: uppercase;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    margin: 0;\n    font-size: ${desktopVw(10)};\n  }\n`\n\nconst RatingBarWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  width: 100%;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(10)};\n    max-width: ${desktopVw(343)};\n  }\n`\n\nconst RatingBar = styled.div`\n  height: 2px;\n  width: 147px;\n  flex: 1;\n  background: ${props => props.theme.colors.greyLighter};\n  margin: 0 10px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(158)};\n    margin: 0 ${desktopVw(10)};\n  }\n`\n\nconst RatingBarInner = styled.div`\n  height: 100%;\n  background: ${props => props.theme.colors.primary};\n  width: var(--width);\n`\n\nconst RatingBarVal = styled.div`\n  width: 74px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(74)};\n  }\n`\n\nconst StyledRating = styled(Rating)`\n  margin-bottom: 8px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(8)};\n  }\n`\n\nconst ProductReview = ({\n  children,\n  author,\n  location,\n  title: reviewTitle,\n  body: reviewMessage,\n  rating: reviewRating,\n  reviewOptions: reviewOptionsList,\n  dateCreated: reviewDate,\n  imagesFileName: reviewUserPhotos,\n}) => {\n  const { mounted } = useMounted()\n\n  const hasOptions = reviewOptionsList.length > 0\n  const barRatings = ['Fit', 'Length', 'Price For Quality']\n\n  const fit =\n    hasOptions &&\n    reviewOptionsList.find(({ message }) => message === barRatings[0])\n  const fitRating = fit && (100 / 5) * parseInt(fit.value)\n\n  const length =\n    hasOptions &&\n    reviewOptionsList.find(({ message }) => message === barRatings[1])\n  const lengthRating = length && (100 / 5) * parseInt(length.value)\n\n  const priceForQuality =\n    hasOptions &&\n    reviewOptionsList.find(({ message }) => message === barRatings[2])\n  const priceForQualityRating =\n    priceForQuality && (100 / 5) * parseInt(priceForQuality.value)\n\n  const purchaseDetails = reviewOptionsList.filter(\n    ({ message }) => !barRatings.includes(message),\n  )\n\n  return (\n    <StyledProductReview>\n      <ReviewDetails>\n        <AuthorWrapper>\n          <Author>{author}</Author>\n          <Location>{`From ${location}`}</Location>\n          {reviewDate && (\n            <PurchaseDetail>\n              Date: {dayjs(reviewDate).format('MM/DD/YYYY')}\n            </PurchaseDetail>\n          )}\n        </AuthorWrapper>\n        <PurchaseDetails>\n          {purchaseDetails.length > 0 &&\n            purchaseDetails.map(({ message, value }, i) => (\n              <PurchaseDetail\n                key={`${message}${i}`}\n              >{`${message}: ${value}`}</PurchaseDetail>\n            ))}\n        </PurchaseDetails>\n      </ReviewDetails>\n      <Content>\n        <MessageContainer>\n          <MessageWrapper hasPhotos={reviewUserPhotos}>\n            <Header>\n              {mounted && <StyledRating rating={reviewRating} />}\n              <Title>{reviewTitle}</Title>\n            </Header>\n            <Message>{reviewMessage}</Message>\n          </MessageWrapper>\n          {children && <ThumbnailWrapper>{children}</ThumbnailWrapper>}\n        </MessageContainer>\n        <Footer>\n          {fit && (\n            <RatingBarWrapper>\n              <RatingBarVal>Runs small</RatingBarVal>\n              <RatingBar>\n                <RatingBarInner style={{ '--width': `${fitRating}%` }} />\n              </RatingBar>\n              <RatingBarVal>Runs large</RatingBarVal>\n            </RatingBarWrapper>\n          )}\n          {length && (\n            <RatingBarWrapper>\n              <RatingBarVal>Runs short</RatingBarVal>\n              <RatingBar>\n                <RatingBarInner rating={lengthRating} />\n              </RatingBar>\n              <RatingBarVal>Runs long</RatingBarVal>\n            </RatingBarWrapper>\n          )}\n          {priceForQuality && (\n            <RatingBarWrapper>\n              <RatingBarVal>Expensive price</RatingBarVal>\n              <RatingBar>\n                <RatingBarInner rating={priceForQualityRating} />\n              </RatingBar>\n              <RatingBarVal>Unbeatable price</RatingBarVal>\n            </RatingBarWrapper>\n          )}\n        </Footer>\n      </Content>\n    </StyledProductReview>\n  )\n}\n\nexport default ProductReview\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw, mobileVw } from '../styles/utils'\n\nimport GreenCheckbox from '../assets/green_check_box.svg'\n\nexport const FULL_REVIEW_PRODUCT_TYPES = [\n  'bottoms',\n  'sweaters',\n  'tops',\n  'shirts',\n  'dresses',\n  'fleece',\n  'loungewear',\n  't-shirts',\n]\n\nconst OverallRatingsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 0 42px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    justify-content: ${props => props.justifyContent};\n    padding: ${desktopVw(47)} 0 0;\n  }\n`\n\nconst FitContainer = styled.div`\n  margin-top: 30px;\n  margin-bottom: ${props =>\n    props.bottomMargin ||\n    !(FULL_REVIEW_PRODUCT_TYPES.indexOf(props.productTypeName) > -1)\n      ? '30px'\n      : '0px'};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: ${desktopVw(0)};\n    margin-bottom: ${desktopVw(0)};\n    width: 28%;\n  }\n`\n\nconst HeadingContainer = styled.div`\n  display: flex;\n  margin-bottom: 10px;\n  font-size: 10px;\n  justify-content: space-between;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(10)};\n    font-size: ${desktopVw(10)};\n  }\n`\n\nconst Label = styled.div`\n  font-size: 11px;\n  min-width: 50px;\n  text-align: ${props => props.textAlign};\n`\n\nconst Heading = styled.div`\n  text-transform: uppercase;\n  font-size: 12px;\n  text-align: center;\n  margin-bottom: 7px;\n`\n\nconst BarContainer = styled.div`\n  display: grid;\n  grid-template-columns: ${props => `repeat(${props.columns}, 1fr)`};\n  column-gap: 2px;\n  margin-bottom: 7px;\n`\n\nconst getBackground = () => ({ filled, isPrice, theme }) => {\n  if (filled) {\n    if (isPrice) return theme.colors.shamrockGreen\n    return theme.colors.primary\n  }\n  return theme.colors.greyLighter\n}\n\nconst Bar = styled.div`\n  height: 8px;\n  background: ${getBackground()};\n`\n\nconst GreenTick = styled(GreenCheckbox)`\n  display: ${props => (props.show ? 'block' : 'none')};\n  width: 14px;\n  height: 14px;\n`\n\nconst getRatingsAverage = (reviews, key1, key2) => {\n  let totalReviewValue = 0\n  let totalReviewCount = 0\n\n  reviews.map(review => {\n    review.reviewOptions &&\n      review.reviewOptions.forEach(reviewOption => {\n        if (\n          key1 === reviewOption.message ||\n          (key2 && key2 === reviewOption.message)\n        ) {\n          totalReviewValue += parseInt(reviewOption.value)\n          totalReviewCount++\n        }\n      })\n  })\n\n  if (totalReviewCount > 0) {\n    const average = totalReviewValue / totalReviewCount\n    return Math.round(average)\n  }\n\n  return 0\n}\n\nconst OptionsOverallRating = ({ reviews, productTypeName }) => {\n  const lengthRatings = getRatingsAverage(reviews, 'Length')\n  const priceQualityRatings = getRatingsAverage(\n    reviews,\n    'Price For Quality',\n    'Quality for Price',\n  )\n  const fitRatings = getRatingsAverage(reviews, 'Fit')\n\n  return (\n    <OverallRatingsContainer\n      justifyContent={\n        FULL_REVIEW_PRODUCT_TYPES.indexOf(productTypeName) > -1\n          ? 'space-between'\n          : 'center'\n      }\n    >\n      {FULL_REVIEW_PRODUCT_TYPES.indexOf(productTypeName) > -1 && (\n        <FitContainer productTypeName={productTypeName}>\n          <Heading>Length</Heading>\n          <BarContainer columns={3}>\n            <Bar filled={[1, 2].includes(lengthRatings)} />\n            <Bar filled={lengthRatings === 3} />\n            <Bar filled={[4, 5].includes(lengthRatings)} />\n          </BarContainer>\n          <HeadingContainer>\n            <Label>Short</Label>\n            <GreenTick show={lengthRatings === 3} />\n            <Label textAlign='right'>Long</Label>\n          </HeadingContainer>\n        </FitContainer>\n      )}\n      <FitContainer productTypeName={productTypeName}>\n        <Heading>Price for quality</Heading>\n        <BarContainer columns={5}>\n          {[...Array(5).keys()].map(ratingKey => (\n            <Bar\n              key={ratingKey}\n              filled={\n                priceQualityRatings <= 5 && priceQualityRatings > ratingKey\n              }\n              isPrice\n            />\n          ))}\n        </BarContainer>\n        <HeadingContainer>\n          <Label>Expensive</Label>\n          <GreenTick />\n          <Label textAlign='right'>Unbeatable</Label>\n        </HeadingContainer>\n      </FitContainer>\n      {FULL_REVIEW_PRODUCT_TYPES.indexOf(productTypeName) > -1 && (\n        <FitContainer bottomMargin productTypeName={productTypeName}>\n          <Heading>Fit</Heading>\n          <BarContainer columns={3}>\n            <Bar filled={[1, 2].includes(fitRatings)} />\n            <Bar filled={fitRatings === 3} />\n            <Bar filled={[4, 5].includes(fitRatings)} />\n          </BarContainer>\n          <HeadingContainer>\n            <Label>Small</Label>\n            <GreenTick show={fitRatings === 3} />\n            <Label textAlign='right'>Big</Label>\n          </HeadingContainer>\n        </FitContainer>\n      )}\n    </OverallRatingsContainer>\n  )\n}\n\nexport default OptionsOverallRating\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw, mobileVw } from '../styles/utils'\n\nimport EyeIcon from '../assets/eye.svg'\n\nconst StyledEyeIcon = styled(EyeIcon)`\n  position: absolute;\n  display: none;\n  width: 13.6px;\n  height: 10.19px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(13.6)};\n    height: ${desktopVw(10.9)};\n  }\n`\n\nconst StyledReviewThumbnail = styled.div`\n  padding: 0 29px 0 0;\n  position: relative;\n  z-index: 0;\n  display: flex;\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0;\n    margin: 0 ${desktopVw(23)} 0 0;\n    &:hover {\n      ${StyledEyeIcon} {\n        display: block;\n      }\n    }\n  }\n`\n\nconst ImgWrapper = styled.figure`\n  display: block;\n  overflow: hidden;\n  width: ${mobileVw(198)};\n  height: ${mobileVw(198)};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(167)};\n    height: ${desktopVw(167)};\n  }\n`\n\nconst Img = styled.img`\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n  background: ${props => props.theme.colors.greyLighter};\n`\n\nconst UGCReviewThumbnail = ({ children, className, openModal, imageUrl }) => {\n  const reviewerPhotoUrl = `https://cdn.stamped.io/uploads/photos/${imageUrl}`\n  return (\n    <>\n      <StyledReviewThumbnail\n        onClick={() => openModal && openModal()}\n        className={className}\n      >\n        {openModal && <StyledEyeIcon />}\n        <ImgWrapper className='review__thumbnail_img-wrapper'>\n          <Img loading='lazy' src={reviewerPhotoUrl} alt={imageUrl} />\n        </ImgWrapper>\n      </StyledReviewThumbnail>\n      {children && React.cloneElement(children, { reviewerPhotoUrl })}\n    </>\n  )\n}\n\nexport default UGCReviewThumbnail\n","import React from 'react'\nimport styled from 'styled-components'\nimport { desktopVw } from '../../styles/utils'\nimport MentionMobile from '../../assets/mention_for_mobile.svg'\nimport MentionDesktop from '../../assets/mention_for_desktop.svg'\n\nconst UGCReviewSection = styled.div`\n  width: 100%;\n  background: #fff5f0;\n  padding-bottom: 80px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(758)};\n    padding-bottom: unset;\n  }\n`\n\nconst KeyWordMobile = styled(MentionMobile)`\n  display: block;\n  margin: 47px auto 37px auto;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst KeyWordDesktop = styled(MentionDesktop)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    margin: ${desktopVw(28)} auto ${desktopVw(26)} auto;\n  }\n`\n\nexport const UGCSection = ({ renderReviewWithPhotos }) => (\n  <UGCReviewSection>\n    <KeyWordDesktop />\n    <KeyWordMobile />\n    {renderReviewWithPhotos}\n  </UGCReviewSection>\n)\n","import React, { useState } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../styles/utils'\n\nimport UGCReviewThumbnail from './UGCReviewThumbnail'\nimport ReviewModal from './ReviewModal'\nimport Carousel from './common/Carousel'\n\nconst carouselSettings = {\n  slidesToShow: 1,\n  slidesToScroll: 1,\n  leftArrowStyle: { left: desktopVw(-30) },\n  rightArrowStyle: { right: desktopVw(-30) },\n}\n\nconst UGCDesktop = styled(Carousel)`\n  display: none;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    width: ${desktopVw(207)};\n\n    .review__thumbnail_img-wrapper {\n      width: ${desktopVw(207)};\n      height: ${desktopVw(207)};\n    }\n  }\n`\n\nconst StyledThumbnail = styled(UGCReviewThumbnail)`\n  margin: 0;\n`\n\nconst ReviewItemThumbnail = ({ className, reviewUserPhotos = '', review }) => {\n  const [modalOpen, setModalOpen] = useState('')\n  const [reviewPhotos, setReviewPhotos] = useState(reviewUserPhotos.split(','))\n\n  const onPrevClick = i => {\n    if (i > 0) {\n      setModalOpen(reviewPhotos[i - 1])\n    }\n  }\n\n  const onNextClick = i => {\n    if (i < reviewPhotos.length - 1) {\n      setModalOpen(reviewPhotos[i + 1])\n    }\n  }\n\n  return (\n    <UGCDesktop className={className} {...carouselSettings}>\n      {reviewPhotos.map((imageUrl, i) => {\n        return imageUrl ? (\n          <StyledThumbnail\n            imageUrl={imageUrl}\n            openModal={() => setModalOpen(imageUrl)}\n          >\n            <ReviewModal\n              open={modalOpen === imageUrl}\n              closeModal={() => setModalOpen(null)}\n              activeModal={i}\n              onPrevClick={() => onPrevClick(i)}\n              onNextClick={() => onNextClick(i)}\n              {...{\n                ...review,\n                reviewsLength: reviewPhotos.length,\n                reviewerPhotoUrl: imageUrl,\n              }}\n            />\n          </StyledThumbnail>\n        ) : null\n      })}\n    </UGCDesktop>\n  )\n}\n\nexport default ReviewItemThumbnail\n","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport Swiper from 'react-id-swiper'\nimport 'swiper/css/swiper.css'\n\nimport { desktopVw } from '../../styles/utils'\nimport Button from '../Button'\nimport ReviewThumbnail from '../ReviewThumbnail'\nimport ProductReview from '../ProductReview'\nimport TextButton from '../TextButton'\nimport ReviewModal from '../ReviewModal'\nimport ReviewFormModal from '../ReviewFormModal'\nimport OptionsOverallRating from '../OptionsOverallRating'\nimport { Select } from '../FormElements/Select'\nimport SpinningLoader from '../SpinningLoader'\nimport UGCReviewThumbnail from '../UGCReviewThumbnail'\nimport { UGCSection } from './UGCSection'\nimport ProductRating from '../ProductRating'\n\nimport Plus from '../../assets/review-plus.svg'\nimport ReviewItemThumbnail from '../ReviewItemThumbnail'\nimport Carousel from '../common/Carousel'\nimport { uniqueElementsBy } from '../../utils'\nimport useFetch from '../../hooks/useFetch'\nimport useMounted from '../../hooks/useMounted'\nimport { colors } from '../../styles/theme'\nimport { REVIEWS_FILTER } from '../../utils/constants'\n\nconst carouselSettings = {\n  slidesToShow: 4,\n  slidesToScroll: 4,\n  leftArrowStyle: { left: desktopVw(-45) },\n}\n\nconst StyledProductReviewSection = styled.section`\n  padding: var(--paddingMobile);\n  margin: var(--marginMobile);\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(1013)};\n    margin: var(--marginTopDesktop) auto 0;\n  }\n`\n\nconst ReviewContainer = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    background: #fff5f0;\n    padding: 0 ${desktopVw(206)} ${desktopVw(49)} ${desktopVw(216)};\n  }\n`\n\nconst ReviewWithPhotos = styled.div`\n  display: flex;\n  flex-direction: column-reverse;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    justify-content: var(--justifyContentDesktop, 'unset');\n  }\n`\n\nconst TitleContainer = styled.header`\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    align-items: center;\n  }\n`\n\nconst Title = styled.div`\n  font-family: ${props => props.theme.fonts.secondary};\n  text-transform: capitalize;\n  margin-bottom: 14px;\n  font-size: 45px;\n  line-height: 40px;\n  letter-spacing: -2px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(20)};\n    font-size: ${desktopVw(40)};\n    line-height: ${desktopVw(50)};\n    letter-spacing: -${desktopVw(2)};\n  }\n`\n\nconst NoReviewsTitle = styled(Title)`\n  text-align: center;\n`\n\nconst StarsText = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: var(--fontSizeDesktop, unset);\n  }\n`\n\nconst ReviewSummary = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  margin-top: 28px;\n  row-gap: 10px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    row-gap: 0;\n    text-align: var(--textAlignDesktop);\n    align-items: var(--alignItemsDesktop);\n    width: var(--widthDesktop);\n    margin-top: calc(${desktopVw(54)} + 40px);\n  }\n`\n\nconst StyledRating = styled(ProductRating)`\n  text-align: center;\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(15)};\n    svg {\n      width: ${desktopVw(20)};\n      height: ${desktopVw(20)};\n      margin-right: ${desktopVw(4)};\n    }\n  }\n`\n\nconst ReviewThumbnailListContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px 20px;\n  border-bottom: 1px solid ${props => props.theme.colors.greyLighter};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    position: relative;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: ${desktopVw(38)};\n    margin-bottom: ${desktopVw(20)};\n    padding: 0;\n    border: none;\n  }\n`\n\nconst StyledReviewItemThumbnail = styled(ReviewItemThumbnail)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(247)};\n    float: right;\n  }\n`\n\nconst WriteAReviewButton = styled(Button)`\n  font-size: 18px;\n  white-space: nowrap;\n  border: solid 1px ${props => props.theme.colors.primary};\n  padding: 22px 40px;\n  width: 100%;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    text-decoration: none;\n    width: ${desktopVw(162)};\n    padding: 0;\n    height: ${desktopVw(35)};\n    font-size: ${desktopVw(12)};\n    font-weight: 500;\n    text-transform: uppercase;\n  }\n`\n\nconst SelectWrapper = styled(Select)`\n  text-transform: uppercase;\n  white-space: nowrap;\n  display: flex;\n  margin-top: 29px;\n\n  select {\n    text-transform: uppercase;\n    border: none;\n    margin-right: 0px;\n  }\n\n  svg {\n    right: 0;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    text-decoration: none;\n    font-size: ${desktopVw(12)};\n    margin-top: unset;\n\n    select {\n      border: none;\n      margin-right: ${desktopVw(20)};\n    }\n\n    svg {\n      right: ${desktopVw(16)};\n    }\n  }\n\n  @media (max-width: ${props => props.theme.breakpoints.tablet}px) {\n    svg {\n      top: 25%;\n    }\n\n    select {\n      padding-top: 0px;\n      margin-top: -5px;\n    }\n  }\n`\n\nconst Reviews = styled.div``\n\nconst ReviewsList = styled.ul`\n  display: none;\n  border-top: 1px solid ${props => props.theme.colors.greyLighter};\n  border-bottom: 1px solid ${props => props.theme.colors.greyLighter};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst ReviewsFooter = styled.div`\n  display: none;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    justify-content: center;\n    padding: ${desktopVw(21)} 0 0;\n  }\n`\n\nconst ViewMoreBtn = styled(TextButton)`\n  text-transform: uppercase;\n  font-size: 12px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n  }\n`\n\nconst ViewMore = styled.span`\n  visibility: var(--visibility);\n`\n\nconst ReviewItem = styled.li`\n  border-bottom: var(--borderBottom);\n  visibility: var(--visibility);\n  height: var(--height);\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 ${desktopVw(30)};\n    padding-right: ${desktopVw(70)};\n  }\n`\n\nconst StyledReviewThumbnail = styled(ReviewThumbnail)`\n  position: absolute;\n  top: 12px;\n  right: 0;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 auto;\n  }\n`\n\nconst SwiperWrapper = styled.div`\n  .swiper-container {\n    height: 700px;\n    padding-bottom: 10px;\n  }\n\n  .swiper-pagination {\n    width: 100%;\n    padding-top: 30px;\n    bottom: 0;\n  }\n\n  .swiper-pagination-bullet {\n    width: 6px;\n    height: 6px;\n  }\n\n  .swiper-slide {\n    height: 330px;\n  }\n\n  .swiper-pagination-bullet-active {\n    background: ${props => props.theme.colors.primary};\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst ReviewButtonAndOverallRatingContainer = styled.div`\n  display: flex;\n  flex-direction: column-reverse;\n  align-items: center;\n  margin-top: 20px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: 0;\n    flex-direction: column;\n  }\n`\n\nconst UploadReviewThumbnail = styled.div`\n  display: none;\n  border: 0.5px solid #cec6c3;\n  cursor: pointer;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex !important;\n    width: ${desktopVw(167)} !important;\n    height: ${desktopVw(167)};\n    margin: 0 ${desktopVw(23)} 0 0;\n  }\n`\n\nconst StyledPlus = styled(Plus)`\n  display: block;\n  margin: auto;\n`\n\nconst UGCMobile = styled.div`\n  display: flex;\n  overflow-x: scroll;\n  padding: 0 29px;\n  -webkit-overflow-scrolling: touch;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst UGCDesktop = styled(Carousel)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst StyledMobileLoader = styled(SpinningLoader)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  margin-top: 50px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\nconst StyledDesktopLoader = styled(SpinningLoader)`\n  margin-top: ${desktopVw(50)};\n`\n\nconst params = {\n  slidesPerColumn: 2,\n  rebuildOnUpdate: true,\n  pagination: {\n    el: '.swiper-pagination',\n    type: 'bullets',\n  },\n  preloadImages: false,\n}\n\nconst selectOptions = {\n  [REVIEWS_FILTER.HIGHEST_RATING]: { sortBy: 'rating', sortOrder: 'desc' },\n  [REVIEWS_FILTER.WITH_PHOTOS]: { isWithPhotos: 'true' },\n  [REVIEWS_FILTER.LOWEST_RATING]: { sortBy: 'rating', sortOrder: 'asc' },\n  [REVIEWS_FILTER.LATEST]: { sortBy: 'dateCreated' },\n}\n\nconst ProductReviewSection = ({\n  reviews: r,\n  productId,\n  productName,\n  reviewForm,\n  setPage,\n  productTypeName,\n  summary,\n  loading,\n  productReviewsWithSummary,\n}) => {\n  const { fetchData, response } = useFetch()\n  const { mounted } = useMounted()\n\n  const reviewsWithPhotos = (response?.reviews ?? []).filter(\n    obj => !!obj.imagesFileName,\n  )\n\n  const data = uniqueElementsBy(r.reviews || [], (r1, r2) => r1.id === r2.id)\n\n  const page = r.page ? r.page : 1\n  const sortType = r.sortBy ? r.sortBy : 'Highest Rating'\n  const [pageCount, setPageCount] = useState(1)\n\n  const [reviews, setReviews] = useState(data)\n  const [reviewsCount, setReviewsCount] = useState(data.length)\n\n  const [sortOption, setSortOption] = useState(null)\n\n  const [showButton, setShowButton] = useState(true)\n\n  const [size, setSize] = useState(3)\n\n  const onReviewSort = e => {\n    const { value } = e.target\n    setSortOption(value)\n  }\n\n  useEffect(() => {\n    fetchData(\n      `${process.env.GATSBY_QUINCE_STORE_FRONT_API}/get-product-reviews?productId=${productId}&limit=50&isWithPhotos=true`,\n    )\n  }, [])\n\n  useEffect(() => {\n    if (!reviewsCount) return\n    if (size > reviewsCount && size < r.count) {\n      setPage(page + 1, selectOptions[sortOption], sortOption)\n    }\n  }, [size, reviewsCount])\n\n  useEffect(() => {\n    if (sortOption) {\n      setPage(1, selectOptions[sortOption], sortOption)\n      setReviews([])\n      setPageCount(1)\n      setSize(3)\n    }\n  }, [sortOption])\n\n  useEffect(() => {\n    setReviews([...data])\n  }, [sortType])\n\n  useEffect(() => {\n    if (size >= r.count) {\n      setShowButton(false)\n      return\n    }\n\n    if (pageCount < page) {\n      setReviewsCount(reviewsCount + data.length)\n      setReviews([...reviews, ...data])\n      setPageCount(pageCount + 1)\n    }\n  }, [page])\n\n  const { length } = reviewsWithPhotos\n\n  const [modalOpen, setModalOpen] = useState('')\n  const [reviewFormModalOpen, setReviewFormModalOpen] = useState(false)\n\n  const onPrevClick = i => {\n    if (i > 0) {\n      setModalOpen(reviewsWithPhotos[i - 1].id)\n    }\n  }\n\n  const onNextClick = i => {\n    if (i < length - 1) {\n      setModalOpen(reviewsWithPhotos[i + 1].id)\n    }\n  }\n\n  // const reviews = sortBy(reviews, sortOption)\n\n  const renderReviewWithPhotos = () => {\n    const reviewPhotos = (reviewsWithPhotos || []).map((review, i) => {\n      const { imagesFileName, id } = review\n      const reviewerPhotoUrl = imagesFileName && imagesFileName.split(',')[0]\n      return (\n        <UGCReviewThumbnail\n          imageUrl={reviewerPhotoUrl}\n          openModal={() => setModalOpen(id)}\n          key={`${review.id}${i}`}\n        >\n          <ReviewModal\n            open={modalOpen === id}\n            reviewsLength={length}\n            closeModal={() => setModalOpen(null)}\n            activeModal={i}\n            onPrevClick={() => onPrevClick(i)}\n            onNextClick={() => onNextClick(i)}\n            {...review}\n          />\n        </UGCReviewThumbnail>\n      )\n    })\n    const remaining = (reviewsWithPhotos || []).length % 4\n    const emptyPhotosThumbnail =\n      remaining > 0 &&\n      [...Array(4 - remaining).keys()].map(key => (\n        <UploadReviewThumbnail\n          key={key}\n          onClick={() => setReviewFormModalOpen(true)}\n          trackParams={{\n            trackGA: true,\n            trackInternal: true,\n            category: 'reviews',\n            action: 'click_write_review',\n            context: { product_id: productId },\n          }}\n        >\n          <StyledPlus />\n        </UploadReviewThumbnail>\n      ))\n    return (\n      <>\n        <UGCMobile>{reviewPhotos}</UGCMobile>\n        <UGCDesktop {...carouselSettings}>\n          {reviewPhotos}\n          {emptyPhotosThumbnail}\n        </UGCDesktop>\n      </>\n    )\n  }\n\n  const hasPhotos = reviewsWithPhotos && reviewsWithPhotos.length > 0\n\n  return r.count > 0 ? (\n    <>\n      <ReviewContainer>\n        <ReviewWithPhotos\n          style={{\n            '--justifyContentDesktop': hasPhotos ? 'unset' : 'center',\n          }}\n        >\n          <TitleContainer>\n            {summary && summary.count > 0 && (\n              <ReviewSummary\n                style={{\n                  '--textAlignDesktop': hasPhotos ? 'left' : 'center',\n                  '--alignItemsDesktop': hasPhotos ? 'flex-start' : 'center',\n                  '--widthDesktop': hasPhotos ? desktopVw(277) : '100%',\n                }}\n              >\n                <StyledRating rating={summary.averageRating} />\n                <Title>\n                  <StarsText\n                    style={{\n                      '--fontSizeDesktop': hasPhotos ? 'unset' : desktopVw(64),\n                    }}\n                  >\n                    {summary.averageRating.toFixed(1)}/5.0 Stars\n                  </StarsText>\n                  <div>\n                    {parseFloat(summary.count).toLocaleString()}{' '}\n                    {summary.count > 1 ? 'reviews' : 'review'}\n                  </div>\n                </Title>\n              </ReviewSummary>\n            )}\n          </TitleContainer>\n          {hasPhotos && (\n            <UGCSection renderReviewWithPhotos={renderReviewWithPhotos()} />\n          )}\n        </ReviewWithPhotos>\n        <OptionsOverallRating\n          reviews={productReviewsWithSummary.reviews}\n          productTypeName={productTypeName}\n        />\n      </ReviewContainer>\n      <StyledProductReviewSection\n        style={{\n          '--marginTopDesktop':\n            (reviewsWithPhotos || []).length === 0 ? desktopVw(75) : 0,\n        }}\n      >\n        <ReviewThumbnailListContainer>\n          {reviewForm && (\n            <WriteAReviewButton\n              onClick={() => setReviewFormModalOpen(true)}\n              trackParams={{\n                trackGA: true,\n                trackInternal: true,\n                category: 'reviews',\n                action: 'click_write_review',\n                context: { product_id: productId },\n              }}\n            >\n              Write a Review\n            </WriteAReviewButton>\n          )}\n\n          <SelectWrapper\n            options={Object.keys(selectOptions)}\n            onChange={onReviewSort}\n          />\n          <ReviewFormModal\n            open={reviewFormModalOpen}\n            reviewForm={reviewForm}\n            productTypeName={productTypeName}\n            closeModal={() => setReviewFormModalOpen(false)}\n            productId={productId}\n            productName={productName}\n          />\n        </ReviewThumbnailListContainer>\n        <Reviews>\n          <ReviewsList>\n            {reviews.map((review, i) => {\n              const { imagesFileName, id } = review\n              return (\n                <ReviewItem\n                  key={`${id}${i}`}\n                  style={{\n                    '--visibility': i >= size ? 'hidden' : 'visible',\n                    '--height': i >= size ? 0 : 'unset',\n                    '--borderBottom':\n                      i >= size ? 'unset' : `1px solid ${colors.greyLighter}`,\n                  }}\n                >\n                  <ProductReview {...review}>\n                    {imagesFileName && mounted && (\n                      <StyledReviewItemThumbnail\n                        review={review}\n                        reviewUserPhotos={imagesFileName}\n                        key={`${id}${i}`}\n                      />\n                    )}\n                  </ProductReview>\n                </ReviewItem>\n              )\n            })}\n          </ReviewsList>\n          {loading ? (\n            <StyledMobileLoader />\n          ) : (\n            <SwiperWrapper>\n              <Swiper {...params}>\n                {reviews.map((review, i) => (\n                  <ReviewItem as='div' key={`${review.id}${i}`}>\n                    <ProductReview {...review} shouldSwiperUpdate>\n                      {review.imagesFileName && mounted && (\n                        <StyledReviewThumbnail\n                          reviewUserPhotos={review.imagesFileName}\n                          openModal={() => setModalOpen(review.id)}\n                        />\n                      )}\n                    </ProductReview>\n                  </ReviewItem>\n                ))}\n              </Swiper>\n            </SwiperWrapper>\n          )}\n          <ReviewsFooter>\n            {showButton && size < r.count && (\n              <ViewMoreBtn onClick={() => setSize(size + 3)}>\n                {loading && <StyledDesktopLoader />}\n                <ViewMore\n                  style={{ '--visibility': loading ? 'hidden' : 'visible' }}\n                >\n                  View more\n                </ViewMore>\n              </ViewMoreBtn>\n            )}\n          </ReviewsFooter>\n        </Reviews>\n      </StyledProductReviewSection>\n    </>\n  ) : (\n    /** Case when there are no reviews */\n    <StyledProductReviewSection\n      style={{\n        '--paddingMobile': '0 20px',\n        '--marginTopDesktop':\n          (reviewsWithPhotos || []).length === 0 ? desktopVw(75) : 0,\n        '--marginMobile': (reviewsWithPhotos || []).length === 0 ? '40px 0' : 0,\n      }}\n    >\n      <TitleContainer>\n        <NoReviewsTitle>Be the first to review</NoReviewsTitle>\n        <ReviewButtonAndOverallRatingContainer>\n          {reviewForm && (\n            <WriteAReviewButton\n              onClick={() => setReviewFormModalOpen(true)}\n              trackParams={{\n                trackGA: true,\n                trackInternal: true,\n                category: 'reviews',\n                action: 'click_write_review',\n                context: { product_id: productId },\n              }}\n            >\n              Write a Review\n            </WriteAReviewButton>\n          )}\n        </ReviewButtonAndOverallRatingContainer>\n      </TitleContainer>\n      {reviewForm && (\n        <ReviewFormModal\n          open={reviewFormModalOpen}\n          reviewForm={reviewForm}\n          productTypeName={productTypeName}\n          closeModal={() => setReviewFormModalOpen(false)}\n          productId={productId}\n          productName={productName}\n        />\n      )}\n    </StyledProductReviewSection>\n  )\n}\n\nconst MemoizedProductReviewSection = React.memo(\n  props => <ProductReviewSection {...props} />,\n  (prevProps, nextProps) => {\n    return !(\n      prevProps.reviews?.reviews !== nextProps.reviews?.reviews ||\n      prevProps.loading !== nextProps.loading\n    )\n  },\n)\n\nexport default MemoizedProductReviewSection\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport ProductCarousel from '../ProductCarousel'\n\nconst StyledProductOverview = styled.section`\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    margin-bottom: ${desktopVw(70)};\n  }\n`\n\nconst CarouselContainer = styled.div`\n  position: relative;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex: 1;\n    flex-shrink: 0;\n    min-width: ${desktopVw(760)};\n  }\n`\n\nconst ProductOverview = ({\n  children,\n  carouselImages,\n  productId,\n  imageNamePrefix,\n  imageToColorMap,\n  selectedColor,\n}) => {\n  return (\n    <StyledProductOverview>\n      <CarouselContainer>\n        <ProductCarousel\n          images={carouselImages}\n          productId={productId}\n          imageNamePrefix={imageNamePrefix}\n          imageToColorMap={imageToColorMap}\n          selectedColor={selectedColor}\n        >\n          {children}\n        </ProductCarousel>\n      </CarouselContainer>\n    </StyledProductOverview>\n  )\n}\n\nexport default React.memo(\n  props => <ProductOverview {...props} />,\n  (prevProps, nextProps) => {\n    return !(\n      prevProps.carouselImages !== nextProps.carouselImages ||\n      prevProps.children !== nextProps.children\n    )\n  },\n)\n","import React, { useContext, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport Swiper from 'react-id-swiper'\nimport 'swiper/css/swiper.css'\n\nimport theme from '../styles/theme'\n\nimport ScaledImage from './ScaledImage'\nimport { desktopVw, mobileVw } from '../styles/utils'\nimport ScaledVideo from './Video'\nimport EventType from '../trackers/eventType'\nimport eventTracker from '../trackers/EventTracker'\nimport useMounted from '../hooks/useMounted'\nimport { ProductContext } from '../contexts'\nimport {\n  getEagerLoadCarouselClassName,\n  getFirstNProductColorImages,\n} from '../utils'\n\nconst params = {\n  pagination: {\n    el: '.swiper-pagination',\n    type: 'bullets',\n  },\n  rebuildOnUpdate: true,\n  preloadImages: false,\n}\n\nconst SidePanel = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 ${desktopVw(80)} 0 ${desktopVw(37)};\n    width: ${desktopVw(491)};\n  }\n`\n\nconst SidePanelMobile = styled.div`\n  display: block;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst ProductCarouselMobile = ({\n  images,\n  productId,\n  children,\n  imageNamePrefix,\n  imageToColorMap,\n  selectedColor,\n}) => {\n  const { productImages } = useContext(ProductContext)\n\n  const { mounted } = useMounted()\n\n  const [carouselImages, setCarouselImages] = useState(\n    getFirstNProductColorImages(productImages, 1),\n  )\n\n  useEffect(() => {\n    setCarouselImages(images)\n  }, [images])\n\n  return (\n    <StyledProductCarousel>\n      <SwiperWrapper>\n        <Swiper {...params}>\n          {carouselImages.map((image, index) => (\n            <Slide\n              key={image.id}\n              display={mounted ? 'block' : 'none'}\n              className={\n                !mounted\n                  ? getEagerLoadCarouselClassName(image, image?.bucket)\n                  : ''\n              }\n            >\n              {image.video ? (\n                <ScaledVideo\n                  url={image.video.file.url}\n                  poster={image.fluid.src}\n                  contentType={image.video.file.contentType}\n                  lazyLoad\n                  onVisible={() => {\n                    const eventType = EventType.VIDEO_LOAD\n                    eventTracker.track(eventType, {\n                      productId,\n                      color: selectedColor,\n                    })\n                  }}\n                />\n              ) : (\n                <ScaledImage\n                  backgroundColor={theme.colors.greyLighter}\n                  fluid={image.fluid}\n                  style={{\n                    position: 'absolute',\n                    left: '0',\n                    right: '0',\n                    bottom: '0',\n                    top: '0',\n                    zIndex: '-1',\n                  }}\n                  alt={\n                    image.description ||\n                    (imageNamePrefix\n                      ? `${imageNamePrefix} - ${imageToColorMap[image.id] &&\n                          imageToColorMap[image.id].name} - ${index}`\n                      : image.title)\n                  }\n                  loading='eager'\n                />\n              )}\n            </Slide>\n          ))}\n        </Swiper>\n      </SwiperWrapper>\n      <SidePanelMobile>\n        <SidePanel>{children}</SidePanel>\n      </SidePanelMobile>\n    </StyledProductCarousel>\n  )\n}\n\nconst StyledProductCarousel = styled.section`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    justify-content: center;\n  }\n`\n\nconst SwiperWrapper = styled.div`\n  margin: 60px 25px 10px 25px;\n  height: ${mobileVw(413)};\n\n  .swiper-pagination {\n    position: absolute;\n    bottom: 20px;\n  }\n\n  .swiper-pagination-bullet {\n    width: 6px;\n    height: 6px;\n    border: 1px solid ${props => props.theme.colors.primary};\n    background: none;\n    opacity: 1;\n  }\n\n  .swiper-pagination-bullet-active {\n    background: ${props => props.theme.colors.primary};\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst Slide = styled.div`\n  position: relative !important;\n  height: ${mobileVw(413)} !important;\n  display: ${props => props.display};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(600)};\n    height: ${desktopVw(829)};\n    transform-origin: center;\n    transition: transform 0 linear;\n  }\n`\n\nexport default ProductCarouselMobile\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport ProductCarouselMobile from '../ProductCarouselMobile'\n\nconst StyledProductOverview = styled.section`\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    margin-bottom: ${desktopVw(70)};\n  }\n`\n\nconst CarouselContainer = styled.div`\n  position: relative;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex: 1;\n    flex-shrink: 0;\n    min-width: ${desktopVw(760)};\n  }\n`\n\nconst ProductOverviewMobile = ({\n  children,\n  carouselImages,\n  productId,\n  imageNamePrefix,\n  imageToColorMap,\n  selectedColor,\n}) => {\n  return (\n    <StyledProductOverview>\n      <CarouselContainer>\n        <ProductCarouselMobile\n          images={carouselImages}\n          productId={productId}\n          imageNamePrefix={imageNamePrefix}\n          imageToColorMap={imageToColorMap}\n          selectedColor={selectedColor}\n        >\n          {children}\n        </ProductCarouselMobile>\n      </CarouselContainer>\n    </StyledProductOverview>\n  )\n}\n\nexport default React.memo(\n  props => <ProductOverviewMobile {...props} />,\n  (prevProps, nextProps) => {\n    return !(\n      prevProps.carouselImages !== nextProps.carouselImages ||\n      prevProps.children !== nextProps.children\n    )\n  },\n)\n","// TODO: refactor this file\n\nimport React from 'react'\nimport styled from 'styled-components'\nimport LogoIcon from '../../../assets/logo.svg'\n\nimport { desktopVw, mobileVw } from '../../../styles/utils'\nimport { withErrorBoundary } from '../../ErrorBoundary/ErrorBoundary'\nimport ScaledImage from '../../ScaledImage'\nimport { getStyledPrice } from '../../../utils'\n\nconst StyledTransparentPricing = styled.section`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n  }\n`\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 40px;\n  margin-bottom: 37px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 0 ${desktopVw(119)};\n    flex-direction: row;\n    height: ${desktopVw(746)};\n    align-items: flex-end;\n  }\n`\n\nconst Title = styled.h3`\n  margin: 23px auto auto;\n  font-family: ${props => props.theme.fonts.heading};\n  font-size: 25px;\n  line-height: 40px;\n  text-align: center;\n  text-transform: capitalize;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    text-transform: uppercase;\n    margin: 0 auto ${desktopVw(62)};\n    font-size: ${desktopVw(30)};\n    line-height: ${desktopVw(37.74)};\n  }\n`\n\nconst TitleMobile = styled(Title)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst TitleDesktop = styled(Title)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst Wrapper = styled.div`\n  height: ${mobileVw(571)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(970)};\n    height: inherit;\n    display: flex;\n    align-items: flex-end;\n  }\n`\n\nconst Costing = styled.div`\n  max-width: 500px;\n  margin: 0 29px 38px;\n  padding: 36px 11px 26px;\n  background: rgba(255, 255, 255, 0.5);\n  text-align: left;\n  z-index: 2;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    box-sizing: border-box;\n    max-width: initial;\n    width: ${desktopVw(360)};\n    margin: 0 0 ${desktopVw(35)} ${desktopVw(80)};\n    padding: ${desktopVw(44)} ${desktopVw(16)} ${desktopVw(30)} ${desktopVw(14)};\n  }\n`\n\nconst Subtitle = styled.div`\n  font-family: ${props => props.theme.fonts.primary};\n  font-size: 20px;\n  line-height: 25px;\n  font-weight: normal;\n  margin: 0 0 41px;\n  padding: 0 20px;\n\n  span {\n    display: block;\n    font-weight: 500;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(20)};\n    line-height: ${desktopVw(25)};\n    margin: 0 0 ${desktopVw(31)};\n    padding: 0 ${desktopVw(23)};\n  }\n`\n\nconst CostList = styled.ul`\n  padding: 0 21px 0 24px;\n  margin: 0 0 33px;\n\n  img {\n    position: relative;\n    display: block;\n    margin: 0 auto;\n    max-width: 28px;\n    max-height: 23px;\n\n    &.crafting-cost {\n      top: -5px;\n      width: 26px;\n      height: 23px;\n    }\n\n    &.materials {\n      width: 28px;\n      height: 16px;\n    }\n\n    &.packaging {\n      width: 22px;\n      height: 22px;\n    }\n\n    &.shipping---handling {\n      top: -2px;\n      width: 19px;\n      height: 20px;\n    }\n\n    &.credit-card-fees {\n      width: 18px;\n      height: 19px;\n    }\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 ${desktopVw(22)} 0 ${desktopVw(23)};\n    margin: 0 0 ${desktopVw(36)};\n\n    img {\n      max-width: ${desktopVw(28)};\n      max-height: ${desktopVw(22)};\n\n      &.crafting-cost {\n        top: ${desktopVw(-2)};\n        width: ${desktopVw(21)};\n        height: ${desktopVw(21)};\n      }\n\n      &.materials {\n        top: ${desktopVw(3)};\n        width: ${desktopVw(28)};\n        height: ${desktopVw(16)};\n      }\n\n      &.packaging {\n        top: ${desktopVw(2)};\n        width: ${desktopVw(22)};\n        height: ${desktopVw(22)};\n      }\n\n      &.shipping---handling {\n        top: ${desktopVw(2)};\n        width: ${desktopVw(19)};\n        height: ${desktopVw(20)};\n      }\n\n      &.credit-card-fees {\n        top: ${desktopVw(-3)};\n        width: ${desktopVw(18)};\n        height: ${desktopVw(19)};\n      }\n    }\n  }\n`\n\nconst ListItem = styled.li`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 0 0 19px;\n\n  &:last-child {\n    margin: 0;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 0 ${desktopVw(18)};\n\n    &:last-child {\n      margin: 0;\n    }\n  }\n`\n\nconst IconWrapper = styled.span`\n  display: block;\n  width: 31px;\n  height: 20px;\n  margin: 0 11px 0 0;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(31)};\n    height: ${desktopVw(20)};\n    margin: 0 ${desktopVw(12)} 0 0;\n  }\n`\n\nconst ItemTitle = styled.p`\n  font-size: 11px !important;\n  line-height: 20px !important;\n  text-transform: uppercase !important;\n  font-family: ${props => props.theme.fonts.primary} !important;\n  font-weight: normal !important;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(11)} !important;\n    line-height: ${desktopVw(20)} !important;\n  }\n`\n\nconst ItemPrice = styled.p`\n  margin: 0 0 0 auto !important;\n  font-size: 12px !important;\n  line-height: 18px !important;\n  font-family: ${props => props.theme.fonts.heading} !important;\n  font-weight: 500 !important;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)} !important;\n    line-height: ${desktopVw(18)} !important;\n    letter-spacing: 0.01em !important;\n  }\n`\n\nconst TotalCost = styled.div`\n  box-sizing: border-box;\n  padding: 0 18px 0 21px;\n  height: 43px;\n  width: 100%;\n  background-color: #000;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border-radius: 34px;\n\n  p {\n    font-size: 11px !important;\n    line-height: 1 !important;\n    color: #fff !important;\n    text-transform: uppercase !important;\n    font-family: ${props => props.theme.fonts.primary} !important;\n    font-weight: normal !important;\n  }\n\n  span {\n    margin: 0 0 0 auto;\n    color: #fff;\n    font-size: 12px;\n    line-height: 1;\n    font-family: ${props => props.theme.fonts.heading};\n    font-weight: 500;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 ${desktopVw(25.5)} 0 ${desktopVw(27)};\n    height: ${desktopVw(43)};\n    border-radius: ${desktopVw(34)};\n\n    p {\n      font-size: ${desktopVw(12)} !important;\n    }\n\n    span {\n      font-size: ${desktopVw(12)};\n    }\n  }\n`\n\nconst RelativePricingWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  justify-content: space-between;\n  box-sizing: border-box;\n  align-items: center;\n  padding-top: 34px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(67)} 0 ${desktopVw(40)};\n  }\n`\n\nconst RelativePricing = styled.div`\n  max-width: 320px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: flex-end;\n  .relative__pricing__quince_price_column {\n    margin-right: 40px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    .relative__pricing__quince_price_column {\n      margin-right: ${desktopVw(40)};\n    }\n    position: relative;\n    top: ${desktopVw(9)};\n    max-width: initial;\n    margin: 0;\n  }\n`\n\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-width: 125px;\n  flex: 125px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    max-width: ${desktopVw(120)};\n    flex: ${desktopVw(120)};\n  }\n`\n\nconst ColumnPrice = styled.div`\n  position: relative;\n  margin: auto auto 0;\n  font-family: ${props => props.theme.fonts.secondary};\n  font-size: 35px;\n  line-height: 1;\n\n  span {\n    position: absolute;\n    font-size: 12px;\n    font-family: ${props => props.theme.fonts.primary};\n    font-weight: normal;\n    top: 0;\n    left: -9px;\n  }\n\n  sup {\n    font-size: 18px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(35)};\n\n    span {\n      font-size: ${desktopVw(12)};\n      top: ${desktopVw(3)};\n      left: ${desktopVw(-9)};\n    }\n\n    sup {\n      font-size: ${desktopVw(18)};\n    }\n  }\n`\n\nconst ColumnVariable = styled.div`\n  background-color: ${props => props.theme.colors.greyLighter};\n  width: 100%;\n  margin: 0 0 5px;\n  height: var(--heightMobile);\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: var(--heightDesktop);\n    margin: 0 0 ${desktopVw(5)};\n  }\n`\n\nconst ColumnBase = styled.div`\n  padding: 37px 19px 32px 14px;\n  margin: 0 0 9px;\n  max-height: var(--maxHeightMobile);\n  font-family: ${props => props.theme.fonts.primary};\n  font-weight: normal;\n  font-size: 11px;\n  line-height: 30px;\n  background-color: #000;\n  color: #fff;\n  text-transform: uppercase;\n  text-align: center;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(37)} ${desktopVw(14)} ${desktopVw(32)};\n    margin: 0 0 ${desktopVw(9)};\n    max-height: var(--maxHeightDesktop);\n    font-size: ${desktopVw(11)};\n    line-height: ${desktopVw(30)};\n  }\n`\n\nconst ColumnTitle = styled.div`\n  height: 30px;\n  font-family: ${props => props.theme.fonts.primary};\n  font-size: 10px;\n  line-height: 16px;\n  font-weight: normal;\n  text-align: center;\n  text-transform: uppercase;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(30)};\n    font-size: ${desktopVw(12)};\n    line-height: ${desktopVw(15)};\n  }\n`\n\nconst Logo = styled(LogoIcon)`\n  margin: 0 auto;\n  height: 15px;\n  width: 48px;\n  fill: #000;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(19)};\n    width: ${desktopVw(60)};\n  }\n`\n\nconst ImageWrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  width: inherit;\n  height: inherit;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row-reverse;\n    align-items: flex-end;\n  }\n`\n\nconst ImageDesktop = styled(ScaledImage)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst ImageMobile = styled(ScaledImage)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst TransparentPricingSection = ({\n  title,\n  pricing,\n  pricingListJson,\n  pricingTitle,\n  quincePrice,\n  traditionalRetailPrice,\n  selectedVariantId,\n  transparentPricingIcons,\n  showTitle = true,\n  className,\n  imageDesktop,\n  imageMobile,\n}) => {\n  const customSortOrder = [\n    'Materials',\n    'Crafting Cost',\n    'Packaging',\n    'Freight & Handling',\n    'Credit Card Fees',\n  ]\n\n  const applicableCostingParts = {\n    crafting: 'Crafting Cost',\n    materials: 'Materials',\n    packaging: 'Packaging',\n    creditCardFees: 'Credit Card Fees',\n    shippingHandling: 'Freight & Handling',\n  }\n\n  let pricingJson = null\n  if (pricingListJson) {\n    for (let i = 0; i < pricingListJson.length; i++) {\n      if (\n        pricingListJson[i] &&\n        pricingListJson[i].shopifyId === parseInt(selectedVariantId)\n      ) {\n        const parts = Object.keys(pricingListJson[i])\n        pricingJson = []\n        for (let j = 0; j < parts.length; j++) {\n          if (Object.keys(applicableCostingParts).indexOf(parts[j]) > -1) {\n            pricingJson.push({\n              name: parts[j],\n              price: pricingListJson[i][parts[j]],\n            })\n          }\n        }\n        break\n      }\n    }\n  }\n\n  const totalCost = pricingJson\n    ? pricingJson.reduce((acc, val) => acc + val.price, 0)\n    : pricing\n    ? pricing.reduce((acc, val) => acc + val.price, 0)\n    : 0\n\n  const computeHeight = (height, price, cost) => {\n    return (height * price) / cost\n  }\n\n  let baseHeight = 100\n  const subtitleWords = pricingTitle && pricingTitle.split(' ')\n  const newQuincePrice =\n    quincePrice && quincePrice > 0 ? quincePrice - totalCost : null\n  const newTraditionalRetailPrice =\n    traditionalRetailPrice && traditionalRetailPrice > 0\n      ? traditionalRetailPrice - totalCost\n      : null\n  let quinceHeight = newQuincePrice\n    ? computeHeight(baseHeight, newQuincePrice, totalCost)\n    : null\n  let trpHeight =\n    newTraditionalRetailPrice != null\n      ? computeHeight(baseHeight, newTraditionalRetailPrice, totalCost)\n      : null\n\n  // Re-adjust scales, if the ratio of prices is too high\n  if (\n    quincePrice &&\n    traditionalRetailPrice &&\n    quincePrice > 0 &&\n    traditionalRetailPrice > 0\n  ) {\n    if (traditionalRetailPrice / quincePrice > 4) {\n      baseHeight = 40\n      quinceHeight = computeHeight(baseHeight, newQuincePrice, totalCost)\n      trpHeight = computeHeight(\n        baseHeight,\n        newTraditionalRetailPrice,\n        totalCost,\n      )\n    }\n  }\n\n  // Sort them in a specific order\n  const pricingWithCustomOrder = []\n  if (pricingJson) {\n    for (let i = 0; i < customSortOrder.length; i++) {\n      for (let j = 0; j < pricingJson.length; j++) {\n        const pricingKey = pricingJson[j].name\n        if (applicableCostingParts[pricingKey] === customSortOrder[i]) {\n          const isIconPresent =\n            transparentPricingIcons.filter(\n              item => item.description === pricingKey,\n            ).length > 0\n          pricingWithCustomOrder.push({\n            name: applicableCostingParts[pricingKey],\n            price: pricingJson[j].price,\n            icon: isIconPresent\n              ? transparentPricingIcons.filter(\n                  item => item.description === pricingKey,\n                )[0]\n              : null,\n          })\n          break\n        }\n      }\n    }\n  } else if (pricing) {\n    for (let i = 0; i < customSortOrder.length; i++) {\n      for (let j = 0; j < pricing.length; j++) {\n        const pricingKey = pricing[j].name\n        if (pricingKey === customSortOrder[i]) {\n          pricingWithCustomOrder.push(pricing[j])\n          break\n        }\n      }\n    }\n  }\n\n  return (\n    <StyledTransparentPricing className={className}>\n      <Container className='transparent__pricing-container'>\n        <Wrapper>\n          <ImageWrapper>\n            <ImageDesktop\n              fluid={(imageDesktop || imageMobile).fluid}\n              style={{\n                position: 'absolute',\n                left: '0',\n                right: '0',\n                bottom: '0',\n                top: '0',\n                zIndex: '-1',\n              }}\n            />\n            <ImageMobile\n              fluid={(imageMobile || imageDesktop).fluid}\n              style={{\n                position: 'absolute',\n                left: '0',\n                right: '0',\n                bottom: '0',\n                top: '0',\n                zIndex: '-1',\n              }}\n            />\n            <TitleMobile>Transparent Pricing</TitleMobile>\n            <Costing className='transparent__pricing-costing'>\n              <Subtitle>\n                {pricingTitle &&\n                  subtitleWords.map((word, index) => {\n                    if (index === 0) {\n                      return <span key={`${word}${index}`}>{word}</span>\n                    }\n                    return (\n                      <React.Fragment key={`${word}${index}`}>\n                        {word}\n                      </React.Fragment>\n                    )\n                  })}\n              </Subtitle>\n              <CostList>\n                {pricingWithCustomOrder.map((item, index) => {\n                  const itemPrice = item.price.toFixed(2)\n                  return (\n                    <ListItem key={item.id + index}>\n                      {item.icon && (\n                        <IconWrapper>\n                          <img\n                            className={item.name\n                              .split('&')\n                              .join('-')\n                              .split(' ')\n                              .join('-')\n                              .toLowerCase()}\n                            src={item.icon.file.url}\n                            alt={item.name}\n                          />\n                        </IconWrapper>\n                      )}\n                      <ItemTitle>{item.name}</ItemTitle>\n                      <ItemPrice>${itemPrice}</ItemPrice>\n                    </ListItem>\n                  )\n                })}\n              </CostList>\n              <TotalCost>\n                <p>Total cost</p>\n                <span>${totalCost.toFixed(2).toString()}</span>\n              </TotalCost>\n            </Costing>\n          </ImageWrapper>\n        </Wrapper>\n        {quincePrice && (\n          <RelativePricingWrapper>\n            {showTitle && (\n              <TitleDesktop>\n                Transparent\n                <br />\n                Pricing\n              </TitleDesktop>\n            )}\n            <RelativePricing>\n              <Column className='relative__pricing__quince_price_column'>\n                <ColumnPrice>\n                  <span>$</span>\n                  <div\n                    dangerouslySetInnerHTML={{\n                      __html: getStyledPrice(quincePrice),\n                    }}\n                  />\n                </ColumnPrice>\n                <ColumnVariable\n                  style={{\n                    '--heightMobile': `${quinceHeight}px`,\n                    '--heightDesktop': desktopVw(quinceHeight),\n                  }}\n                />\n                <ColumnBase\n                  style={{\n                    '--maxHeightMobile': `${baseHeight}px`,\n                    '--maxHeightDesktop': desktopVw(baseHeight),\n                  }}\n                >\n                  Total cost\n                </ColumnBase>\n                <ColumnTitle>\n                  <Logo />\n                </ColumnTitle>\n              </Column>\n              {traditionalRetailPrice && traditionalRetailPrice > 0 ? (\n                <Column relative__pricing__traditional_price_column>\n                  <ColumnPrice>\n                    <span>$</span>\n                    <div\n                      dangerouslySetInnerHTML={{\n                        __html: getStyledPrice(traditionalRetailPrice),\n                      }}\n                    />\n                  </ColumnPrice>\n                  <ColumnVariable\n                    style={{\n                      '--heightMobile': `${trpHeight}px`,\n                      '--heightDesktop': desktopVw(trpHeight),\n                    }}\n                  />\n                  <ColumnBase\n                    style={{\n                      '--maxHeightMobile': `${baseHeight}px`,\n                      '--maxHeightDesktop': desktopVw(baseHeight),\n                    }}\n                  >\n                    Total cost\n                  </ColumnBase>\n                  <ColumnTitle>Traditional retail</ColumnTitle>\n                </Column>\n              ) : null}\n            </RelativePricing>\n          </RelativePricingWrapper>\n        )}\n      </Container>\n    </StyledTransparentPricing>\n  )\n}\n\nexport default withErrorBoundary(TransparentPricingSection, {\n  fallbackRender: () => <div />,\n})\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { SVGWithText } from '../../SVGWithText'\nimport ScaledImage from '../../ScaledImage'\nimport { desktopVw, mobileVw } from '../../../styles/utils'\nimport Video from '../../Video'\n\nconst ImageDesktop = styled(ScaledImage)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    width: ${desktopVw(548)};\n    height: ${desktopVw(587)};\n  }\n`\n\nconst ImageMobile = styled(ScaledImage)`\n  margin-bottom: 30px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst Wrapper = styled.div`\n  padding: 35px 15px;\n  display: flex;\n  flex-direction: column;\n  min-height: ${mobileVw(918)};\n  .svg__with__text_title_mobile {\n    margin-top: 5px;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 0 ${desktopVw(117)};\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    min-height: ${desktopVw(587)};\n  }\n`\n\nconst FirstSection = styled.div`\n  margin-bottom: 30px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 ${desktopVw(82)} 0 0;\n  }\n`\n\nconst SecondSection = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 0 0 ${desktopVw(82)};\n  }\n`\n\nconst StyledSVG = styled(SVGWithText)`\n  margin-bottom: 30px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(70)};\n  }\n`\nconst DesktopVideoContainer = styled(Video)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    width: ${desktopVw(548)};\n    height: ${desktopVw(587)};\n  }\n`\nconst VideoMobile = styled(Video)`\n  margin-bottom: 30px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nexport const ImageWithBadgesSection = ({\n  imageDesktop,\n  imageMobile,\n  svgList: [first, second, third, fourth],\n  video,\n}) => {\n  return (\n    <Wrapper>\n      {video ? (\n        <VideoMobile\n          key={video.file.url}\n          url={video.file.url}\n          poster={imageDesktop.fluid.src}\n          contentType={video.file.contentType}\n          rootTopMargin={\n            typeof window !== 'undefined' ? `${window.innerHeight}px` : '800px'\n          }\n        />\n      ) : (\n        <ImageMobile fluid={imageMobile.fluid || imageDesktop.fluid} />\n      )}\n      <FirstSection>\n        {first && <StyledSVG {...first} />}\n        {second && <SVGWithText {...second} />}\n      </FirstSection>\n      {video ? (\n        <DesktopVideoContainer\n          key={video.file.url}\n          url={video.file.url}\n          poster={imageDesktop.fluid.src}\n          contentType={video.file.contentType}\n          rootTopMargin={\n            typeof window !== 'undefined' ? `${window.innerHeight}px` : '800px'\n          }\n        />\n      ) : (\n        <ImageDesktop fluid={imageDesktop.fluid || imageMobile.fluid} />\n      )}\n      <SecondSection>\n        {third && <StyledSVG {...third} />}\n        {fourth && <SVGWithText {...fourth} />}\n      </SecondSection>\n    </Wrapper>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport ScaledImage from '../../ScaledImage'\nimport { desktopVw, mobileVw } from '../../../styles/utils'\n\nconst Wrapper = styled.div`\n  padding: 35px 0;\n  display: flex;\n  flex-direction: column;\n  row-gap: 30px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0;\n    justify-content: center;\n    align-items: center;\n    row-gap: 0;\n    column-gap: ${desktopVw(82)};\n  }\n`\n\nconst ImageDesktop = styled(ScaledImage)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    margin-bottom: ${desktopVw(86)};\n  }\n`\n\nconst ImageMobile = styled(ScaledImage)`\n  height: ${mobileVw(535)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nexport const HeroSection = ({ imageDesktop, imageMobile }) => {\n  return (\n    <Wrapper>\n      <ImageMobile fluid={imageMobile.fluid || imageDesktop.fluid} />\n      <ImageDesktop fluid={imageDesktop.fluid || imageMobile.fluid} />\n    </Wrapper>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { SVGWithText } from '../../SVGWithText'\nimport { desktopVw } from '../../../styles/utils'\n\nconst Wrapper = styled.div`\n  padding: 0 0 35px;\n  display: flex;\n  flex-direction: column;\n  row-gap: 30px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 0 ${desktopVw(117)};\n    justify-content: center;\n    align-items: center;\n    row-gap: 0;\n    column-gap: ${desktopVw(82)};\n  }\n`\n\nconst SVGWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 0 31px;\n  img {\n    width: 58px;\n    height: 71px;\n  }\n  .svg__with__text_title_mobile {\n    display: none;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: 100%;\n    justify-content: space-evenly;\n    padding: 0;\n    img {\n      width: ${desktopVw(105)};\n      height: ${desktopVw(148)};\n    }\n  }\n`\n\nexport const BadgesSection = ({ svgList }) => {\n  return (\n    <Wrapper>\n      <SVGWrapper>\n        {svgList.map(svgObj => (\n          <SVGWithText key={svgObj.id} {...svgObj} />\n        ))}\n      </SVGWrapper>\n    </Wrapper>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { documentToReactComponents } from '@contentful/rich-text-react-renderer'\nimport ScaledImage from '../../ScaledImage'\nimport { desktopVw, mobileVw } from '../../../styles/utils'\nimport Carousel from '../../common/Carousel'\n\nconst settings = {\n  slidesToShow: 1,\n  slidesToScroll: 1,\n  showArrows: false,\n  showDots: true,\n}\n\nconst ImageDesktop = styled(ScaledImage)`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    width: ${desktopVw(432)};\n    height: ${desktopVw(411)};\n  }\n`\n\nconst ImageMobile = styled(ScaledImage)`\n  margin-bottom: 13px;\n  height: ${mobileVw(320)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst Wrapper = styled.div`\n  display: flex !important;\n  flex-direction: column-reverse;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    margin: 0;\n  }\n`\n\nconst StyledCarousel = styled(Carousel)`\n  padding: 40px 16px;\n  .slick-dots {\n    bottom: -40px;\n  }\n  min-height: ${mobileVw(472)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(119)} ${desktopVw(210)} 0;\n    min-height: ${desktopVw(411)};\n    .slick-dots {\n      width: unset;\n      margin-left: -10px;\n      bottom: ${desktopVw(35)};\n      button::before {\n        font-size: ${desktopVw(13)};\n      }\n    }\n  }\n`\n\nconst DescriptionDesktop = styled.div`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    h1 {\n      font-size: ${desktopVw(30)};\n      line-height: ${desktopVw(37.74)};\n      margin-bottom: ${desktopVw(40)};\n    }\n    p {\n      font-size: ${desktopVw(15)};\n      line-height: ${desktopVw(20)};\n    }\n    max-width: ${desktopVw(419)};\n  }\n`\n\nconst DescriptionMobile = styled.div`\n  h1 {\n    font-size: 25px;\n    line-height: 35px;\n    margin-bottom: 5px;\n    font-family: ${props => props.theme.fonts.primary};\n  }\n  p {\n    font-size: 12px;\n    line-height: 20px;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nexport const ImageWithTextCarouselSection = ({ imageWithTextList }) => {\n  return (\n    <StyledCarousel {...settings}>\n      {imageWithTextList.map(valueObj => (\n        <Wrapper>\n          <DescriptionDesktop>\n            {documentToReactComponents(\n              (valueObj.text || valueObj.textMobile).json,\n            )}\n          </DescriptionDesktop>\n          <DescriptionMobile>\n            {documentToReactComponents(\n              (valueObj.textMobile || valueObj.text).json,\n            )}\n          </DescriptionMobile>\n          <ImageDesktop\n            fluid={(valueObj.imageDesktop || valueObj.image).fluid}\n          />\n          <ImageMobile\n            fluid={(valueObj.image || valueObj.imageDesktop).fluid}\n          />\n        </Wrapper>\n      ))}\n    </StyledCarousel>\n  )\n}\n","import React from 'react'\nimport { ImageWithBadgesSection } from './ImageWithBadgesSection'\nimport { HeroSection } from './HeroSection'\nimport { BadgesSection } from './BadgesSection'\nimport { SocialPhotosSection } from './SocialPhotos'\nimport { ImageWithTextCarouselSection } from './ImageWithTextCarouselSection'\n\nconst SectionToComponentMapping = {\n  'Image With Badges': ImageWithBadgesSection,\n  Hero: HeroSection,\n  Badges: BadgesSection,\n  'Social Photos': SocialPhotosSection,\n  'Image With Text Carousel': ImageWithTextCarouselSection,\n}\n\nexport function SectionRender({ productPageSections, sectionName }) {\n  const sectionData =\n    productPageSections &&\n    productPageSections.find(section => section.sectionType === sectionName)\n\n  const Component = SectionToComponentMapping[sectionName]\n\n  if (!sectionData || !Component) return null\n\n  return <Component {...sectionData} />\n}\n\nexport function SectionContainer({ productPageSections }) {\n  return (\n    <>\n      <SectionRender\n        productPageSections={productPageSections}\n        sectionName='Image With Badges'\n      />\n      <SectionRender\n        productPageSections={productPageSections}\n        sectionName='Hero'\n      />\n      <SectionRender\n        productPageSections={productPageSections}\n        sectionName='Badges'\n      />\n      <SectionRender\n        productPageSections={productPageSections}\n        sectionName='Social Photos'\n      />\n      <SectionRender\n        productPageSections={productPageSections}\n        sectionName='Image With Text Carousel'\n      />\n    </>\n  )\n}\n","export function getTransparentPrice(\n  productPackVariantMap,\n  shopifyVariantId,\n  variantPrice,\n  selectedSize,\n) {\n  if (!selectedSize && productPackVariantMap[shopifyVariantId])\n    return variantPrice * productPackVariantMap[shopifyVariantId]?.packQuantity\n  return variantPrice\n}\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { desktopVw, mobileVw } from '../styles/utils'\nimport { getSimilarProducts } from '../utils/api'\nimport { extractProductJsonFromAPIProduct } from '../utils/build'\nimport ProductThumbnail from './ProductThumbnail'\nimport { CarouselWrapper } from './common/Carousel/CarouselWrapper'\nimport SpinningLoader from './SpinningLoader'\nimport { decodeIdFromGraphQLResponse } from '../utils'\nimport eventTracker from '../trackers/EventTracker'\nimport EventType from '../trackers/eventType'\nimport experimentManager from '../trackers/ExperimentManager'\nimport theme from '../styles/theme'\n\nconst desktopSettings = {\n  slidesToShow: 4,\n  slidesToScroll: 4,\n  leftArrowStyle: {\n    top: desktopVw(-56),\n    right: desktopVw(64),\n    left: 'auto',\n    height: desktopVw(16),\n  },\n  rightArrowStyle: {\n    top: desktopVw(-56),\n    right: desktopVw(10),\n    height: desktopVw(16),\n  },\n  showDisabledArrows: true,\n}\n\nconst mobileSettings = {\n  slidesToShow: 2,\n  slidesToScroll: 2,\n  showArrows: false,\n  showDots: true,\n}\n\nconst StyledDesktopLoaderContainer = styled.div`\n  position: relative;\n  height: ${mobileVw(360)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(383)};\n  }\n`\n\nconst StyledSimilarProductItem = styled.div`\n  padding-right: 10px;\n  .product-thumbnail__image-wrapper {\n    width: ${mobileVw(173)} !important;\n    height: ${mobileVw(214)} !important;\n  }\n  .product-thumbnail__footer {\n    margin-right: ${mobileVw(6)};\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    /* padding: 0 10px; */\n    margin-bottom: ${desktopVw(113)};\n    .product-thumbnail__image-wrapper {\n      width: ${desktopVw(312)} !important;\n      height: ${desktopVw(383)} !important;\n    }\n    .product-thumbnail__footer {\n      margin-right: ${desktopVw(25)};\n    }\n  }\n`\nconst StyledCarousel = styled(CarouselWrapper)`\n  .slick-dots {\n    bottom: auto;\n  }\n`\n\nconst SimilarProductWrapper = styled.div`\n  position: relative;\n  padding: ${mobileVw(25)} ${mobileVw(10)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 ${desktopVw(20)} 0 ${desktopVw(44)};\n  }\n`\n\nconst Heading = styled.div`\n  font-weight: 500;\n  font-size: ${mobileVw(25)};\n  line-height: ${mobileVw(20)};\n  margin-bottom: ${mobileVw(25)};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(25)};\n    line-height: ${desktopVw(20)};\n    margin-bottom: ${desktopVw(39)};\n  }\n`\n\nconst SimilarProducts = ({\n  productId,\n  selectedColor,\n  gender,\n  selectedSize,\n}) => {\n  const [similarProducts, setSimilarProducts] = useState()\n  const [loading, setLoading] = useState(true)\n\n  const fetchSimilarProducts = async () => {\n    setLoading(true)\n    const responseSimilarData = await getSimilarProducts(\n      productId,\n      selectedColor,\n      gender,\n    )\n    setSimilarProducts(responseSimilarData)\n    setLoading(false)\n  }\n\n  useEffect(() => {\n    const mq = window.matchMedia(\n      `(min-width: ${theme.breakpoints.desktopSmall}px)`,\n    )\n    if (\n      mq.matches ||\n      (experimentManager.getBucketForUser('similar_products') === 'show' &&\n        !mq.matches)\n    ) {\n      fetchSimilarProducts()\n    } else {\n      setSimilarProducts([])\n      setLoading(false)\n    }\n  }, [productId, selectedColor, gender])\n\n  const newSimilarProducts = (similarProducts ?? []).map(similarProduct => {\n    return {\n      product: extractProductJsonFromAPIProduct(similarProduct.product, 720),\n      color: similarProduct.color,\n    }\n  })\n\n  if (\n    Array.isArray(similarProducts) &&\n    similarProducts.length === 0 &&\n    !loading\n  )\n    return null\n\n  function renderSimilarProducts() {\n    return newSimilarProducts.map(({ product, color: productColor }, index) => (\n      <StyledSimilarProductItem\n        key={product.id}\n        onClick={() => {\n          eventTracker.trackClick(EventType.PRODUCT_CLICK, {\n            trackInternal: true,\n            category: 'similar_products',\n            action: 'click_similar_product',\n            context: {\n              similar_product_id: product?.shopifyProduct?.id\n                ? decodeIdFromGraphQLResponse(product?.shopifyProduct?.id)\n                : null,\n              similar_product_color: productColor,\n              similar_product_position: index,\n              source_product_id: productId,\n              source_product_color: selectedColor,\n            },\n          })\n        }}\n      >\n        <ProductThumbnail\n          contentfulProduct={product}\n          title={product.title || product.shopifyProduct.title}\n          staticPrice={product.shopifyProduct.variants.edges[0].node.price}\n          startingColor={productColor}\n          tracker={`similar_products__${index}`}\n          colorObj={(product.colors || []).find(\n            color => color.name === productColor,\n          )}\n          selectedSize={selectedSize}\n          gender={gender}\n          addToCartTrackerSection='similar_products_section'\n          showColors={false}\n          prefetchedColor={(product.colors || []).find(\n            color => color.name === productColor,\n          )}\n        />\n      </StyledSimilarProductItem>\n    ))\n  }\n\n  return (\n    <SimilarProductWrapper>\n      <div>\n        <Heading>Related Products</Heading>\n      </div>\n      {loading ? (\n        <StyledDesktopLoaderContainer>\n          <SpinningLoader />\n        </StyledDesktopLoaderContainer>\n      ) : (\n        <StyledCarousel\n          mobileSettings={mobileSettings}\n          desktopSettings={desktopSettings}\n        >\n          {renderSimilarProducts()}\n        </StyledCarousel>\n      )}\n    </SimilarProductWrapper>\n  )\n}\n\nexport default SimilarProducts\n","import React, { useEffect, useRef, useState } from 'react'\nimport styled from 'styled-components'\nimport { graphql } from 'gatsby'\nimport { navigate } from '@reach/router'\nimport queryString from 'query-string'\nimport {\n  capitalizeWord,\n  decodeIdFromGraphQLResponse,\n  getFullColorName,\n  getHyphenatedColorName,\n  getPathParams,\n  getProductCarousel,\n  getProductImagesOnSizeAndColor,\n  getProductPackVariantMap,\n  isGiftCard,\n} from '../utils'\n\n// Style utils\nimport { desktopVw, mobileVw } from '../styles/utils'\nimport theme from '../styles/theme'\nimport '../styles/zendeskChatWidget.css'\n\n// Hooks\nimport useShopifyProduct from '../hooks/useShopifyProduct'\n\n// Product components\nimport SEO from '../components/SEO'\nimport TransparentPricing from '../components/Product/TransparentPricing'\nimport Usp from '../components/Product/Usp'\nimport ProductDetails from '../components/Product/ProductDetails'\nimport PairWith from '../components/Product/PairWith'\nimport ComparisonPricing from '../components/Product/ComparisonPricing'\nimport ProductReviewSection from '../components/Product/ProductReviewSection'\n\n// Shared components\nimport ProductForm from '../components/ProductForm'\nimport BestSellersSection from '../components/BestSellersSection'\nimport ReferralModal from '../components/ReferralModal'\nimport WelcomeModal from '../components/WelcomeModal'\n\n// Event tracking.\nimport EventType from '../trackers/eventType'\nimport eventTracker from '../trackers/EventTracker'\n\nimport ComparisonPricingMobile from '../components/Product/ComparisonPricingMobile'\nimport ProductOverview from '../components/Product/ProductOverview'\nimport ProductOverviewMobile from '../components/Product/ProductOverviewMobile'\nimport useDetectDevices from '../hooks/useDetectDevices'\nimport NewTransparentPricing from '../components/Product/SectionContainer/TransparentPricingSection'\nimport { SectionContainer } from '../components/Product/SectionContainer'\nimport { PrPanel } from '../components/PrPanel'\nimport { captureWarning } from '../components/Sentry/utils'\nimport { getPairWithProducts, getProductReviews } from '../utils/api'\nimport { filterUnisexProductImages, zipObject } from '../utils/build'\nimport useMounted from '../hooks/useMounted'\nimport { getTransparentPrice } from '../utils/transparentPricing'\nimport { ProductContext } from '../contexts'\nimport ProgressiveHydration from '../components/ProgressiveHydration'\nimport SimilarProductsShow from '../components/SimilarProductsShow'\nimport experimentManager from '../trackers/ExperimentManager'\n\nconst StyledProduct = styled.div`\n  margin-top: -${props => props.theme.header.mobile.height}px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: 0;\n  }\n`\n\nconst ProductDesktop = styled.div`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst ProductMobile = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst EmptyRow = styled.div`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    height: ${desktopVw(38)};\n  }\n`\n\nconst ProductReviewWrapper = styled.div`\n  margin-top: var(--marginTop, 0);\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(119)};\n    margin-top: var(--marginTopDesktop, 0);\n  }\n`\n\nconst RecommendedProductsWrapper = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n  }\n`\n\nconst Card = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(19)} ${desktopVw(40)} ${desktopVw(30)};\n    border: 1px solid ${props => props.theme.colors.greyLighter};\n  }\n`\n\nconst getSelectedColor = query => {\n  const fallback = ''\n  if (query) {\n    const queryParams = queryString.parse(query)\n    const { color } = queryParams\n    if (color) {\n      return getFullColorName(color)\n    }\n    return fallback\n  }\n  return fallback\n}\n\nconst StyledPRPanel = styled(PrPanel)`\n  margin-top: 25px;\n  > div {\n    min-height: ${mobileVw(130)};\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 0 var(--marginBottomDesktop, 0);\n    > div {\n      min-height: ${desktopVw(181)};\n    }\n  }\n`\n\nconst REVIEWS_LIMIT = 30\n\nfunction getImageIdToColorMap(carousel) {\n  let imageToColorMap = {}\n  carousel.forEach(carouselItem => {\n    const { images } = carouselItem\n    const imageColor = carouselItem.color\n    if (images) {\n      images.forEach(image => {\n        imageToColorMap = { ...imageToColorMap, [image.id]: imageColor }\n      })\n    }\n  })\n  return imageToColorMap\n}\n\nconst extractCompetitorPricesOfAVariant = (\n  productComparisonPricing,\n  variantId,\n  productPackVariantMap,\n  selectedSize,\n) => {\n  return productComparisonPricing.items\n    .map(item => item.prices)\n    .reduce((a, b) => a.concat(b), [])\n    .filter(item => item.shopifyId == variantId)\n    .map(item => {\n      if (productPackVariantMap[variantId] && !selectedSize)\n        return item.price / productPackVariantMap[variantId]?.packQuantity\n      return item.price\n    })\n}\n\nfunction computeLeastComparisonPricing(\n  productComparisonPricing,\n  shopifyVariantId,\n  comparisonPricing,\n  productPackVariantMap,\n  selectedSize,\n) {\n  let leastPrice = null\n\n  if (productComparisonPricing) {\n    leastPrice = Math.min(\n      ...extractCompetitorPricesOfAVariant(\n        productComparisonPricing,\n        shopifyVariantId,\n        productPackVariantMap,\n        selectedSize,\n      ),\n    )\n  } else if (comparisonPricing) {\n    leastPrice = comparisonPricing\n      .filter(pricingObject => pricingObject.name.toLowerCase() != 'quince')\n      .reduce((prev, current) => {\n        let currentPrice = current.price\n        if (productPackVariantMap[shopifyVariantId] && !selectedSize)\n          currentPrice =\n            current.price /\n            productPackVariantMap[shopifyVariantId]?.packQuantity\n        return prev < currentPrice ? prev : currentPrice\n      }, 10000)\n  }\n  return leastPrice\n}\n\nfunction getAccordion(page) {\n  if (page?.shippingInformation)\n    return [...page.accordion, { id: 'shipping_details', title: 'Shipping' }]\n  return page.accordion\n}\n\nconst Product = ({\n  location,\n  page,\n  reviewsAndRatings,\n  referralPopupData,\n  transparentPricingIcons,\n  welcomePopup,\n  prPanelList,\n}) => {\n  const { mounted } = useMounted()\n\n  const productId = decodeIdFromGraphQLResponse(\n    page?.shopifyProduct?.product_id,\n  )\n\n  const productPackVariantMap = getProductPackVariantMap(page)\n\n  const [pairedProducts, setPairedProducts] = useState([])\n  const [viewContextGender, setViewContextGender] = useState()\n\n  const [forceHydration, setForceHydration] = useState(false)\n\n  useEffect(() => {\n    if (window && window.__client_side_navigation__) {\n      setForceHydration(true)\n    }\n  }, [])\n\n  const [carousel, setCarousel] = useState(getProductCarousel(page))\n\n  let urlParamColor = location.search && getSelectedColor(location.search)\n  const welcomePopupData = welcomePopup.nodes.filter(\n    node => node.category === 'welcomePopup',\n  )[0]\n\n  if (\n    page.colors &&\n    page.colors.find(col => col.name === urlParamColor) == null\n  ) {\n    urlParamColor = ''\n  }\n  const stateColor = location.state && location.state.color\n  if (stateColor && urlParamColor !== stateColor) {\n    // If color in state, replce the same in url params\n    const queryParams = {\n      ...queryString.parse(location.search),\n      color: getHyphenatedColorName(stateColor),\n    }\n    navigate(getPathParams(queryParams), {\n      replace: true,\n    })\n  }\n\n  const { product } = useShopifyProduct(page.shopifyProduct.handle)\n  const { devices } = useDetectDevices()\n\n  const [sizes, setSizes] = useState(page?.sizes ?? [])\n  const [selectedSize, setSelectedSize] = useState('')\n  const [selectedColor, setSelectedColor] = useState(\n    stateColor || urlParamColor || page.colors?.[0]?.name,\n  )\n  const [shopifyVariantId, setShopifyVariantId] = useState(\n    page.colorToMinPriceVariantMap?.[page.colors?.[0]?.name],\n  )\n  const [variantPrice, setVariantPrice] = useState(\n    !selectedSize && productPackVariantMap[shopifyVariantId]\n      ? page.colorToMinPriceMap?.[page.colors?.[0]?.name] /\n          productPackVariantMap[shopifyVariantId]?.packQuantity\n      : page.colorToMinPriceMap?.[page.colors?.[0]?.name],\n  )\n  const [leastCompetitorPrice, setLeastCompetitorPrice] = useState(\n    computeLeastComparisonPricing(\n      page.productComparisonPricing,\n      page.colorToMinPriceVariantMap?.[page.colors?.[0]?.name],\n      page.comparisonPricing,\n      productPackVariantMap,\n      selectedSize,\n    ),\n  )\n  const [initialColorLoad, setInitialColorLoad] = useState(false)\n  const [shopifyColors, setShopifyColors] = useState(\n    page.colors?.map(color => color.name) ?? [],\n  )\n  const [productReviewsWithSummary, setProductReviewsWithSummary] = useState({\n    ...reviewsAndRatings,\n    sortBy: 'Highest Rating',\n  })\n  const [loading, setLoading] = useState(false)\n\n  const [pairsWithLoading, setPairsWithLoading] = useState(false)\n\n  const [variant, setVariant] = useState('')\n  const [transparentPricing, setTransparentPricing] = useState(\n    page.transparentPricing,\n  )\n  const [comparisonPricing, setComparisonPricing] = useState(\n    page.comparisonPricing,\n  )\n  const [productComparisonPricing, setProductComparisonPricing] = useState(\n    page.productComparisonPricing,\n  )\n\n  const mergeComparisonPrices = (variantLevelPrices, productLevelPrices) => {\n    let prices = []\n\n    prices = variantLevelPrices\n      .filter(price => price.name.toLowerCase() === 'quince')\n      .map(price => price)\n    prices = prices.concat(\n      productLevelPrices\n        .filter(price => price.name.toLowerCase() !== 'quince')\n        .map(price => price),\n    )\n    return prices\n  }\n\n  useEffect(() => {\n    if (!variant || !page.variant) return\n\n    const variantOption = page.variant.filter(({ option }) => {\n      const newOption = option.replace(/\\s/g, '')\n      const newVariant = variant.replace(/\\s/g, '')\n\n      return newVariant.includes(newOption)\n    })[0]\n\n    if (variantOption && variantOption.transparentPricing) {\n      setTransparentPricing(variantOption.transparentPricing)\n    } else {\n      setTransparentPricing(page.transparentPricing)\n    }\n\n    if (variantOption && variantOption.comparisonPricing) {\n      setComparisonPricing(\n        mergeComparisonPrices(\n          variantOption.comparisonPricing,\n          page.comparisonPricing,\n        ),\n      )\n    } else {\n      setComparisonPricing(page.comparisonPricing)\n    }\n  }, [variant])\n\n  const fetchPairsWithData = async () => {\n    const { search } = location || {}\n    setPairsWithLoading(true)\n    let gender\n    if (search) {\n      const data = queryString.parse(search)\n      gender = data.gender\n    }\n    const responsePairsData = await getPairWithProducts(\n      productId,\n      selectedColor,\n      gender,\n    )\n    if (gender) {\n      setViewContextGender(gender)\n      filterPairedProducts(gender, responsePairsData)\n    } else {\n      setPairedProducts(responsePairsData)\n    }\n    setPairsWithLoading(false)\n  }\n\n  useEffect(() => {\n    if (selectedColor && urlParamColor !== selectedColor) {\n      if (!urlParamColor && !initialColorLoad) {\n        setInitialColorLoad(true)\n        fetchPairsWithData()\n        return\n      }\n      const queryParams = {\n        ...queryString.parse(location.search),\n        color: getHyphenatedColorName(selectedColor),\n      }\n      navigate(getPathParams(queryParams), {\n        replace: true,\n      })\n    }\n    fetchPairsWithData()\n  }, [selectedColor])\n\n  useEffect(() => {\n    if (!product) {\n      return\n    }\n\n    const sizeOption = product.options.find(({ name }) => name === 'Size')\n    const colorOption = product.options.find(({ name }) => name === 'Color')\n\n    if (sizeOption) {\n      if (isGiftCard(productId)) {\n        setSizes(sizeOption.values)\n      } else {\n        const availableSizes = sizeOption.values.filter(currentSize =>\n          page.sizes.includes(currentSize),\n        )\n        setSizes(availableSizes)\n      }\n    }\n\n    if (colorOption) {\n      setShopifyColors(colorOption.values)\n    }\n\n    let selectedColorVariantEdge = product.variants.edges.find(\n      edge =>\n        edge.node.selectedOptions.filter(\n          o => o.name === 'Color' && o.value === selectedColor,\n        ).length > 0,\n    )\n\n    // In case color doesn't match somehow, can be due to bad data.\n    if (!selectedColorVariantEdge) {\n      captureWarning(\n        `Unable to find selected color variant on Product Page for productId:${decodeIdFromGraphQLResponse(\n          product.id,\n        )}`,\n      )\n      ;[selectedColorVariantEdge] = product.variants.edges\n    }\n    const selectedColorVariant = selectedColorVariantEdge.node\n\n    // Sending product view event. TODO: Verify its called only once.\n    eventTracker.track(EventType.PRODUCT_VIEW, {\n      productId: decodeIdFromGraphQLResponse(product.id),\n      variantId: decodeIdFromGraphQLResponse(selectedColorVariant.id),\n      variantTitle: selectedColorVariant.title,\n      sku: selectedColorVariant.sku,\n      productTitle: page.title || page.shopifyProduct.title,\n      price: selectedColorVariant.presentmentPrices.edges[0].node.price.amount,\n      productType: product.productType,\n      vendor: product.vendor,\n    })\n  }, [product])\n\n  // Extract the price of the given variant\n  useEffect(() => {\n    if (!product || !selectedColor) return\n    if (!selectedSize) {\n      const requiredVariants = []\n      product.variants.edges.forEach(edge => {\n        if (\n          edge.node.selectedOptions.filter(\n            option => option.name === 'Color' && option.value === selectedColor,\n          ).length > 0\n        ) {\n          if (\n            edge.node.selectedOptions.filter(option => option.value === 'Group')\n              .length === 0\n          ) {\n            requiredVariants.push(edge.node)\n          }\n        }\n      })\n      if (requiredVariants.length > 0) {\n        let minPrice = parseFloat(requiredVariants[0].priceV2.amount)\n        let minPriceVariantId = decodeIdFromGraphQLResponse(\n          requiredVariants[0].id,\n        )\n        for (let i = 1; i < requiredVariants.length; i++) {\n          const variantId = decodeIdFromGraphQLResponse(requiredVariants[i].id)\n          const currentPrice = productPackVariantMap[variantId]\n            ? parseFloat(requiredVariants[i].priceV2.amount) /\n              productPackVariantMap[variantId]?.packQuantity\n            : parseFloat(requiredVariants[i].priceV2.amount)\n          if (currentPrice < minPrice) {\n            minPrice = currentPrice\n            minPriceVariantId = variantId\n          }\n        }\n        setVariantPrice(minPrice)\n        setShopifyVariantId(minPriceVariantId)\n      }\n    } else {\n      let requiredVariant = null\n      product.variants.edges.forEach(edge => {\n        if (\n          edge.node.selectedOptions.filter(\n            option => option.name === 'Color' && option.value === selectedColor,\n          ).length > 0\n        ) {\n          if (\n            edge.node.selectedOptions.filter(\n              option => option.name === 'Size' && option.value === selectedSize,\n            ).length > 0\n          ) {\n            if (\n              edge.node.selectedOptions.filter(\n                option => option.value === 'Group',\n              ).length === 0\n            ) {\n              requiredVariant = edge.node\n            }\n          }\n        }\n      })\n      if (requiredVariant) {\n        setVariantPrice(\n          requiredVariant.priceV2 && parseFloat(requiredVariant.priceV2.amount),\n        )\n        setShopifyVariantId(decodeIdFromGraphQLResponse(requiredVariant.id))\n      }\n    }\n  }, [product, selectedColor, selectedSize])\n\n  // Set the least price amongst all the competitors (to be used in subtitle)\n  useEffect(() => {\n    if (!shopifyVariantId) return\n\n    if (\n      !comparisonPricing &&\n      !(\n        productComparisonPricing &&\n        Object.keys(productComparisonPricing).length > 0\n      )\n    )\n      return\n\n    const leastPrice = computeLeastComparisonPricing(\n      productComparisonPricing,\n      shopifyVariantId,\n      comparisonPricing,\n      productPackVariantMap,\n      selectedSize,\n    )\n\n    setLeastCompetitorPrice(leastPrice)\n  }, [comparisonPricing, productComparisonPricing, shopifyVariantId])\n\n  // Set carousel and display images by selected color\n  const [carouselImages, setCarouselImages] = useState(() => {\n    const selected = (carousel ?? []).find(\n      ({ color }) => color.name === selectedColor,\n    )\n    let selectedImages = selected?.images || []\n    selectedImages = [...selectedImages]\n    if (selected.thumbnail && selected.video && selected.videoIndex) {\n      selectedImages.splice(selected.videoIndex - 1, 0, {\n        ...selected.thumbnail,\n        video: selected.video,\n      })\n    }\n    return selectedImages\n  })\n\n  const setCarouselImagesWithVideoThumbnail = (\n    images,\n    thumbnail,\n    video,\n    videoIndex,\n  ) => {\n    const img = [...images]\n    if (thumbnail && video && videoIndex) {\n      img.splice(videoIndex - 1, 0, {\n        ...thumbnail,\n        video,\n      })\n    }\n    setCarouselImages(img)\n  }\n\n  const imageIdToColors = getImageIdToColorMap(carousel)\n\n  function filterPairedProducts(viewContextGenderParam, pairedProds) {\n    if (['women', 'men'].includes(viewContextGenderParam)) {\n      const filteredPairedProducts = (pairedProds || [])\n        .filter(cp => {\n          const gender = page?.gender || ''\n          if (gender.toLowerCase() === 'unisex') {\n            const relatedProductGender = cp.pairedProduct?.gender || ''\n            return (\n              relatedProductGender.toLowerCase() === viewContextGenderParam ||\n              relatedProductGender.toLowerCase() === 'unisex'\n            )\n          }\n          return true\n        })\n        .map(fp => {\n          // filter images from unisex product as per gender of current product\n          const gender = fp.pairedProduct?.gender || ''\n          if (gender.toLowerCase() === 'unisex')\n            return {\n              ...fp,\n              relatedProduct: filterUnisexProductImages(\n                fp.pairedProduct,\n                viewContextGenderParam,\n              ),\n            }\n          return fp\n        })\n      setPairedProducts(filteredPairedProducts)\n    } else {\n      setPairedProducts(pairedProds)\n    }\n  }\n\n  useEffect(() => {\n    const { search } = location || {}\n\n    if (search) {\n      const { gender } = queryString.parse(search)\n      setViewContextGender(gender)\n      if (page.slug.search(/\\bunisex\\b/) >= 0) {\n        if (['women', 'men'].includes(gender)) {\n          const newPage = filterUnisexProductImages(page, gender)\n          setCarousel(newPage.productImages)\n          const {\n            images,\n            thumbnail,\n            video,\n            videoIndex,\n          } = newPage.productImages[0]\n          setCarouselImagesWithVideoThumbnail(\n            images,\n            thumbnail,\n            video,\n            videoIndex,\n          )\n        }\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    if (carousel && selectedColor) {\n      const newCarouselImages = getProductImagesOnSizeAndColor(\n        carousel,\n        selectedSize,\n        selectedColor,\n      )\n\n      if (newCarouselImages) {\n        const { images, thumbnail, video, videoIndex } = newCarouselImages\n        setCarouselImagesWithVideoThumbnail(\n          images,\n          thumbnail,\n          video,\n          videoIndex,\n        )\n      }\n    }\n  }, [carousel, selectedColor, selectedSize])\n\n  // Scroll to review section\n  const reviewSectionRef = useRef(null)\n\n  const scrollToReviewSection = () => {\n    if (!reviewSectionRef || !reviewSectionRef.current) return\n    const offset = 20\n    window.scrollTo({\n      top:\n        reviewSectionRef.current.getBoundingClientRect().top -\n        offset +\n        window.scrollY -\n        theme.header.desktop.height,\n      behavior: 'smooth',\n    })\n  }\n\n  const setPage = async (page, queryParams, sortBy) => {\n    const offset = (page - 1) * REVIEWS_LIMIT\n    setLoading(true)\n    const response = await getProductReviews({\n      productId,\n      offset,\n      limit: REVIEWS_LIMIT,\n      queryParams,\n    })\n    setLoading(false)\n    const normalizedReview = {\n      ...productReviewsWithSummary,\n      reviews: response.reviews,\n      page: productReviewsWithSummary.sortBy === sortBy ? page + 1 : page,\n      sortBy,\n    }\n    setProductReviewsWithSummary(normalizedReview)\n  }\n\n  const getProductOverviewChildren = () => (\n    <>\n      <Card>\n        <ProductForm\n          product={product}\n          productId={productId}\n          contentfulProduct={page}\n          variants={product && product.variants.edges}\n          title={page.title || page.shopifyProduct.title}\n          sizes={sizes}\n          shopifyColors={shopifyColors}\n          reviewsAndRatings={reviewsAndRatings}\n          scrollToReviewSection={scrollToReviewSection}\n          selectedSize={selectedSize}\n          setSelectedSize={setSelectedSize}\n          setSelectedColor={setSelectedColor}\n          startingColor={selectedColor}\n          productPreorderInformation={page.preOrder}\n          contentfulVariants={page.variant}\n          getVariantOption={setVariant}\n          productType={product && product.productType}\n          vendor={product && product.vendor}\n          trackerSection='pdp_page'\n          leastCompetitorPrice={leastCompetitorPrice}\n          slug={page.slug}\n          quincePrice={variantPrice}\n          traditionalRetailPriceStandalone={\n            page.traditionalRetailPriceStandalone\n          }\n          productPackVariantMap={productPackVariantMap}\n          selectedVariantId={shopifyVariantId}\n          retiredVariants={page?.retiredVariants}\n        />\n        {page.icons && <Usp icons={page.icons} />}\n        <ProductDetails\n          productId={productId}\n          accordion={getAccordion(page)}\n          detailsHTML={\n            page.productDetails && page.productDetails.productDetails\n          }\n          descriptionHTML={\n            page.productDescription &&\n            page.productDescription.productDescription\n          }\n          shippingInformation={page?.shippingInformation?.shippingInformation}\n        />\n        {!(page?.hideSections ?? []).includes('Comparison Pricing') && (\n          <>\n            <ComparisonPricing\n              quincePrice={variantPrice}\n              pricing={comparisonPricing}\n              pricingJson={page.productComparisonPricing}\n              selectedVariantId={shopifyVariantId}\n              computePerPack={!selectedSize}\n              productPackVariantMap={productPackVariantMap}\n            />\n            <ComparisonPricingMobile\n              quincePrice={variantPrice}\n              pricing={comparisonPricing}\n              pricingJson={page.productComparisonPricing}\n              selectedVariantId={shopifyVariantId}\n              computePerPack={!selectedSize}\n              productPackVariantMap={productPackVariantMap}\n            />\n          </>\n        )}\n      </Card>\n      <PairWith\n        startingSize={selectedSize}\n        selectedColor={selectedColor}\n        pairedProducts={pairedProducts}\n        loading={pairsWithLoading}\n        gender={viewContextGender || (page.gender || '').toLowerCase()}\n      />\n    </>\n  )\n\n  function getTransparentPricingData() {\n    const transparentPricingData =\n      page.productPageSections &&\n      page.productPageSections.find(\n        section => section.sectionType === 'Transparent Pricing',\n      )\n    return transparentPricingData\n  }\n\n  function renderTransparentPricingSection() {\n    const transparentPricingData = getTransparentPricingData()\n    if (transparentPricingData) return null\n    return page.systemTransparentPricing ? (\n      <TransparentPricing\n        title={page.systemTransparentPricing.title}\n        pricingListJson={page.systemTransparentPricing.items}\n        pricingTitle={page.systemTransparentPricing.subTitle}\n        quincePrice={getTransparentPrice(\n          productPackVariantMap,\n          shopifyVariantId,\n          variantPrice,\n          selectedSize,\n        )}\n        traditionalRetailPrice={getTransparentPrice(\n          productPackVariantMap,\n          shopifyVariantId,\n          leastCompetitorPrice ||\n            (page.traditionalRetailPriceStandalone\n              ? parseFloat(page.traditionalRetailPriceStandalone)\n              : null),\n          selectedSize,\n        )}\n        selectedVariantId={shopifyVariantId}\n        transparentPricingIcons={transparentPricingIcons}\n      />\n    ) : (\n      transparentPricing && transparentPricing.pricing && (\n        <TransparentPricing\n          title={transparentPricing.title}\n          pricing={transparentPricing.pricing}\n          pricingTitle={transparentPricing.pricingTitle}\n          quincePrice={variantPrice}\n          traditionalRetailPrice={transparentPricing.traditionalRetailPrice}\n        />\n      )\n    )\n  }\n\n  function renderNewTransparentPricingSection() {\n    const transparentPricingData = getTransparentPricingData()\n    if (!transparentPricingData) return null\n    return page.systemTransparentPricing ? (\n      <NewTransparentPricing\n        title={page.systemTransparentPricing.title}\n        pricingListJson={page.systemTransparentPricing.items}\n        pricingTitle={page.systemTransparentPricing.subTitle}\n        quincePrice={getTransparentPrice(\n          productPackVariantMap,\n          shopifyVariantId,\n          variantPrice,\n          selectedSize,\n        )}\n        traditionalRetailPrice={getTransparentPrice(\n          productPackVariantMap,\n          shopifyVariantId,\n          leastCompetitorPrice ||\n            (page.traditionalRetailPriceStandalone\n              ? parseFloat(page.traditionalRetailPriceStandalone)\n              : null),\n          selectedSize,\n        )}\n        selectedVariantId={shopifyVariantId}\n        transparentPricingIcons={transparentPricingIcons}\n        imageMobile={transparentPricingData.imageMobile}\n        imageDesktop={transparentPricingData.imageDesktop}\n      />\n    ) : (\n      transparentPricing && transparentPricing.pricing && (\n        <NewTransparentPricing\n          title={transparentPricing.title}\n          pricing={transparentPricing.pricing}\n          pricingTitle={transparentPricing.pricingTitle}\n          quincePrice={variantPrice}\n          traditionalRetailPrice={transparentPricing.traditionalRetailPrice}\n          imageMobile={transparentPricingData.imageMobile}\n          imageDesktop={transparentPricingData.imageDesktop}\n        />\n      )\n    )\n  }\n\n  function showProductReviewMarginTop() {\n    const transparentPricingData = getTransparentPricingData()\n    return transparentPricingData ? true : productReviewsWithSummary.count === 0\n  }\n  return (\n    <ProductContext.Provider\n      value={{\n        slug: page.slug,\n        productImages: [\n          ...page.productImages.map(orgPImg => ({\n            ...orgPImg,\n            bucket: 'control',\n          })),\n          ...(page?.productImagesVariant ?? []).map(orgPImg => ({\n            ...orgPImg,\n            bucket: 'show',\n          })),\n        ],\n      }}\n    >\n      <SEO\n        title={\n          (page.seoTitle || '').trim()\n            ? page.seoTitle\n            : `${page.title || page.shopifyProduct.title} | Quince`\n        }\n        description={\n          page.seoDescription && page.seoDescription.length > 0\n            ? page.seoDescription\n            : page.description\n        }\n        type={page.pageType ? page.pageType : 'Product'}\n        slug={page.slug}\n        image={\n          page.metaImage\n            ? page.metaImage.fluid.src\n            : carouselImages?.[0]\n            ? `https:${carouselImages[0].fluid.src}`\n            : null\n        }\n        schemaData\n        category={page.productTypeName && capitalizeWord(page.productTypeName)}\n        reviewsAndRatings={reviewsAndRatings}\n        price={page.seoPrice}\n      />\n      <WelcomeModal\n        heading={welcomePopupData.heading}\n        subHeading={welcomePopupData.subHeading}\n        klaviyoListId={welcomePopupData.subscribeForm.klaviyoListId}\n        successMessage={welcomePopupData.subscribeForm.successMessage.json}\n        colorTheme={Math.round(Math.random())}\n        subscriptionType='email'\n      />\n      <StyledProduct className='product_page' data-product-id={productId}>\n        {devices.mobile && (\n          <ProductMobile>\n            <EmptyRow />\n            <ProductOverviewMobile\n              carouselImages={carouselImages}\n              imageNamePrefix={page.title || page.seoTitle}\n              imageToColorMap={imageIdToColors}\n              productId={productId}\n              selectedColor={selectedColor}\n            >\n              {getProductOverviewChildren()}\n            </ProductOverviewMobile>\n          </ProductMobile>\n        )}\n        {devices.desktop && (\n          <ProductDesktop>\n            <EmptyRow />\n            <ProductOverview\n              carouselImages={carouselImages}\n              imageNamePrefix={page.title || page.seoTitle}\n              imageToColorMap={imageIdToColors}\n              productId={productId}\n              selectedColor={selectedColor}\n            >\n              {getProductOverviewChildren()}\n            </ProductOverview>\n          </ProductDesktop>\n        )}\n        <EmptyRow />\n        {/**\n         * Size Guide Json is currently flowing from PC UI\n         * TODO: Remove Size Guide after migration from contentful to PC UI\n         */}\n\n        <SimilarProductsShow\n          selectedSize={selectedSize}\n          productId={productId}\n          selectedColor={selectedColor}\n          gender={viewContextGender || (page.gender || '').toLowerCase()}\n        />\n        {prPanelList && (\n          <ProgressiveHydration rootMargin='1000px' force={forceHydration}>\n            <StyledPRPanel\n              panelList={prPanelList}\n              style={{\n                '--marginBottomDesktop': page.productPageSections\n                  ? desktopVw(145)\n                  : 0,\n              }}\n            />\n          </ProgressiveHydration>\n        )}\n        <ProgressiveHydration rootMargin='1000px' force={forceHydration}>\n          <SectionContainer productPageSections={page.productPageSections} />\n        </ProgressiveHydration>\n        <ProgressiveHydration rootMargin='1000px' force={forceHydration}>\n          {renderTransparentPricingSection()}\n        </ProgressiveHydration>\n        {/** Two separate calls for actual data and summary data, because of the issue in reviews api */}\n        {productReviewsWithSummary && (\n          <div ref={reviewSectionRef}>\n            <ProgressiveHydration rootMargin='1000px' force={forceHydration}>\n              <ProductReviewWrapper\n                style={{\n                  '--marginTop': showProductReviewMarginTop() ? '54px' : 0,\n                  '--marginTopDesktop': showProductReviewMarginTop()\n                    ? desktopVw(119)\n                    : 0,\n                }}\n              >\n                <ProductReviewSection\n                  reviews={productReviewsWithSummary}\n                  productId={productId}\n                  productName={page.title || page.shopifyProduct?.title}\n                  setPage={setPage}\n                  productTypeName={page.productTypeName}\n                  reviewForm={page.reviewForm}\n                  summary={reviewsAndRatings}\n                  loading={loading}\n                  productReviewsWithSummary={reviewsAndRatings}\n                />\n              </ProductReviewWrapper>\n            </ProgressiveHydration>\n          </div>\n        )}\n        <ProgressiveHydration rootMargin='1000px' force={forceHydration}>\n          {renderNewTransparentPricingSection()}\n        </ProgressiveHydration>\n        {page.recommendedProducts && (\n          <ProgressiveHydration rootMargin='1000px' force={forceHydration}>\n            <RecommendedProductsWrapper>\n              <BestSellersSection\n                json={page.recommendedProducts.text.json}\n                textColor={page.recommendedProducts.textColor}\n                image={page.recommendedProducts.image}\n                products={page.recommendedProducts.products}\n                tracker='product_page'\n                hideImageOnMobile\n              />\n            </RecommendedProductsWrapper>\n          </ProgressiveHydration>\n        )}\n      </StyledProduct>\n      <ReferralModal data={referralPopupData} />\n    </ProductContext.Provider>\n  )\n}\n\nconst ProductWrapper = ({\n  location,\n  data: {\n    allContentfulAsset,\n    contentfulProduct,\n    transparentPricingIcons,\n    welcomePopup,\n  },\n  pageContext: {\n    orderedColors,\n    reviews,\n    prPanelList,\n    sizes,\n    colorToMinPriceMap,\n    colorToMinPriceVariantMap,\n    retiredVariants,\n  },\n}) => {\n  const finalColors = []\n  const colorObj = zipObject(\n    contentfulProduct.colors.map(color => color.name),\n    contentfulProduct.colors,\n  )\n  const colorsNotInList = contentfulProduct.colors.filter(\n    color => !orderedColors.includes(color.name),\n  )\n  orderedColors.forEach(colorName => {\n    if (colorObj[colorName]) finalColors.push(colorObj[colorName])\n  })\n  // push colors whichever not there in the list at the last\n  colorsNotInList.forEach(cObj => {\n    finalColors.push(cObj)\n  })\n\n  return (\n    <Product\n      location={location}\n      referralPopupData={allContentfulAsset}\n      reviewsAndRatings={reviews}\n      transparentPricingIcons={transparentPricingIcons.nodes}\n      welcomePopup={welcomePopup}\n      prPanelList={prPanelList}\n      page={{\n        ...contentfulProduct,\n        colors: finalColors.filter(\n          cObj =>\n            getProductCarousel(contentfulProduct).findIndex(\n              imageObj => imageObj.color.name === cObj.name,\n            ) > -1,\n        ),\n        sizes,\n        colorToMinPriceMap,\n        colorToMinPriceVariantMap,\n        retiredVariants,\n      }}\n    />\n  )\n}\n\nexport default ProductWrapper\n\nexport const ProductQuery = graphql`\n  query Product($id: String!) {\n    contentfulProduct(id: { eq: $id }) {\n      id\n      seoTitle\n      seoDescription\n      seoPrice\n      productTypeName\n      productSubtype\n      metaImage {\n        fluid(maxWidth: 1200) {\n          ...GatsbyContentfulFluid_withWebp\n        }\n      }\n      slug\n      title\n      slug\n      subtitle\n      comboPrice\n      traditionalRetailPriceStandalone\n      gender\n      metaTags\n      shippingInformation {\n        shippingInformation\n      }\n      shippingMetaInfoText {\n        shippingMetaInfoText\n      }\n      hideSections\n      productImages {\n        ...ProductImages\n        ...ProductVideos\n      }\n      productImagesVariant {\n        ...ProductImages\n      }\n      icons {\n        id\n        image {\n          description\n          file {\n            url\n          }\n        }\n        text\n      }\n      colors {\n        name\n        addBorder\n        hexcode\n        hasText\n        texture {\n          description\n          fluid(maxWidth: 100) {\n            ...GatsbyContentfulFluid_withWebp_noBase64\n          }\n        }\n      }\n      shopifyProduct {\n        ...ShopifyProduct\n      }\n      discount {\n        description {\n          json\n        }\n      }\n      accordion {\n        id\n        title\n        text {\n          json\n        }\n      }\n      productDetails {\n        productDetails\n      }\n      productDescription {\n        productDescription\n      }\n      comparisonPricing {\n        id\n        name\n        price\n      }\n      productComparisonPricing {\n        items {\n          name\n          features\n          prices {\n            price\n            variant\n            shopifyId\n            freeReturns\n            freeShipping\n          }\n        }\n        features {\n          name\n        }\n      }\n      productPackInformation {\n        packType\n        packInformationList {\n          shopifyId\n          packQuantity\n        }\n      }\n      productPageSections {\n        ... on ContentfulProductPageSection {\n          sectionType\n          headingDesktop {\n            json\n          }\n          headingMobile {\n            json\n          }\n          svgList {\n            ...SVGWithText\n          }\n          imageDesktop {\n            id\n            title\n            fluid(maxWidth: 1440) {\n              ...GatsbyContentfulFluid_withWebp_noBase64\n            }\n          }\n          imageMobile {\n            id\n            title\n            fluid(maxWidth: 960) {\n              ...GatsbyContentfulFluid_withWebp_noBase64\n            }\n          }\n          video {\n            ...Video\n          }\n          imageWithTextList {\n            id\n            image {\n              description\n              fluid(maxWidth: 960) {\n                ...GatsbyContentfulFluid_withWebp_noBase64\n              }\n            }\n            imageDesktop {\n              description\n              fluid(maxWidth: 1440) {\n                ...GatsbyContentfulFluid_withWebp_noBase64\n              }\n            }\n            text {\n              json\n            }\n            textMobile {\n              json\n            }\n            instagramHandle\n            instagramText {\n              json\n            }\n            instagramPostLink\n            instagramPostDate\n            linkedProductColors {\n              ...Color\n            }\n            linkedProducts {\n              ...ContentfulProduct\n            }\n          }\n          socialPhotosConfigDesktop\n        }\n      }\n      transparentPricing {\n        title\n        pricing {\n          id\n          name\n          price\n          icon {\n            file {\n              url\n            }\n          }\n        }\n        pricingTitle\n        quincePrice\n        traditionalRetailPrice\n      }\n      systemTransparentPricing {\n        title\n        subTitle\n        items {\n          name\n          shopifyId\n          crafting\n          materials\n          packaging\n          shippingHandling\n          creditCardFees\n        }\n      }\n      reviewForm {\n        title\n        submitButtonText\n        successMessage {\n          json\n        }\n        contentfulfields {\n          ... on ContentfulInput {\n            id\n            name\n            label\n            placeholder\n            type\n            width\n          }\n          ... on ContentfulRadio {\n            id\n            type\n            name\n            label\n            range\n            radioOptions {\n              name\n              value\n            }\n            displayValues\n          }\n          ... on ContentfulSelect {\n            id\n            name\n            label\n            options\n            width\n          }\n        }\n      }\n      recommendedProducts {\n        id\n        image {\n          description\n          title\n          fluid(maxWidth: 1440) {\n            ...GatsbyContentfulFluid_withWebp_noBase64\n          }\n        }\n        textColor\n        text {\n          json\n        }\n        products {\n          id\n          title\n          seoTitle\n          slug\n          subtitle\n          metaTags\n          productImages {\n            color {\n              name\n            }\n            images {\n              id\n              title\n              description\n              fluid(maxWidth: 1440) {\n                ...GatsbyContentfulFluid_withWebp_noBase64\n              }\n            }\n          }\n          colors {\n            name\n            addBorder\n            hasText\n            hexcode\n            texture {\n              description\n              fluid(maxWidth: 100) {\n                ...GatsbyContentfulFluid_withWebp_noBase64\n              }\n            }\n          }\n          shopifyProduct {\n            ...ShopifyProduct\n          }\n        }\n      }\n      sizeGuide {\n        tables {\n          id\n          title\n          tableRows {\n            id\n            tableData\n          }\n        }\n        title\n        information\n      }\n      sizeChart {\n        title\n        information\n        sections {\n          title\n          items {\n            key\n            values\n          }\n        }\n      }\n      preOrder {\n        date\n        comingSoon\n      }\n      variant {\n        option\n        preOrder {\n          date\n          comingSoon\n        }\n        transparentPricing {\n          title\n          pricing {\n            id\n            name\n            price\n            icon {\n              file {\n                url\n              }\n            }\n          }\n          quincePrice\n          traditionalRetailPrice\n        }\n        comparisonPricing {\n          id\n          name\n          price\n        }\n      }\n    }\n\n    allContentfulAsset(filter: { title: { eq: \"Referral Popup\" } }) {\n      nodes {\n        description\n        fixed(width: 600, height: 704) {\n          ...GatsbyContentfulFixed\n        }\n      }\n    }\n\n    transparentPricingIcons: allContentfulAsset(\n      filter: {\n        title: {\n          in: [\n            \"Crafting icon\"\n            \"Materials icon\"\n            \"Shipping icon\"\n            \"Credit and fees icon\"\n            \"Packaging icon\"\n          ]\n        }\n      }\n    ) {\n      nodes {\n        description\n        title\n        file {\n          url\n        }\n      }\n    }\n\n    welcomePopup: allContentfulWelcomePopup {\n      nodes {\n        id\n        heading\n        subHeading\n        category\n        subscribeForm {\n          klaviyoListId\n          successMessage {\n            json\n          }\n        }\n      }\n    }\n  }\n`\n","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","var React = require('react');\n\nfunction ReviewPlus (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"line\",{\"x1\":\"18.25\",\"y1\":\"1.09278e-08\",\"x2\":\"18.25\",\"y2\":\"38\",\"stroke\":\"black\",\"strokeWidth\":\"0.5\",\"key\":0}),React.createElement(\"line\",{\"x1\":\"38\",\"y1\":\"18.25\",\"x2\":\"-2.18557e-08\",\"y2\":\"18.25\",\"stroke\":\"black\",\"strokeWidth\":\"0.5\",\"key\":1})]);\n}\n\nReviewPlus.defaultProps = {\"width\":\"38\",\"height\":\"38\",\"viewBox\":\"0 0 38 38\",\"fill\":\"none\"};\n\nmodule.exports = ReviewPlus;\n\nReviewPlus.default = ReviewPlus;\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;"],"sourceRoot":""}