{"version":3,"sources":["webpack:///./src/assets/right_arrow.svg","webpack:///./src/shopify/customerAccessTokenCreateWithMultipass.js","webpack:///./src/shopify/fetchCustomerAccessToken.js","webpack:///./src/components/common/DottedSpinner.js","webpack:///./src/components/Account/SidebarNav.js","webpack:///./src/components/Account/AccountWrapper.js","webpack:///./src/hooks/useSwellSDK.js","webpack:///./src/hooks/useReferralPoints.js","webpack:///./src/components/Account/PageHeader.js","webpack:///./src/components/common/SkeletonLoader.js","webpack:///./src/templates/Account/MyRewards.js","webpack:///./src/components/ReferAndEarn/ReferralPoints.js","webpack:///./src/shopify/queryCustomer.js","webpack:///./src/shopify/queryLatestCustomer.js","webpack:///./src/shopify/loadCustomerAccessToken.js","webpack:///./src/hooks/useCustomer.js"],"names":["React","RightArrow","props","createElement","defaultProps","module","exports","default","mutation","gql","customerAccessTokenCreateWithMultipass","client","variables","mutate","fetchCustomerAccessToken","a","Auth","user","getUserSession","userSession","headers","Headers","append","idToken","jwtToken","fetch","process","method","multipassFetch","json","multipassToken","accessTokenResult","customerAccessToken","data","bounce_circularG","keyframes","StyledSpinner","styled","div","DottedSpinner","className","id","StyledSidebarNav","theme","breakpoints","desktopSmall","desktopVw","SelectWrapper","MobileSelect","select","colors","greyLighter","Dropdown","DropdownIcon","Sticky","header","desktop","height","WelcomeText","fonts","heading","NavWrapper","Nav","nav","NavItem","ContactDetails","silver","Logout","TextButton","primary","greyLight","SidebarNav","menuList","contact","activeSlug","signOutUser","useSignoutUser","onChange","e","value","target","navigate","handleChange","map","menuItem","key","getLinkPath","text","name","to","active","documentToReactComponents","onClick","trackParams","trackInternal","category","action","context","login_email","email","lb_user_id","getCookie","ANALYTIC_COOKIES","LB_USER_ID","StyledAccountWrapper","Wrapper","Container","ContentWrapper","AccountWrapper","children","menu","heroImage","useEffect","isLoggedIn","window","location","href","getCurrentUser","useSwellSDK","customerId","isReloadNotRequired","useState","initialized","setInitialized","loadReferralCouponCode","loadState","saveReferralCouponCode","saveState","code","couponCode","setCouponCode","loading","setLoading","setup","setSetup","swellSDK","document","querySelector","parentNode","removeChild","script","src","head","appendChild","swellCustomerIdentification","setAttribute","style","display","body","customerDetails","setCustomerDetails","swellAPI","getCustomerDetails","addEventListener","referralLink","setReferralLink","showPopUp","showPopupByType","setReferralCouponCode","event","generatedCouponCode","detail","coupon_code","savedCouponCode","setCookie","useReferralPoints","useFetch","fetchData","response","url","error","options","fetchReferrals","useCallback","successfulReferrals","invitedReferrals","StyledPageHeader","Title","h1","Text","p","PageHeader","title","load","Skeleton","SkeletonLoader","saveFirstPurchaseCouponCode","StyledLoader","StyledModal","Modal","secondary","RewardsContainer","Sidebar","Points","Content","RedeemBody","RedeemModal","RedeemContainer","RedeemContent","Header","h3","Description","RedeemButton","Button","OptionPanel","Summary","FeaturedImage","Image","SummaryContent","SummaryText","RedeemPointsButtonWrapper","RedeemPointsButton","StyledButton","ReferralPointsWrapper","rotate","Loader","CopyButton","RedeemOptions","redeemObj","customer_external_id","copied","setCopied","redeemModalOpen","setRedeemModalOpen","devices","useDetectDevices","reward_text","eventTracker","track","EventType","MODAL_OPEN","label","width","cost_text","mobile","open","onClose","MODAL_CLOSE","fontSize","errors","amount","color","red","description","fallbackCopyTextToClipboard","BUTTON_CLICK","marginTop","JSON","stringify","redemption_option_id","customer_email","merchant_id","MyRewards","page","contentfulAccountPage","activeRedemptions","fetchRedemption","customer","useCustomer","decodeIdFromGraphQLResponse","rewardsPopUpOpened","setRewardsPopUpOpened","earnedPoints","setEarnedPoints","dataLoader","setDataLoader","openRewardsPopup","addSwellPopUpCloseListener","iframe","getElementsByTagName","iDoc","contentWindow","contentDocument","extractQueryParamFromPageLocation","earned","reduce","acc","v","points","hero","slug","points_balance","length","redObj","fluid","featuredImage","alt","toLocaleString","referral_code","black","trackGA","setTimeout","ReferralPoints","referrals","totalText","noReferralsMsg","MyRewardsQuery","StyledReferralPoints","Overview","OverviewTitle","RewardOverviewText","Total","TotalText","NoReferrals","totalPoints","setTotalPoints","total","i","parseInt","query","queryShopifyCustomer","queryShopifyLatestCustomer","fetchPolicy","saveCustomerAccessToken","loadCustomerAccessToken","Date","parse","expiresAt","console","log","newAccessToken","stores","useContext","StoreContext","setCustomer","refreshCustomerData","setRefreshCustomerData","getCustomer","lastbrand","accessToken","getLatestCustomer","checkRefreshCustomer","refreshCustomer"],"mappings":"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","file":"component---src-templates-account-my-rewards-js-a77ffa187773111d4115.js","sourcesContent":["var React = require('react');\n\nfunction RightArrow (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"rect\",{\"y\":\"13.4355\",\"width\":\"10\",\"height\":\"1\",\"transform\":\"rotate(-45 0 13.4355)\",\"fill\":\"#C4C4C4\",\"key\":0}),React.createElement(\"rect\",{\"y\":\"0.707031\",\"width\":\"1\",\"height\":\"10\",\"transform\":\"rotate(-45 0 0.707031)\",\"fill\":\"#C4C4C4\",\"key\":1})]);\n}\n\nRightArrow.defaultProps = {\"width\":\"8\",\"height\":\"15\",\"viewBox\":\"0 0 8 15\",\"fill\":\"none\"};\n\nmodule.exports = RightArrow;\n\nRightArrow.default = RightArrow;\n","import { gql } from '@apollo/client'\n\nconst mutation = gql`\n  mutation customerAccessTokenCreateWithMultipass($multipassToken: String!) {\n    customerAccessTokenCreateWithMultipass(multipassToken: $multipassToken) {\n      customerAccessToken {\n        accessToken\n        expiresAt\n      }\n      customerUserErrors {\n        code\n        field\n        message\n      }\n    }\n  }\n`\n\n/**\n * https://help.shopify.com/en/api/storefront-api/reference/mutation/checkoutcreate\n *\n * @param {{multipassToken: String}} multipassToken\n */\nconst customerAccessTokenCreateWithMultipass = (client, variables) =>\n  client.mutate({ mutation, variables })\n\nexport default customerAccessTokenCreateWithMultipass\n","import { Auth } from 'aws-amplify'\nimport customerAccessTokenCreateWithMultipass from './customerAccessTokenCreateWithMultipass'\nimport { getUserSession } from '../utils'\n\nconst multipassTokenFetchURL =\n  process.env.GATSBY_COGNITO_SHOPIFY_MULTIPASS_TOKEN_ENDPOINT\n\nconst fetchCustomerAccessToken = async client => {\n  if (!Auth.user) return null\n  const userSession = await getUserSession()\n  const headers = new Headers()\n  headers.append('Content-Type', 'application/json')\n  headers.append('Authorization', userSession.idToken.jwtToken)\n\n  const multipassFetch = await fetch(multipassTokenFetchURL, {\n    method: 'GET',\n    headers,\n  })\n  const multipassToken = await multipassFetch.json()\n\n  const accessTokenResult = await customerAccessTokenCreateWithMultipass(\n    client,\n    {\n      multipassToken,\n    },\n  )\n\n  const {\n    data: {\n      customerAccessTokenCreateWithMultipass: { customerAccessToken },\n    },\n  } = accessTokenResult\n\n  return customerAccessToken\n}\n\nexport default fetchCustomerAccessToken\n","import React from 'react'\nimport styled, { keyframes } from 'styled-components'\n\nconst bounce_circularG = keyframes`\n  0% {\n    transform: scale(1);\n  }\n\n  100% {\n    transform: scale(0.3);\n  }\n`\n\nconst StyledSpinner = styled.div`\n  position: relative;\n  width: 83px;\n  height: 83px;\n  margin: auto;\n\n  .circularG {\n    position: absolute;\n    background-color: rgb(0, 0, 0);\n    width: 19px;\n    height: 19px;\n    border-radius: 12px;\n    -o-border-radius: 12px;\n    -ms-border-radius: 12px;\n    -webkit-border-radius: 12px;\n    -moz-border-radius: 12px;\n    animation-name: ${bounce_circularG};\n    -o-animation-name: ${bounce_circularG};\n    -ms-animation-name: ${bounce_circularG};\n    -webkit-animation-name: ${bounce_circularG};\n    -moz-animation-name: ${bounce_circularG};\n    animation-duration: 1.25s;\n    -o-animation-duration: 1.25s;\n    -ms-animation-duration: 1.25s;\n    -webkit-animation-duration: 1.25s;\n    -moz-animation-duration: 1.25s;\n    animation-iteration-count: infinite;\n    -o-animation-iteration-count: infinite;\n    -ms-animation-iteration-count: infinite;\n    -webkit-animation-iteration-count: infinite;\n    -moz-animation-iteration-count: infinite;\n    animation-direction: normal;\n    -o-animation-direction: normal;\n    -ms-animation-direction: normal;\n    -webkit-animation-direction: normal;\n    -moz-animation-direction: normal;\n  }\n\n  #circularG_1 {\n    left: 0;\n    top: 33px;\n    animation-delay: 0.47s;\n    -o-animation-delay: 0.47s;\n    -ms-animation-delay: 0.47s;\n    -webkit-animation-delay: 0.47s;\n    -moz-animation-delay: 0.47s;\n  }\n\n  #circularG_2 {\n    left: 8px;\n    top: 8px;\n    animation-delay: 0.62s;\n    -o-animation-delay: 0.62s;\n    -ms-animation-delay: 0.62s;\n    -webkit-animation-delay: 0.62s;\n    -moz-animation-delay: 0.62s;\n  }\n\n  #circularG_3 {\n    top: 0;\n    left: 33px;\n    animation-delay: 0.78s;\n    -o-animation-delay: 0.78s;\n    -ms-animation-delay: 0.78s;\n    -webkit-animation-delay: 0.78s;\n    -moz-animation-delay: 0.78s;\n  }\n\n  #circularG_4 {\n    right: 8px;\n    top: 8px;\n    animation-delay: 0.94s;\n    -o-animation-delay: 0.94s;\n    -ms-animation-delay: 0.94s;\n    -webkit-animation-delay: 0.94s;\n    -moz-animation-delay: 0.94s;\n  }\n\n  #circularG_5 {\n    right: 0;\n    top: 33px;\n    animation-delay: 1.09s;\n    -o-animation-delay: 1.09s;\n    -ms-animation-delay: 1.09s;\n    -webkit-animation-delay: 1.09s;\n    -moz-animation-delay: 1.09s;\n  }\n\n  #circularG_6 {\n    right: 8px;\n    bottom: 8px;\n    animation-delay: 1.25s;\n    -o-animation-delay: 1.25s;\n    -ms-animation-delay: 1.25s;\n    -webkit-animation-delay: 1.25s;\n    -moz-animation-delay: 1.25s;\n  }\n\n  #circularG_7 {\n    left: 33px;\n    bottom: 0;\n    animation-delay: 1.4s;\n    -o-animation-delay: 1.4s;\n    -ms-animation-delay: 1.4s;\n    -webkit-animation-delay: 1.4s;\n    -moz-animation-delay: 1.4s;\n  }\n\n  #circularG_8 {\n    left: 8px;\n    bottom: 8px;\n    animation-delay: 1.56s;\n    -o-animation-delay: 1.56s;\n    -ms-animation-delay: 1.56s;\n    -webkit-animation-delay: 1.56s;\n    -moz-animation-delay: 1.56s;\n  }\n`\n\nfunction DottedSpinner({ className }) {\n  return (\n    <StyledSpinner className={className}>\n      <div id='circularG_1' className='circularG' />\n      <div id='circularG_2' className='circularG' />\n      <div id='circularG_3' className='circularG' />\n      <div id='circularG_4' className='circularG' />\n      <div id='circularG_5' className='circularG' />\n      <div id='circularG_6' className='circularG' />\n      <div id='circularG_7' className='circularG' />\n      <div id='circularG_8' className='circularG' />\n    </StyledSpinner>\n  )\n}\n\nexport default DottedSpinner\n","import React from 'react'\nimport styled from 'styled-components'\nimport { navigate } from '@reach/router'\nimport { documentToReactComponents } from '@contentful/rich-text-react-renderer'\n\n// Styles\nimport { desktopVw } from '../../styles/utils'\n\n// Utils\nimport { getCookie, getLinkPath, logout } from '../../utils'\n\n// Components\nimport TextButton from '../TextButton'\n\nimport DropdownIcon from '../../assets/dropdown.svg'\nimport { useSignoutUser } from '../../hooks/useSignoutUser'\nimport { ANALYTIC_COOKIES } from '../../utils/constants'\n\nconst StyledSidebarNav = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(80)};\n    width: ${desktopVw(235)};\n  }\n`\nconst SelectWrapper = styled.div`\n  position: relative;\n  margin: 0 0 30px;\n  box-sizing: border-box;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst MobileSelect = styled.select`\n  font-size: 20px;\n  padding: 20px;\n  background: none;\n  width: 100%;\n  -webkit-appearance: none;\n  border-radius: 0;\n  border: none;\n  border-bottom: 1px solid ${props => props.theme.colors.greyLighter};\n`\n\nconst Dropdown = styled(DropdownIcon)`\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 20px;\n  pointer-events: none;\n`\n\nconst paddingTop = 61\n\nconst Sticky = styled.div`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    position: sticky;\n    top: ${props => desktopVw(props.theme.header.desktop.height + paddingTop)};\n  }\n`\n\nconst WelcomeText = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    position: relative;\n    text-transform: uppercase;\n    font-weight: 500;\n    font-family: ${props => props.theme.fonts.heading};\n    font-size: ${desktopVw(12)};\n    line-height: ${desktopVw(15)};\n    margin-bottom: ${desktopVw(22)};\n    word-break: break-word;\n  }\n`\n\nconst NavWrapper = styled.div`\n  display: none;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: 100%;\n    display: block;\n  }\n`\n\nconst Nav = styled.nav`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    flex-direction: column;\n    width: ${desktopVw(170)};\n    margin-right: ${desktopVw(160)};\n    padding-bottom: ${desktopVw(15)};\n  }\n`\n\nconst NavItem = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n    margin-bottom: ${desktopVw(10)};\n  }\n`\n\nconst ContactDetails = styled.div`\n  display: none;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    line-height: ${desktopVw(15)};\n    text-transform: uppercase;\n    border-top: 1px solid ${props => props.theme.colors.silver};\n    font-size: ${desktopVw(10)};\n    padding-top: ${desktopVw(15)};\n    margin-bottom: ${desktopVw(14)};\n    width: ${desktopVw(138)};\n  }\n`\n\nconst Logout = styled(TextButton)`\n  font-size: 10px;\n  font-family: ${props => props.theme.fonts.primary};\n  color: ${props => props.theme.colors.greyLight};\n  text-transform: uppercase;\n  cursor: pointer;\n  background-image: ${props =>\n    `linear-gradient(${props.theme.colors.greyLight}, ${props.theme.colors.greyLight});`};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(10)};\n  }\n`\n\nconst SidebarNav = ({ menuList, contact, activeSlug, user }) => {\n  const { signOutUser } = useSignoutUser()\n\n  const handleChange = e => {\n    const { value } = e.target\n\n    if (value === 'logout') {\n      signOutUser()\n    } else navigate(value)\n  }\n\n  return (\n    <StyledSidebarNav>\n      <SelectWrapper>\n        <MobileSelect onChange={e => handleChange(e)} value={`/${activeSlug}`}>\n          {menuList.map(menuItem => (\n            <option key={menuItem.id} value={getLinkPath(menuItem)}>\n              {menuItem.text}\n            </option>\n          ))}\n          <option value='logout'>Logout</option>\n        </MobileSelect>\n        <Dropdown />\n      </SelectWrapper>\n      <Sticky>\n        <WelcomeText>\n          Hi <br /> {`${user.name}!`}\n        </WelcomeText>\n        <NavWrapper>\n          <Nav>\n            {menuList.map(menuItem => (\n              <NavItem key={menuItem.id}>\n                <TextButton\n                  to={getLinkPath(menuItem)}\n                  active={`/${activeSlug}` === getLinkPath(menuItem)}\n                >\n                  {menuItem.text}\n                </TextButton>\n              </NavItem>\n            ))}\n          </Nav>\n          <ContactDetails>\n            {documentToReactComponents(contact.json)}\n          </ContactDetails>\n          <Logout\n            onClick={signOutUser}\n            trackParams={{\n              trackInternal: true,\n              category: 'login',\n              action: 'account_logout',\n              context: {\n                login_email: user.email,\n                lb_user_id: getCookie(ANALYTIC_COOKIES.LB_USER_ID),\n              },\n            }}\n          >\n            Logout\n          </Logout>\n        </NavWrapper>\n      </Sticky>\n    </StyledSidebarNav>\n  )\n}\n\nexport default SidebarNav\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport Image from 'gatsby-image'\n\nimport { navigate } from '@reach/router'\n\nimport { desktopVw } from '../../styles/utils'\nimport { getCurrentUser, isLoggedIn } from '../../utils/auth'\n\nimport SidebarNav from './SidebarNav'\n\nconst StyledAccountWrapper = styled.div``\n\nconst Wrapper = styled.div`\n  position: relative;\n  height: 80px;\n  margin-bottom: -30px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: -${props => desktopVw(props.theme.header.desktop.height + 2)};\n    height: ${desktopVw(77)};\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n`\n\nconst Container = styled.div`\n  position: relative;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    padding: ${desktopVw(61)} ${desktopVw(80)} ${desktopVw(120)}\n      ${desktopVw(80)};\n  }\n`\n\nconst WelcomeText = styled.div`\n  position: absolute;\n  left: 20px;\n  bottom: 32px;\n  text-transform: uppercase;\n  font-weight: 500;\n  font-size: 30px;\n  font-family: ${props => props.theme.fonts.heading};\n  word-break: break-word;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst AccountWrapper = ({ children, heroImage, menu, contact, activeSlug }) => {\n  useEffect(() => {\n    if (!isLoggedIn()) {\n      navigate(`/log-in?redirecturi=${window.location.href}`)\n    }\n  }, [])\n\n  const user = getCurrentUser()\n\n  return (\n    <StyledAccountWrapper>\n      <Wrapper>\n        <WelcomeText>{`Hi ${user.name}!`}</WelcomeText>\n      </Wrapper>\n      <Container>\n        <SidebarNav\n          menuList={menu}\n          contact={contact}\n          activeSlug={activeSlug}\n          user={user}\n        />\n        <ContentWrapper>{children}</ContentWrapper>\n      </Container>\n    </StyledAccountWrapper>\n  )\n}\n\nexport default AccountWrapper\n","import { useState, useEffect } from 'react'\nimport { loadState, saveState } from '../utils/localStorage'\nimport { setCookie } from '../utils'\n\nconst useSwellSDK = (email, customerId, isReloadNotRequired) => {\n  const [initialized, setInitialized] = useState(false)\n  const loadReferralCouponCode = loadState('referralCouponCode')\n  const saveReferralCouponCode = saveState('referralCouponCode')\n  const [couponCode, setCouponCode] = useState(\n    loadReferralCouponCode && loadReferralCouponCode.code,\n  )\n  const [loading, setLoading] = useState(\n    loadReferralCouponCode ? !loadReferralCouponCode.code : true,\n  )\n  const [setup, setSetup] = useState(false)\n\n  const IS_WELCOME_POPUP_PREVIOUSLY_OPENED = '_quince_welcome_popup'\n  const WELCOME_COOKIE_EXPIRY_MINUTES = 1440\n\n  useEffect(() => {\n    if (!isReloadNotRequired) {\n      const swellSDK = document.querySelector('#swell-sdk')\n\n      if (swellSDK) {\n        swellSDK.parentNode.removeChild(swellSDK)\n      }\n\n      const script = document.createElement('script')\n      script.src =\n        'https://cdn-loyalty.yotpo.com/loader/Ll6pppZ6VQxK_x86N6mnnw.js'\n      script.id = 'swell-sdk'\n\n      document.head.appendChild(script)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!email || !customerId) return\n    const swellCustomerIdentification = document.querySelector(\n      '#swell-customer-identification',\n    )\n\n    if (swellCustomerIdentification) {\n      // Update if already exists\n      swellCustomerIdentification.setAttribute('data-id', customerId)\n      swellCustomerIdentification.setAttribute('data-email', email)\n\n      setInitialized(true)\n      return\n    }\n\n    const div = document.createElement('div')\n    div.setAttribute('id', 'swell-customer-identification')\n    div.setAttribute('data-authenticated', true)\n    div.setAttribute('data-email', email)\n    div.setAttribute('data-id', customerId)\n    div.style.display = 'none'\n\n    document.body.appendChild(div)\n\n    setInitialized(true)\n  }, [email, customerId])\n\n  const [customerDetails, setCustomerDetails] = useState(null)\n\n  useEffect(() => {\n    if (!initialized) return\n\n    if (typeof window !== 'undefined' && window.swellAPI) {\n      setCustomerDetails(window.swellAPI.getCustomerDetails())\n    } else {\n      document.addEventListener('swell:setup', function() {\n        setSetup(true)\n        setCustomerDetails(window.swellAPI.getCustomerDetails())\n      })\n    }\n  }, [initialized])\n\n  const [referralLink, setReferralLink] = useState(null)\n\n  useEffect(() => {\n    if (!customerDetails) return\n\n    if (!customerDetails.email) {\n      document.addEventListener('swell:setup', function() {\n        setSetup(true)\n        setCustomerDetails(window.swellAPI.getCustomerDetails())\n      })\n    }\n\n    setReferralLink(customerDetails.referralLink)\n  }, [customerDetails])\n\n  const showPopUp = () => {\n    if (!customerDetails && !initialized) return\n\n    window.swellAPI.showPopupByType('RewardsPopup')\n  }\n\n  const setReferralCouponCode = () => {\n    document.addEventListener('swell:referred:customer:discount', function(\n      event,\n    ) {\n      const eventDetails = event.detail\n      const generatedCouponCode = eventDetails.coupon_code\n      const savedCouponCode = loadReferralCouponCode\n        ? loadReferralCouponCode.code\n        : null\n\n      // Do not open welcome popup\n      setCookie(\n        IS_WELCOME_POPUP_PREVIOUSLY_OPENED,\n        true,\n        WELCOME_COOKIE_EXPIRY_MINUTES,\n      )\n\n      // Set coupon code which has been generated latest\n      if (generatedCouponCode) {\n        saveReferralCouponCode({ code: generatedCouponCode })\n        setCouponCode(generatedCouponCode)\n        setLoading(false)\n      } else {\n        setCouponCode(savedCouponCode)\n        setLoading(false)\n      }\n    })\n  }\n\n  return {\n    referralLink,\n    showPopUp,\n    setReferralCouponCode,\n    couponCode,\n    loading,\n    setup,\n  }\n}\n\nexport default useSwellSDK\n","import { useCallback } from 'react'\n\nimport useFetch from './useFetch'\n\nconst useReferralPoints = email => {\n  const { fetchData, response, error, loading } = useFetch()\n\n  const url = `https://api.onequince.com/referralEmails/referredCustomers?emailId=${email}`\n\n  const options = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  }\n\n  const fetchReferrals = useCallback(() => fetchData(url, options), [\n    url,\n    email,\n  ])\n\n  return {\n    fetchReferrals,\n    successfulReferrals: response && response.successfulReferrals,\n    invitedReferrals: response && response.invitedReferrals,\n  }\n}\n\nexport default useReferralPoints\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nconst StyledPageHeader = styled.div`\n  padding: 0 20px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0;\n    margin-bottom: ${desktopVw(45)};\n  }\n`\n\nconst Title = styled.h1`\n  display: none;\n  margin: 0 0 8px;\n  font-size: 40px;\n  line-height: 45px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    white-space: pre-wrap;\n    margin: 0 0 ${desktopVw(17)};\n    border-bottom: none;\n    font-family: ${props => props.theme.fonts.heading};\n    font-size: ${desktopVw(40)};\n    line-height: ${desktopVw(45)};\n    font-weight: 500;\n    padding: 0;\n  }\n`\nconst Text = styled.p`\n  margin: 0 0 34px;\n  font-size: 12px;\n  line-height: 20px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    font-size: ${desktopVw(12)};\n    font-weight: normal;\n    line-height: ${desktopVw(20)};\n    width: ${desktopVw(480)};\n  }\n`\n\nconst PageHeader = ({ className, title, text }) => {\n  return (\n    <StyledPageHeader className={className}>\n      <Title>{title}</Title>\n      <Text>{text}</Text>\n    </StyledPageHeader>\n  )\n}\n\nexport default PageHeader\n","import React from 'react'\nimport styled, { keyframes } from 'styled-components'\n\nconst load = keyframes`\n  from {\n    left: -150px;\n  }\n  to   {\n    left: 100%;\n  }\n`\n\nconst Skeleton = styled.div`\n  box-shadow: 0 4px 10px 0 rgba(33, 33, 33, 0.15);\n  border-radius: 4px;\n  height: 200px;\n  position: relative;\n  overflow: hidden;\n  ::before {\n    content: '';\n    display: block;\n    position: absolute;\n    left: -150px;\n    top: 0;\n    height: 100%;\n    width: 150px;\n    background: linear-gradient(\n      to right,\n      transparent 0%,\n      #e8e8e8 50%,\n      transparent 100%\n    );\n    animation: ${load} 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;\n  }\n  @key;\n`\n\nconst SkeletonLoader = ({ className }) => <Skeleton className={className} />\n\nexport default SkeletonLoader\n","import React, { useEffect, useRef, useState } from 'react'\nimport styled, { keyframes } from 'styled-components'\nimport Image from 'gatsby-image'\nimport { graphql } from 'gatsby'\n\nimport { desktopVw } from '../../styles/utils'\nimport { getCurrentUser } from '../../utils/auth'\n\nimport useReferralPoints from '../../hooks/useReferralPoints'\nimport useSwellSDK from '../../hooks/useSwellSDK'\nimport useCustomer from '../../hooks/useCustomer'\nimport {\n  decodeIdFromGraphQLResponse,\n  extractQueryParamFromPageLocation,\n  fallbackCopyTextToClipboard,\n  saveState,\n} from '../../utils'\n\nimport AccountWrapper from '../../components/Account/AccountWrapper'\nimport PageHeader from '../../components/Account/PageHeader'\nimport { CopyField } from '../../components/FormElements'\nimport ReferralPoints from '../../components/ReferAndEarn/ReferralPoints'\nimport Button from '../../components/Button'\nimport Modal from '../../components/Modal'\nimport SkeletonLoader from '../../components/common/SkeletonLoader'\nimport DottedSpinner from '../../components/common/DottedSpinner'\nimport eventTracker from '../../trackers/EventTracker'\nimport EventType from '../../trackers/eventType'\nimport useFetch from '../../hooks/useFetch'\nimport { colors } from '../../styles/theme'\nimport useDetectDevices from '../../hooks/useDetectDevices'\n\nimport RightArrow from '../../assets/right_arrow.svg'\n\nconst saveFirstPurchaseCouponCode = saveState('firstPurchaseCouponCode')\n\nconst StyledLoader = styled(SkeletonLoader)`\n  height: 56px;\n  margin: 0 0 18px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(54)};\n    margin: 0 0 ${desktopVw(20)};\n  }\n`\n\nconst StyledModal = styled(Modal)`\n  height: 100%;\n  width: 100%;\n  background-color: white;\n\n  .modal__close_button {\n    top: 15px;\n    right: 20px;\n    width: 17px;\n\n    path {\n      fill: ${({ theme }) => theme.colors.secondary};\n    }\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    border-radius: 4px;\n    border: 2px solid ${props => props.theme.colors.primary};\n    height: 700px;\n    width: 866px;\n    .modal__close_button {\n      display: block;\n      top: 36px;\n      right: 36px;\n      width: 20px;\n\n      path {\n        fill: ${({ theme }) => theme.colors.primary};\n      }\n    }\n  }\n`\n\nconst RewardsContainer = styled.div`\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n  }\n`\n\nconst Container = styled.div`\n  padding: 0 20px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0;\n  }\n`\n\nconst Sidebar = styled.div`\n  background: ${({ theme }) => theme.colors.primary};\n  color: ${({ theme }) => theme.colors.secondary};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 35px 22px;\n    width: 320px;\n    text-align: center;\n    h1 {\n      text-transform: uppercase;\n      font-size: 18px;\n      padding-bottom: 7px;\n      border-bottom: ${({ theme }) => `1px solid ${theme.colors.silver}`};\n    }\n  }\n`\n\nconst Points = styled.p`\n  text-align: center;\n  padding: 10px;\n\n  p {\n    font-weight: 500;\n    font-size: 21px;\n  }\n\n  span {\n    font-weight: normal;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: 21px;\n    padding: 0;\n    margin-top: 15px;\n    span {\n      font-size: 16px;\n    }\n  }\n`\n\nconst Content = styled.div`\n  padding: 30px 20px;\n  width: 100%;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n  }\n`\n\nconst RedeemBody = styled.div`\n  overflow-y: scroll;\n  height: 100%;\n`\n\nconst RedeemModal = styled(Modal)`\n  width: 100%;\n  height: 100%;\n\n  .modal__close_button {\n    top: 15px;\n    right: 20px;\n    width: 17px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: 452px;\n    height: fit-content;\n    left: 120px;\n    .modal__close_button {\n      display: block;\n      top: 15px;\n      right: 20px;\n      width: 15px;\n    }\n  }\n`\n\nconst RedeemContainer = styled.div`\n  height: 100%;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n  }\n`\n\nconst RedeemContent = styled.div`\n  background: ${({ theme }) => theme.colors.primary};\n  color: ${({ theme }) => theme.colors.secondary};\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px 0;\n`\n\nconst Header = styled.h3`\n  padding: 15px 25px;\n`\n\nconst Description = styled.p`\n  text-align: center;\n  padding: 0 10px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: 16px;\n  }\n`\n\nconst RedeemButton = styled(Button)`\n  background: ${({ theme }) => theme.colors.secondary};\n  color: ${({ theme }) => theme.colors.primary};\n  border: 1px solid transparent;\n  border-radius: 4px;\n  padding: 10px 15px;\n  margin-top: 20px;\n\n  &:hover {\n    background: ${({ theme }) => theme.colors.silver};\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n  }\n`\n\nconst Title = styled.p`\n  text-transform: uppercase;\n  border-bottom: ${({ theme }) => `1px solid ${theme.colors.silver}`};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: 28px;\n    margin-bottom: 60px;\n  }\n`\n\nconst OptionPanel = styled.div`\n  cursor: pointer;\n  margin: auto auto 20px;\n  border-bottom: 2px solid #e8e9ea;\n  padding-bottom: 20px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: 380px;\n    margin-bottom: 50px;\n    padding-bottom: 0;\n    border-bottom: 0;\n    &:last-child {\n      padding-bottom: 75px;\n    }\n\n    h3 {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 50px;\n      border: ${({ theme }) => `1px solid ${theme.colors.silver}`};\n    }\n\n    p {\n      padding: 10px;\n      text-align: center;\n      background: ${({ theme }) => theme.colors.primary};\n      color: ${({ theme }) => theme.colors.secondary};\n    }\n  }\n`\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  svg {\n    width: 24px;\n    height: 24px;\n    margin: auto 35px auto auto;\n  }\n`\n\nconst Summary = styled.div`\n  margin-bottom: 43px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    margin-top: ${desktopVw(50)};\n    margin-bottom: ${desktopVw(61)};\n  }\n`\n\nconst FeaturedImage = styled(Image)`\n  width: 100%;\n  height: 328px;\n  margin-bottom: 25px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(440)};\n    height: ${desktopVw(433)};\n    margin-right: ${desktopVw(40)};\n    margin-bottom: 0;\n  }\n`\n\nconst SummaryContent = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(400)};\n    padding-top: ${desktopVw(10)};\n  }\n`\n\nconst SummaryText = styled.div`\n  h2 {\n    width: 280px;\n    font-family: ${props => props.theme.fonts.primary};\n    font-size: 25px;\n    font-weight: 200;\n    line-height: 30px;\n    margin-bottom: 28px;\n  }\n\n  p {\n    font-size: 14px;\n    line-height: 25px;\n    margin-bottom: 12px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    h2 {\n      font-size: ${desktopVw(25)};\n      font-weight: normal;\n      line-height: ${desktopVw(30)};\n      margin-bottom: ${desktopVw(30)};\n      width: ${desktopVw(280)};\n    }\n\n    p {\n      font-size: ${desktopVw(14)};\n      line-height: ${desktopVw(25)};\n      width: ${desktopVw(360)};\n      margin-bottom: ${desktopVw(12)};\n    }\n  }\n`\n\nconst RedeemPointsButtonWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n  }\n`\n\nconst RedeemPointsButton = styled(Button)`\n  width: 100%;\n  margin-bottom: 20px;\n  font-size: 20px;\n\n  &:first-child {\n    margin-right: 10px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: 20px;\n    font-size: 20px;\n    padding-right: 2px;\n    padding-left: 2px;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  display: block;\n  font-size: 20px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(20)};\n  }\n`\n\nconst ReferralPointsWrapper = styled.div`\n  border-top: 1px solid ${props => props.theme.colors.greyLight};\n  margin-bottom: 38px;\n  padding-top: 34px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(58)};\n    padding-top: ${desktopVw(54.5)};\n\n    .referral-points__total {\n      justify-content: flex-end;\n    }\n  }\n`\n\nconst rotate = keyframes`\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`\n\nconst Loader = styled.div`\n  height: 24px;\n  width: 24px;\n  color: ${props => props.theme.colors.greyLighter};\n  display: inline-block;\n  position: relative;\n  border: 3px solid;\n  border-radius: 50%;\n  border-right-color: ${props => props.theme.colors.greyLight};\n  animation: ${rotate} 1s linear infinite;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(24)};\n    border-width: ${desktopVw(3)};\n    width: ${desktopVw(24)};\n  }\n`\n\nconst CopyButton = styled(RedeemButton)``\n\nfunction RedeemOptions({ redeemObj = {}, customer_external_id }) {\n  const { email } = getCurrentUser()\n  const [copied, setCopied] = useState(false)\n\n  const [redeemModalOpen, setRedeemModalOpen] = useState(false)\n  const { response, fetchData, loading } = useFetch()\n\n  const { devices } = useDetectDevices()\n\n  useEffect(() => {\n    if (response?.reward_text) {\n      saveFirstPurchaseCouponCode({ code: response?.reward_text })\n    }\n  }, [response])\n\n  const onRedeem = () => {\n    eventTracker.track(EventType.BUTTON_CLICK, {\n      action: 'click_redeem',\n      value: redeemObj.name,\n    })\n    fetchData(`${process.env.GATSBY_YOTPO_ENDPOINT}/api/v1/point_redemptions`, {\n      headers: { 'content-type': 'application/json' },\n      method: 'POST',\n      body: JSON.stringify({\n        redemption_option_id: redeemObj.id,\n        customer_email: email,\n        customer_external_id,\n        merchant_id: process.env.GATSBY_YOTPO_MERCHANT_ID,\n      }),\n    })\n  }\n\n  function getDescription() {\n    if (response?.reward_text)\n      return (\n        <p style={{ fontSize: 15 }}>\n          Thanks for redeeming! Here's your coupon code {response?.reward_text}.\n          It'll be automatically applied at checkout.\n        </p>\n      )\n\n    return response?.errors?.amount ? (\n      <p style={{ color: colors.red }}>{response?.errors?.amount?.[0]}</p>\n    ) : (\n      redeemObj.description\n    )\n  }\n\n  return (\n    <>\n      <OptionPanel\n        onClick={() => {\n          setRedeemModalOpen(true)\n          eventTracker.track(EventType.MODAL_OPEN, {\n            action: 'rewards_popup_option',\n            label: redeemObj.name,\n          })\n        }}\n      >\n        <Wrapper>\n          <div style={{ width: '100%' }}>\n            <h3>{redeemObj.name}</h3>\n            <p>{redeemObj.cost_text}</p>\n          </div>\n          {devices.mobile && <RightArrow />}\n        </Wrapper>\n      </OptionPanel>\n      <RedeemModal\n        open={redeemModalOpen}\n        onClose={() => {\n          setRedeemModalOpen(false)\n          eventTracker.track(EventType.MODAL_CLOSE, {\n            action: 'rewards_popup_option',\n            label: redeemObj.name,\n          })\n        }}\n      >\n        <RedeemContainer>\n          <Header>{redeemObj.name}</Header>\n          <RedeemContent>\n            {!loading && <Description>{getDescription()}</Description>}\n            {response?.reward_text ? (\n              <>\n                <CopyButton\n                  onClick={() => {\n                    fallbackCopyTextToClipboard(response?.reward_text)\n                    setCopied(true)\n                    eventTracker.track(EventType.BUTTON_CLICK, {\n                      action: 'copy_coupon',\n                      value: response?.reward_text,\n                    })\n                  }}\n                >\n                  Copy Coupon\n                </CopyButton>\n                {copied && (\n                  <p style={{ marginTop: 15 }}>Successfully copied.</p>\n                )}\n              </>\n            ) : (\n              <RedeemButton onClick={onRedeem} loading={loading}>\n                Redeem\n              </RedeemButton>\n            )}\n          </RedeemContent>\n        </RedeemContainer>\n      </RedeemModal>\n    </>\n  )\n}\n\nconst MyRewards = ({ data }) => {\n  const page = data.contentfulAccountPage\n\n  const { email } = getCurrentUser()\n\n  const { response, fetchData } = useFetch()\n  const { response: activeRedemptions, fetchData: fetchRedemption } = useFetch()\n\n  const {\n    fetchReferrals,\n    successfulReferrals,\n    invitedReferrals,\n  } = useReferralPoints(email)\n\n  const { customer } = useCustomer()\n\n  const { showPopUp } = useSwellSDK(\n    email,\n    customer && decodeIdFromGraphQLResponse(customer.id),\n  )\n\n  const [rewardsPopUpOpened, setRewardsPopUpOpened] = useState(false)\n\n  const [earnedPoints, setEarnedPoints] = useState(0)\n  const [dataLoader, setDataLoader] = useState(true)\n\n  function openRewardsPopup() {\n    eventTracker.track(EventType.MODAL_OPEN, {\n      action: 'rewards_popup',\n    })\n    setRewardsPopUpOpened(true)\n  }\n\n  function closeRewardsPopup() {\n    eventTracker.track(EventType.MODAL_CLOSE, {\n      action: 'rewards_popup',\n    })\n    setRewardsPopUpOpened(false)\n  }\n\n  function addSwellPopUpCloseListener() {\n    const iframe = document.getElementsByTagName('iframe')[0]\n    const iDoc = iframe.contentWindow || iframe.contentDocument\n    iDoc?.document\n      ?.querySelector('.hide-popup')\n      ?.addEventListener('click', function() {\n        trackCloseSwellPopup()\n      })\n  }\n\n  function openSwellPopup() {\n    eventTracker.track(EventType.MODAL_OPEN, {\n      action: 'rewards_swell_popup',\n    })\n    showPopUp()\n    setTimeout(() => {\n      addSwellPopUpCloseListener()\n    }, 1000)\n  }\n\n  function trackCloseSwellPopup() {\n    eventTracker.track(EventType.MODAL_CLOSE, {\n      action: 'rewards_swell_popup',\n    })\n  }\n\n  useEffect(() => {\n    if (customer) {\n      fetchData(\n        `${\n          process.env.GATSBY_YOTPO_ENDPOINT\n        }/api/v1/customer_details?customer_email=${email}&customer_external_id=${decodeIdFromGraphQLResponse(\n          customer.id,\n        )}&merchant_id=${process.env.GATSBY_YOTPO_MERCHANT_ID}`,\n      )\n    }\n    fetchRedemption(\n      `${process.env.GATSBY_YOTPO_ENDPOINT}/api/v2/redemption_options?merchant_id=${process.env.GATSBY_YOTPO_MERCHANT_ID}&api_key=${process.env.GATSBY_YOTPO_API_KEY}`,\n    )\n  }, [customer])\n\n  useEffect(() => {\n    if (extractQueryParamFromPageLocation('open_rewards_popup') === 'true') {\n      openRewardsPopup()\n    }\n  }, [])\n\n  useEffect(() => {\n    fetchReferrals()\n  }, [])\n\n  useEffect(() => {\n    if (!successfulReferrals) return\n\n    const earned = successfulReferrals.reduce((acc, v) => acc + v.points, 0)\n    setDataLoader(false)\n    setEarnedPoints(earned)\n  }, [successfulReferrals])\n\n  const { devices } = useDetectDevices()\n\n  return (\n    <AccountWrapper\n      heroImage={page.hero}\n      menu={page.menuList}\n      contact={page.contact}\n      activeSlug={page.slug}\n    >\n      <PageHeader title={page.title.title} text={page.text.text} />\n\n      <StyledModal open={rewardsPopUpOpened} onClose={closeRewardsPopup}>\n        <RewardsContainer>\n          <Sidebar>\n            {devices.desktop && <h1>Your Rewards</h1>}\n            <Points>\n              <p>\n                {response?.points_balance} <span>POINTS</span>\n              </p>\n            </Points>\n          </Sidebar>\n          <Content>\n            {devices.desktop && <Title>Redeem Points</Title>}\n            <RedeemBody>\n              {(activeRedemptions || []).length > 0 &&\n                activeRedemptions.map(redObj => (\n                  <RedeemOptions\n                    key={redObj.id}\n                    redeemObj={redObj}\n                    customer_external_id={\n                      customer?.id\n                        ? decodeIdFromGraphQLResponse(customer?.id)\n                        : null\n                    }\n                  />\n                ))}\n            </RedeemBody>\n          </Content>\n        </RewardsContainer>\n      </StyledModal>\n\n      <Container>\n        <Summary>\n          <FeaturedImage\n            fluid={page.featuredImage.fluid}\n            alt={page.featuredImage.description}\n          />\n          <SummaryContent>\n            <SummaryText>\n              {dataLoader && <Loader />}\n              {!dataLoader && earnedPoints > 0 && (\n                <h2>\n                  You've already earned <b>{earnedPoints.toLocaleString()}</b>{' '}\n                  points via referrals\n                </h2>\n              )}\n              {!dataLoader && earnedPoints <= 0 && (\n                <h2>Earn and redeem points by referring friends</h2>\n              )}\n              <p>Invite your friends and earn $10 using link below</p>\n            </SummaryText>\n            {!response?.referral_code ? (\n              <StyledLoader />\n            ) : (\n              <CopyField value={`http://rwrd.io/${response?.referral_code}`} />\n            )}\n            <RedeemPointsButtonWrapper>\n              <RedeemPointsButton\n                black\n                onClick={openRewardsPopup}\n                trackParams={{\n                  trackInternal: true,\n                  trackGA: true,\n                  category: 'referral',\n                  action: 'click_redeem_points',\n                }}\n              >\n                Redeem Points\n              </RedeemPointsButton>\n              <RedeemPointsButton\n                onClick={openSwellPopup}\n                trackParams={{\n                  trackInternal: true,\n                  trackGA: true,\n                  category: 'referral',\n                  action: 'click_earn_points',\n                }}\n              >\n                Earn Points\n              </RedeemPointsButton>\n            </RedeemPointsButtonWrapper>\n            <StyledButton\n              to='/refer-and-earn'\n              trackParams={{\n                trackInternal: true,\n                trackGA: true,\n                category: 'referral',\n                action: 'click_invite_friends',\n              }}\n            >\n              Invite Friends\n            </StyledButton>\n          </SummaryContent>\n        </Summary>\n        <ReferralPointsWrapper>\n          <ReferralPoints\n            title='Successfully referred friends'\n            referrals={successfulReferrals && successfulReferrals}\n            totalText='Total earned points'\n            noReferralsMsg='No successful referrals yet'\n          />\n        </ReferralPointsWrapper>\n        <ReferralPointsWrapper>\n          <ReferralPoints\n            title='Your referrals'\n            referrals={invitedReferrals && invitedReferrals}\n            totalText='Total potential points'\n            noReferralsMsg='No invited referrals'\n          />\n        </ReferralPointsWrapper>\n      </Container>\n    </AccountWrapper>\n  )\n}\n\nexport default MyRewards\n\nexport const MyRewardsQuery = graphql`\n  query MyRewards($id: String!) {\n    contentfulAccountPage(id: { eq: $id }) {\n      id\n      slug\n      title {\n        title\n      }\n      pageType\n      hero {\n        fluid(maxWidth: 3840) {\n          ...GatsbyContentfulFluid_withWebp\n        }\n      }\n      menuList {\n        ...Link\n      }\n      featuredImage {\n        fluid(maxWidth: 640) {\n          ...GatsbyContentfulFluid_withWebp\n        }\n      }\n      text {\n        text\n      }\n      contact {\n        json\n      }\n    }\n  }\n`\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nconst StyledReferralPoints = styled.div``\n\nconst Overview = styled.div`\n  display: block;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(15)};\n  }\n`\n\nconst OverviewTitle = styled.div`\n  width: 280px;\n  font-size: 25px;\n  line-height: 30px;\n  margin-bottom: 11px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(25)};\n    line-height: ${desktopVw(30)};\n    width: ${desktopVw(280)};\n    margin-bottom: ${desktopVw(35)};\n  }\n`\n\nconst RewardOverviewText = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n  line-height: 25px;\n\n  &:last-child {\n    margin-bottom: 13px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(14)};\n    line-height: ${desktopVw(25)};\n\n    &:last-child {\n      margin-bottom: ${desktopVw(13)};\n    }\n  }\n`\n\nconst Total = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding-top: 18px;\n  font-size: 19px;\n  line-height: 25px;\n  border-top: 1px solid ${props => props.theme.colors.greyLight};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(19)};\n    line-height: ${desktopVw(25)};\n    padding-top: ${desktopVw(18)};\n  }\n`\n\nconst TotalText = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(32)};\n  }\n`\n\nconst NoReferrals = styled.p`\n  color: ${props => props.theme.colors.greyLight};\n`\n\nconst ReferralPoints = ({ title, referrals, totalText, noReferralsMsg }) => {\n  const [totalPoints, setTotalPoints] = useState(null)\n\n  useEffect(() => {\n    if (!referrals) return\n\n    const total = referrals.reduce((acc, v) => acc + v.points, 0)\n\n    setTotalPoints(total)\n  }, [referrals])\n\n  return (\n    <StyledReferralPoints className='referral-points'>\n      <Overview>\n        <OverviewTitle>{title}</OverviewTitle>\n        {referrals &&\n          referrals.map(({ email, points }, i) => (\n            <RewardOverviewText key={`${email}${i}`}>\n              <div>{email}</div>\n              <div>{parseInt(points).toLocaleString()}</div>\n            </RewardOverviewText>\n          ))}\n      </Overview>\n      {referrals && referrals.length > 0 ? (\n        <Total className='referral-points__total'>\n          <TotalText>{totalText}</TotalText>\n          {totalPoints ? parseInt(totalPoints).toLocaleString() : 0}\n        </Total>\n      ) : (\n        <NoReferrals>{noReferralsMsg}</NoReferrals>\n      )}\n    </StyledReferralPoints>\n  )\n}\n\nexport default ReferralPoints\n","import { gql } from '@apollo/client'\n\nconst query = gql`\n  query ShopifyCustomer($customerAccessToken: String!) {\n    customer(customerAccessToken: $customerAccessToken) {\n      id\n      addresses(first: 250) {\n        edges {\n          node {\n            id\n            address1\n            address2\n            country\n            city\n            province\n            provinceCode\n            zip\n            company\n            name\n            phone\n            firstName\n            lastName\n          }\n        }\n      }\n      defaultAddress {\n        id\n        address1\n        address2\n        country\n        city\n        province\n        provinceCode\n        zip\n        company\n        name\n        phone\n        firstName\n        lastName\n      }\n    }\n  }\n`\n\n/**\n * https://help.shopify.com/en/api/storefront-api/reference/queryroot\n *\n * @param {{handle: string}} variables\n */\nconst queryShopifyCustomer = (client, variables) =>\n  client.query({ query, variables })\n\nexport default queryShopifyCustomer\n","import { gql } from '@apollo/client'\n\nconst query = gql`\n  query ShopifyCustomer($customerAccessToken: String!) {\n    customer(customerAccessToken: $customerAccessToken) {\n      id\n      addresses(first: 250) {\n        edges {\n          node {\n            id\n            address1\n            address2\n            country\n            city\n            province\n            provinceCode\n            zip\n            company\n            name\n            phone\n            firstName\n            lastName\n          }\n        }\n      }\n      defaultAddress {\n        id\n        address1\n        address2\n        country\n        city\n        province\n        provinceCode\n        zip\n        company\n        name\n        phone\n        firstName\n        lastName\n      }\n    }\n  }\n`\n\n/**\n *\n * NOTE: Separate from queryShopifyCustomer - Because of no-cache policy\n *\n * */\nconst queryShopifyLatestCustomer = (client, variables) =>\n  client.query({ query, variables, fetchPolicy: 'no-cache' })\n\nexport default queryShopifyLatestCustomer\n","import fetchCustomerAccessToken from './fetchCustomerAccessToken'\nimport { loadState, saveState } from '../utils/localStorage'\n\nconst saveCustomerAccessToken = saveState('customerAccessToken')\n\nconst loadCustomerAccessToken = async client => {\n  const customerAccessToken = loadState('customerAccessToken')\n  if (\n    !customerAccessToken ||\n    Date.parse(customerAccessToken.expiresAt) < new Date()\n  ) {\n    console.log('fetching accessToken')\n    const newAccessToken = await fetchCustomerAccessToken(client)\n\n    if (newAccessToken != null) {\n      saveCustomerAccessToken(newAccessToken)\n    }\n\n    return newAccessToken\n  }\n  return customerAccessToken\n}\n\nexport default loadCustomerAccessToken\n","import { useState, useEffect, useContext } from 'react'\n\n// Shopify\nimport queryShopifyCustomer from '../shopify/queryCustomer'\nimport queryShopifyLatestCustomer from '../shopify/queryLatestCustomer'\n\n// Context\nimport { StoreContext } from '../contexts'\n\n// Utils\nimport loadCustomerAccessToken from '../shopify/loadCustomerAccessToken'\n\nconst useCustomer = () => {\n  const stores = useContext(StoreContext)\n  const [customer, setCustomer] = useState(null)\n  const [refreshCustomerData, setRefreshCustomerData] = useState(false)\n  const [loading, setLoading] = useState(false)\n\n  const getCustomer = async () => {\n    setLoading(true)\n    const customerAccessToken = await loadCustomerAccessToken(\n      stores.lastbrand.client,\n    )\n    const { data } = await queryShopifyCustomer(stores.lastbrand.client, {\n      customerAccessToken: customerAccessToken.accessToken,\n    })\n    setCustomer(data.customer)\n    setLoading(false)\n  }\n\n  const getLatestCustomer = async () => {\n    const customerAccessToken = await loadCustomerAccessToken(\n      stores.lastbrand.client,\n    )\n    const { data } = await queryShopifyLatestCustomer(stores.lastbrand.client, {\n      customerAccessToken: customerAccessToken.accessToken,\n    })\n    setCustomer(data.customer)\n  }\n\n  const refreshCustomer = () => {\n    getLatestCustomer()\n    setRefreshCustomerData(true)\n  }\n\n  useEffect(() => {\n    async function checkRefreshCustomer() {\n      const customerAccessToken = await loadCustomerAccessToken(\n        stores.lastbrand.client,\n      )\n      if (customerAccessToken && !refreshCustomerData) {\n        getCustomer()\n      } else if (!refreshCustomerData) {\n        setCustomer(null)\n      }\n    }\n\n    checkRefreshCustomer()\n  }, [refreshCustomerData])\n\n  return { customer, refreshCustomer, loading }\n}\n\nexport default useCustomer\n"],"sourceRoot":""}