(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Eqht:function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("HaE+")),i=n("v4IS"),s=n("MUpH"),c=n("VX74");function d(){var e=Object(s.a)(["\n  mutation customerAccessTokenCreateWithMultipass($multipassToken: String!) {\n    customerAccessTokenCreateWithMultipass(multipassToken: $multipassToken) {\n      customerAccessToken {\n        accessToken\n        expiresAt\n      }\n      customerUserErrors {\n        code\n        field\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}var l=Object(c.gql)(d()),u=function(e,t){return e.mutate({mutation:l,variables:t})},m=n("7Qib"),p=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,s,c,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.a.user){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(m.db)();case 4:return n=e.sent,(r=new Headers).append("Content-Type","application/json"),r.append("Authorization",n.idToken.jwtToken),e.next=10,fetch("https://0cw6yaidhb.execute-api.ap-south-1.amazonaws.com/dev",{method:"GET",headers:r});case 10:return o=e.sent,e.next=13,o.json();case 13:return s=e.sent,e.next=16,u(t,{multipassToken:s});case 16:return c=e.sent,d=c.data.customerAccessTokenCreateWithMultipass.customerAccessToken,e.abrupt("return",d);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=p},"N3/d":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("vOnD"),i=n("ovEV"),s=n("VTVh"),c=n("QvnU"),d=n("5Wrh"),l=o.d.form.withConfig({displayName:"Form__StyledForm",componentId:"sc-19g2osz-0"})(["@media (min-width:","px){min-width:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(720)),u=o.d.div.withConfig({displayName:"Form__FieldsContainer",componentId:"sc-19g2osz-1"})(["@media (min-width:","px){margin:0 -",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(10)),m=Object(o.d)(s.d).withConfig({displayName:"Form__StyledContainer",componentId:"sc-19g2osz-2"})(["&.container--radio-selection{+ div:not(.container--radio-selection){margin-top:32px;}}@media (min-width:","px){padding:0 ",";&.container__half{display:inline-flex;flex-direction:column;width:50%;box-sizing:border-box;}&.container--radio-selection{+ div:not(.container--radio-selection){margin-top:",";}}}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(10),Object(i.b)(36)),p=Object(o.d)(d.a).withConfig({displayName:"Form__SubmitButton",componentId:"sc-19g2osz-3"})(["display:block;font-family:",";width:100%;&:disabled{background:",";cursor:initial;border-color:",";}@media (min-width:","px){margin:0 auto;margin-top:",";width:auto;}"],(function(e){return e.theme.fonts.primary}),(function(e){return e.theme.colors.greyLighter}),(function(e){return e.theme.colors.greyLighter}),(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(30)),b=o.d.input.withConfig({displayName:"Form__CheckBox",componentId:"sc-19g2osz-4"})(["&:checked + label{background:",";color:",";border-color:",";}"],(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.primary})),f=o.d.div.withConfig({displayName:"Form__DefaultAddressContainer",componentId:"sc-19g2osz-5"})(["margin:auto;"]);t.a=function(e){var t=e.children,n=e.fields,r=e.title,o=e.register,i=e.errors,d=e.formValues,h=e.handleSubmit,g=e.disableSubmit,y=e.submitButtonText,k=e.loading,v=e.defaultAddressCheckbox,x=void 0!==v&&v,j=e.onCheckboxChange;return a.a.createElement(l,{onSubmit:h},a.a.createElement(c.a,{title:r}),a.a.createElement(u,null,n.map((function(e,t){var n;switch(e.__typename){case"ContentfulInput":return a.a.createElement(a.a.Fragment,{key:e.id},"text"===e.type&&a.a.createElement(m,{className:!e.width&&"container__half"},a.a.createElement(s.i,((n={placeholder:e.placeholder,required:e.required,"aria-label":e.label,name:e.name,defaultValue:d&&d[e.name],type:e.type,register:o,errors:i}).required=!1!==e.required,n))),"textarea"===e.type&&a.a.createElement(m,{className:!e.width&&"container__half"},a.a.createElement(s.p,{name:e.name,placeholder:e.placeholder,defaultValue:d&&d[e.name],register:o,errors:i,required:e.required})));case"ContentfulRadio":return a.a.createElement(a.a.Fragment,{key:e.id},"rating"===e.type&&a.a.createElement(m,null,a.a.createElement(s.n,{name:e.name,range:e.range,register:o,errors:i})),"range"===e.type&&a.a.createElement(m,{className:"container--radio-selection"},a.a.createElement(s.m,{label:e.label,name:e.name,range:e.range,register:o,errors:i,displayValues:e.displayValues})),"radio"===e.type&&a.a.createElement(m,null,a.a.createElement(s.l,{label:e.label,name:e.name,options:e.radioOptions,register:o,errors:i})));case"ContentfulSelect":return a.a.createElement(m,{key:e.id,className:!e.width&&"container__half"},a.a.createElement(s.o,{label:e.label,name:e.name,options:e.options,register:o,defaultValue:d&&d[e.name],errors:i}));default:return null}})),t&&a.a.createElement(m,null,t),x&&a.a.createElement(f,null,a.a.createElement(b,{type:"checkbox",name:"Default Address",defaultChecked:!1,onChange:j})," ","Set as default address"),a.a.createElement(p,{black:!0,type:"submit",loading:k,disabled:g},y)))}},NAOw:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("vOnD"),i=(n("9eSz"),n("YwZP")),s=n("ovEV"),c=n("X4fA"),d=n("R8uD"),l=n("7Qib"),u=n("9FQX"),m=n("jMDs"),p=n.n(m),b=n("aD9n"),f=n("ydnR"),h=o.d.div.withConfig({displayName:"SidebarNav__StyledSidebarNav",componentId:"rib84p-0"})(["@media (min-width:","px){margin-right:",";width:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(s.b)(80),Object(s.b)(235)),g=o.d.div.withConfig({displayName:"SidebarNav__SelectWrapper",componentId:"rib84p-1"})(["position:relative;margin:0 0 30px;box-sizing:border-box;@media (min-width:","px){display:none;}"],(function(e){return e.theme.breakpoints.desktopSmall})),y=o.d.select.withConfig({displayName:"SidebarNav__MobileSelect",componentId:"rib84p-2"})(["font-size:20px;padding:20px;background:none;width:100%;-webkit-appearance:none;border-radius:0;border:none;border-bottom:1px solid ",";"],(function(e){return e.theme.colors.greyLighter})),k=Object(o.d)(p.a).withConfig({displayName:"SidebarNav__Dropdown",componentId:"rib84p-3"})(["position:absolute;top:50%;transform:translateY(-50%);right:20px;pointer-events:none;"]),v=o.d.div.withConfig({displayName:"SidebarNav__Sticky",componentId:"rib84p-4"})(["display:none;@media (min-width:","px){display:block;position:sticky;top:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),(function(e){return Object(s.b)(e.theme.header.desktop.height+61)})),x=o.d.div.withConfig({displayName:"SidebarNav__WelcomeText",componentId:"rib84p-5"})(["@media (min-width:","px){position:relative;text-transform:uppercase;font-weight:500;font-family:",";font-size:",";line-height:",";margin-bottom:",";word-break:break-word;}"],(function(e){return e.theme.breakpoints.desktopSmall}),(function(e){return e.theme.fonts.heading}),Object(s.b)(12),Object(s.b)(15),Object(s.b)(22)),j=o.d.div.withConfig({displayName:"SidebarNav__NavWrapper",componentId:"rib84p-6"})(["display:none;@media (min-width:","px){height:100%;display:block;}"],(function(e){return e.theme.breakpoints.desktopSmall})),w=o.d.nav.withConfig({displayName:"SidebarNav__Nav",componentId:"rib84p-7"})(["@media (min-width:","px){display:flex;flex-direction:column;width:",";margin-right:",";padding-bottom:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(s.b)(170),Object(s.b)(160),Object(s.b)(15)),O=o.d.div.withConfig({displayName:"SidebarNav__NavItem",componentId:"rib84p-8"})(["@media (min-width:","px){font-size:",";margin-bottom:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(s.b)(12),Object(s.b)(10)),A=o.d.div.withConfig({displayName:"SidebarNav__ContactDetails",componentId:"rib84p-9"})(["display:none;@media (min-width:","px){display:block;line-height:",";text-transform:uppercase;border-top:1px solid ",";font-size:",";padding-top:",";margin-bottom:",";width:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(s.b)(15),(function(e){return e.theme.colors.silver}),Object(s.b)(10),Object(s.b)(15),Object(s.b)(14),Object(s.b)(138)),E=Object(o.d)(u.a).withConfig({displayName:"SidebarNav__Logout",componentId:"rib84p-10"})(["font-size:10px;font-family:",";color:",";text-transform:uppercase;cursor:pointer;background-image:",";@media (min-width:","px){font-size:",";}"],(function(e){return e.theme.fonts.primary}),(function(e){return e.theme.colors.greyLight}),(function(e){return"linear-gradient("+e.theme.colors.greyLight+", "+e.theme.colors.greyLight+");"}),(function(e){return e.theme.breakpoints.desktopSmall}),Object(s.b)(10)),C=function(e){var t=e.menuList,n=e.contact,r=e.activeSlug,o=e.user,s=Object(b.a)().signOutUser;return a.a.createElement(h,null,a.a.createElement(g,null,a.a.createElement(y,{onChange:function(e){return function(e){var t=e.target.value;"logout"===t?s():Object(i.navigate)(t)}(e)},value:"/"+r},t.map((function(e){return a.a.createElement("option",{key:e.id,value:Object(l.K)(e)},e.text)})),a.a.createElement("option",{value:"logout"},"Logout")),a.a.createElement(k,null)),a.a.createElement(v,null,a.a.createElement(x,null,"Hi ",a.a.createElement("br",null)," ",o.name+"!"),a.a.createElement(j,null,a.a.createElement(w,null,t.map((function(e){return a.a.createElement(O,{key:e.id},a.a.createElement(u.a,{to:Object(l.K)(e),active:"/"+r===Object(l.K)(e)},e.text))}))),a.a.createElement(A,null,Object(d.documentToReactComponents)(n.json)),a.a.createElement(E,{onClick:s,trackParams:{trackInternal:!0,category:"login",action:"account_logout",context:{login_email:o.email,lb_user_id:Object(l.z)(f.a.LB_USER_ID)}}},"Logout"))))},S=o.d.div.withConfig({displayName:"AccountWrapper__StyledAccountWrapper",componentId:"sc-1tyhhj6-0"})([""]),_=o.d.div.withConfig({displayName:"AccountWrapper__Wrapper",componentId:"sc-1tyhhj6-1"})(["position:relative;height:80px;margin-bottom:-30px;@media (min-width:","px){margin-top:-",";height:",";display:flex;justify-content:center;align-items:center;}"],(function(e){return e.theme.breakpoints.desktopSmall}),(function(e){return Object(s.b)(e.theme.header.desktop.height+2)}),Object(s.b)(77)),N=o.d.div.withConfig({displayName:"AccountWrapper__Container",componentId:"sc-1tyhhj6-2"})(["position:relative;@media (min-width:","px){display:flex;padding:"," "," "," ",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(s.b)(61),Object(s.b)(80),Object(s.b)(120),Object(s.b)(80)),I=o.d.div.withConfig({displayName:"AccountWrapper__WelcomeText",componentId:"sc-1tyhhj6-3"})(["position:absolute;left:20px;bottom:32px;text-transform:uppercase;font-weight:500;font-size:30px;font-family:",";word-break:break-word;@media (min-width:","px){display:none;}"],(function(e){return e.theme.fonts.heading}),(function(e){return e.theme.breakpoints.desktopSmall})),T=o.d.div.withConfig({displayName:"AccountWrapper__ContentWrapper",componentId:"sc-1tyhhj6-4"})(["width:100%;@media (min-width:","px){display:block;}"],(function(e){return e.theme.breakpoints.desktopSmall}));t.a=function(e){var t=e.children,n=(e.heroImage,e.menu),o=e.contact,s=e.activeSlug;Object(r.useEffect)((function(){Object(c.b)()||Object(i.navigate)("/log-in?redirecturi="+window.location.href)}),[]);var d=Object(c.a)();return a.a.createElement(S,null,a.a.createElement(_,null,a.a.createElement(I,null,"Hi "+d.name+"!")),a.a.createElement(N,null,a.a.createElement(C,{menuList:n,contact:o,activeSlug:s,user:d}),a.a.createElement(T,null,t)))}},YA5f:function(e,t,n){"use strict";n.r(t),n.d(t,"MyProfileQuery",(function(){return Y}));var r=n("q1tI"),a=n.n(r),o=n("vOnD"),i=n("ovEV"),s=n("zE20"),c=n("NAOw"),d=n("c7wi"),l=n("5Wrh"),u=n("MHX4"),m=n("X4fA"),p=n("R/IG"),b=n("N3/d"),f=n("o0o1"),h=n.n(f),g=(n("ls82"),n("HaE+")),y=n("s+5j"),k=n("6Ox+"),v=n("MUpH"),x=n("VX74");function j(){var e=Object(v.a)(["\n  mutation customerAddressCreate(\n    $customerAccessToken: String!\n    $address: MailingAddressInput!\n  ) {\n    customerAddressCreate(\n      customerAccessToken: $customerAccessToken\n      address: $address\n    ) {\n      customerAddress {\n        id\n      }\n      customerUserErrors {\n        code\n        field\n        message\n      }\n    }\n  }\n"]);return j=function(){return e},e}var w=Object(x.gql)(j()),O=function(e,t){return e.mutate({mutation:w,variables:t})};function A(){var e=Object(v.a)(["\n  mutation customerAddressDelete($id: ID!, $customerAccessToken: String!) {\n    customerAddressDelete(id: $id, customerAccessToken: $customerAccessToken) {\n      customerUserErrors {\n        code\n        field\n        message\n      }\n      deletedCustomerAddressId\n    }\n  }\n"]);return A=function(){return e},e}var E=Object(x.gql)(A()),C=function(e,t){return e.mutate({mutation:E,variables:t})};function S(){var e=Object(v.a)(["\n  mutation customerAddressUpdate(\n    $customerAccessToken: String!\n    $id: ID!\n    $address: MailingAddressInput!\n  ) {\n    customerAddressUpdate(\n      customerAccessToken: $customerAccessToken\n      id: $id\n      address: $address\n    ) {\n      customerAddress {\n        id\n      }\n      customerUserErrors {\n        code\n        field\n        message\n      }\n    }\n  }\n"]);return S=function(){return e},e}var _=Object(x.gql)(S()),N=function(e,t){return e.mutate({mutation:_,variables:t})};function I(){var e=Object(v.a)(["\n  mutation customerDefaultAddressUpdate(\n    $customerAccessToken: String!\n    $addressId: ID!\n  ) {\n    customerDefaultAddressUpdate(\n      customerAccessToken: $customerAccessToken\n      addressId: $addressId\n    ) {\n      customer {\n        id\n      }\n      customerUserErrors {\n        code\n        field\n        message\n      }\n    }\n  }\n"]);return I=function(){return e},e}var T=Object(x.gql)(I()),z=function(e,t){return e.mutate({mutation:T,variables:t})},q=n("C6ep"),D=function(){var e=Object(r.useContext)(y.d),t=Object(k.b)("customerAccessToken");return{createAddress:function(){var n=Object(g.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O(e.lastbrand.client,{address:r,customerAccessToken:t.accessToken});case 3:return a=n.sent,n.abrupt("return",{response:a,error:null,loading:!1});case 7:return n.prev=7,n.t0=n.catch(0),Object(q.b)(n.t0,Object.assign({},r,{customerAccessToken:t.accessToken}),{API:"customerAddressCreate",type:"API_FAILURE"}),n.abrupt("return",{response:null,error:n.t0,loading:!1});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),deleteAddress:function(){var n=Object(g.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C(e.lastbrand.client,{id:r,customerAccessToken:t.accessToken});case 3:return a=n.sent,n.abrupt("return",{response:a,error:null,loading:!1});case 7:return n.prev=7,n.t0=n.catch(0),Object(q.b)(n.t0,{addressId:r,customerAccessToken:t.accessToken},{API:"customerAddressDelete",type:"API_FAILURE"}),n.abrupt("return",{response:null,error:n.t0,loading:!1});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),updateAddress:function(){var n=Object(g.a)(h.a.mark((function n(r,a){var o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N(e.lastbrand.client,{id:r,address:a,customerAccessToken:t.accessToken});case 3:return o=n.sent,n.abrupt("return",{response:o,error:null,loading:!1});case 7:return n.prev=7,n.t0=n.catch(0),Object(q.b)(n.t0,Object.assign({addressId:r,customerAccessToken:t.accessToken},a),{API:"customerAddressUpdate",type:"API_FAILURE"}),n.abrupt("return",{response:null,error:n.t0,loading:!1});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}(),updateDefaultAddress:function(){var n=Object(g.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,z(e.lastbrand.client,{addressId:r,customerAccessToken:t.accessToken});case 3:return a=n.sent,n.abrupt("return",{response:a,error:null,loading:!1});case 7:return n.prev=7,n.t0=n.catch(0),Object(q.b)(n.t0,{addressId:r,customerAccessToken:t.accessToken},{API:"customerDefaultAddressUpdate",type:"API_FAILURE"}),n.abrupt("return",{response:null,error:n.t0,loading:!1});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}},F=Object(o.d)(p.a).withConfig({displayName:"AddressModal__StyledModal",componentId:"sc-10iegnv-0"})(["position:relative;overflow-y:scroll;height:100%;width:100%;box-sizing:border-box;padding:25px 20px 20px;@media (min-width:","px){padding:"," "," ",";height:auto;max-height:90vh;width:auto;max-width:",";box-sizing:border-box;}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(53),Object(i.b)(80),Object(i.b)(77),Object(i.b)(880)),U=o.d.p.withConfig({displayName:"AddressModal__ErrorMsg",componentId:"sc-10iegnv-1"})(["font-family:",";font-size:14px;margin:10px 0 0;margin-bottom:0 !important;color:red;text-align:center;@media (min-width:","px){margin:"," 0 0;font-size:",";}"],(function(e){return e.theme.fonts.primary}),(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(10),Object(i.b)(14)),M=function(e){var t=e.open,n=e.closeModal,o=e.addressForm,i=e.refreshCustomerAddress,s=e.initialFormData,c=e.mode,d=e.id,l=Object(u.a)({defaultValues:s}),p=l.register,f=l.handleSubmit,h=l.errors,g=(0,l.getValues)(),y=Object(r.useState)(!1),k=(y[0],y[1]),v=Object(r.useState)(""),x=v[0],j=v[1],w=Object(r.useState)(""),O=w[0],A=w[1],E=Object(r.useState)(!1),C=E[0],S=E[1],_=Object(r.useState)(!1),N=_[0],I=_[1],T=Object(r.useState)(!1),z=T[0],M=T[1],L=Object(m.a)().email,P="Address successfully updated. But, making it a default address failed. Please try again.",$=D(),V=$.createAddress,W=$.updateAddress,H=$.updateDefaultAddress,R=function(e){var t=e.response,r=e.error;e.loading;if(t){var a=t.data.customerDefaultAddressUpdate.customerUserErrors;I(!1),0===a.length?(n(),i()):(S(!0),A(P),Object(q.b)(new Error(P+" Error: "+JSON.stringify(a))))}else r&&(S(!0),A(P),Object(q.b)(new Error(P+" Error: "+r)))},B=function(e){var t=e.response,r=e.error;e.loading;if(t){var a=t.data,o="add"===c?a.customerAddressCreate.customerUserErrors:a.customerAddressUpdate.customerUserErrors;if(0==o.length){var s="add"===c?a.customerAddressCreate.customerAddress.id:a.customerAddressUpdate.customerAddress.id;k(!1),S(!1),j(""),A(""),z?H(s).then(R):(I(!1),n(),i())}else I(!1),k(!0),j(o[0].message),Object(q.b)(new Error(o[0].message+" E-mail: "+L))}else r&&(I(!1),k(!0),j("Error occurred while "+("add"===c?"adding":"updating")+" address. Please try again."),Object(q.b)(new Error("Error occurred while adding/updating address. Error: "+r)))};return a.a.createElement(F,{open:t,onClose:n},a.a.createElement(b.a,{fields:o.contentfulfields,title:o.title,submitButtonText:"add"===c?"Add a new address":"Update address",handleSubmit:f((function(e){I(!0),"add"===c?V(Object.assign({},e)).then(B):"edit"===c&&W(d,Object.assign({},e)).then(B)})),register:p,formValues:g,errors:h,loading:N,defaultAddressCheckbox:!0,onCheckboxChange:function(e){M(e.target.checked)}}),x&&a.a.createElement(U,null,x),C&&a.a.createElement(U,null,O))},L=n("9FQX"),P=o.d.div.withConfig({displayName:"Address__StyledAddress",componentId:"uq6fn4-0"})(["font-size:14px;line-height:25px;div:first-child{font-weight:500;margin-bottom:20px;}@media (min-width:","px){font-size:",";line-height:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(14),Object(i.b)(28)),$=o.d.div.withConfig({displayName:"Address__AddressLine",componentId:"uq6fn4-1"})(["font-size:14px;line-height:25px;:first-child{font-weight:500;margin-bottom:20px;}@media (min-width:","px){font-size:",";line-height:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(14),Object(i.b)(28)),V=o.d.div.withConfig({displayName:"Address__Buttons",componentId:"uq6fn4-2"})(["width:100%;height:20px;display:flex;flex:1;margin:18px 0 22px 0;"]),W=Object(o.d)(L.a).withConfig({displayName:"Address__StyledTextButton",componentId:"uq6fn4-3"})(["margin-right:10px;font-size:10px;color:",";text-transform:uppercase;background-image:",";@media (min-width:","px){font-size:",";margin-right:",";display:block;}"],(function(e){return e.theme.colors.greyLight}),(function(e){return"linear-gradient("+e.theme.colors.greyLight+", "+e.theme.colors.greyLight+");"}),(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(10),Object(i.b)(10)),H=o.d.p.withConfig({displayName:"Address__ErrorMsg",componentId:"uq6fn4-4"})(["font-family:",";font-size:14px;margin-bottom:0 !important;color:red;@media (min-width:","px){margin:"," 0 0;font-size:",";}"],(function(e){return e.theme.fonts.primary}),(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(10),Object(i.b)(14)),R=function(e){var t=e.id,n=e.title,o=e.name,i=e.firstName,s=e.lastName,c=e.address1,d=e.address2,l=e.city,u=e.provinceCode,m=e.province,p=e.phone,b=e.company,f=e.zip,h=e.country,g=e.refreshCustomerAddress,y=e.addressForm,k=Object(r.useState)(!1),v=k[0],x=k[1],j=Object(r.useState)(!1),w=j[0],O=j[1],A=Object(r.useState)({firstName:i,lastName:s,address1:c,address2:d,province:m,zip:f,country:h,company:b,phone:p,city:l}),E=A[0],C=(A[1],D().deleteAddress);return a.a.createElement(a.a.Fragment,null,a.a.createElement(P,null,a.a.createElement($,null,n),a.a.createElement($,null,o),b&&a.a.createElement($,null,b),a.a.createElement($,null,c),d&&a.a.createElement($,null,d),a.a.createElement($,null,l+" "+u+" "+f),a.a.createElement($,null,h),a.a.createElement($,null,p),a.a.createElement(V,null,a.a.createElement(W,{onClick:function(){O(!0)}},"Edit"),a.a.createElement(W,{onClick:function(){!0===window.confirm("Are you sure you wish to delete this address?")&&C(t).then((function(e){var t=e.response,n=e.error;e.loading;t?0===t.data.customerAddressDelete.customerUserErrors.length?(x(!1),g()):x(!0):n&&x(!0)}))}},"Delete")),v&&a.a.createElement(H,null,"There is an error in deleting this address.")),a.a.createElement(M,{open:w,closeModal:function(){return O(!1)},addressForm:y,refreshCustomerAddress:g,initialFormData:E,mode:"edit",id:t}))},B=o.d.div.withConfig({displayName:"MyProfile__Container",componentId:"hqi4rd-0"})(["width:100%;@media (min-width:","px){display:block;}"],(function(e){return e.theme.breakpoints.desktopSmall})),X=o.d.div.withConfig({displayName:"MyProfile__Addresses",componentId:"hqi4rd-1"})(["display:flex;flex-direction:column-reverse;padding:0 20px;@media (min-width:","px){display:block;padding:0;}"],(function(e){return e.theme.breakpoints.desktopSmall})),Q=Object(o.d)(l.a).withConfig({displayName:"MyProfile__StyledButton",componentId:"hqi4rd-2"})(["padding:22px;margin:20px 0;background:",";color:",";@media (min-width:","px){box-sizing:border-box;font-size:",";padding:",";width:",";margin-top:",";}"],(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(20),Object(i.b)(22),Object(i.b)(319),Object(i.b)(10)),J=o.d.ul.withConfig({displayName:"MyProfile__AddressList",componentId:"hqi4rd-3"})(["display:inline-block;@media (min-width:","px){display:flex;flex-flow:wrap;margin-top:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(60)),K=o.d.li.withConfig({displayName:"MyProfile__AddressItem",componentId:"hqi4rd-4"})(["border-bottom:1px solid ",";font-family:",";margin:22px 0 0;&:first-child{margin-top:0;}@media (min-width:","px){width:",";margin:0 "," "," 0;border-right:1px solid ",";border-bottom:none;}"],(function(e){return e.theme.colors.greyLight}),(function(e){return e.theme.fonts.primary}),(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(239),Object(i.b)(40),Object(i.b)(40),(function(e){return e.theme.colors.greyLight})),Y=(t.default=function(e){var t=e.data.contentfulAccountPage,n=Object(r.useState)(!1),o=n[0],i=n[1],l=Object(r.useState)(null),u=l[0],m=l[1],p=Object(s.a)(),b=p.customer,f=p.refreshCustomer;Object(r.useEffect)((function(){m(b||null)}),[b]);var h=function(){f()};return a.a.createElement(c.a,{heroImage:t.hero,menu:t.menuList,contact:t.contact,activeSlug:t.slug},a.a.createElement(d.a,{title:t.title.title,text:t.text.text}),a.a.createElement(B,null,a.a.createElement(X,null,a.a.createElement(Q,{onClick:function(){return i(!0)}},"Add a new address"),a.a.createElement(J,null,u&&u.defaultAddress&&a.a.createElement(K,null,a.a.createElement(R,{title:"Default address",name:u.defaultAddress.name,firstName:u.defaultAddress.firstName,lastName:u.defaultAddress.lastName,address1:u.defaultAddress.address1,address2:u.defaultAddress.address2,city:u.defaultAddress.city,zip:u.defaultAddress.zip,provinceCode:u.defaultAddress.provinceCode,province:u.defaultAddress.province,phone:u.defaultAddress.phone,company:u.defaultAddress.company,country:u.defaultAddress.country,id:u.defaultAddress.id,refreshCustomerAddress:h,addressForm:t.addAddressForm})),u&&u.addresses.edges.map((function(e,n){var r=e.node,o=r.id,i=r.name,s=r.firstName,c=r.lastName,d=r.address1,l=r.address2,u=r.city,m=r.provinceCode,p=r.province,b=r.zip,f=r.country,g=r.phone,y=r.company;return a.a.createElement(K,{key:o},a.a.createElement(R,{title:"Address "+(n+1),name:i,firstName:s,lastName:c,address1:d,address2:l,city:u,provinceCode:m,province:p,phone:g,company:y,zip:b,country:f,id:o,refreshCustomerAddress:h,addressForm:t.addAddressForm}))}))))),a.a.createElement(M,{open:o,closeModal:function(){return i(!1)},addressForm:t.addAddressForm,refreshCustomerAddress:h,initialFormData:{},mode:"add",id:null}))},"3780197951")},c7wi:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("vOnD"),i=n("ovEV"),s=o.d.div.withConfig({displayName:"PageHeader__StyledPageHeader",componentId:"sc-9jj8k7-0"})(["padding:0 20px;@media (min-width:","px){padding:0;margin-bottom:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(45)),c=o.d.h1.withConfig({displayName:"PageHeader__Title",componentId:"sc-9jj8k7-1"})(["display:none;margin:0 0 8px;font-size:40px;line-height:45px;@media (min-width:","px){display:block;white-space:pre-wrap;margin:0 0 ",";border-bottom:none;font-family:",";font-size:",";line-height:",";font-weight:500;padding:0;}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(17),(function(e){return e.theme.fonts.heading}),Object(i.b)(40),Object(i.b)(45)),d=o.d.p.withConfig({displayName:"PageHeader__Text",componentId:"sc-9jj8k7-2"})(["margin:0 0 34px;font-size:12px;line-height:20px;@media (min-width:","px){margin:0;font-size:",";font-weight:normal;line-height:",";width:",";}"],(function(e){return e.theme.breakpoints.desktopSmall}),Object(i.b)(12),Object(i.b)(20),Object(i.b)(480));t.a=function(e){var t=e.className,n=e.title,r=e.text;return a.a.createElement(s,{className:t},a.a.createElement(c,null,n),a.a.createElement(d,null,r))}},zE20:function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("HaE+")),i=n("q1tI"),s=n("MUpH"),c=n("VX74");function d(){var e=Object(s.a)(["\n  query ShopifyCustomer($customerAccessToken: String!) {\n    customer(customerAccessToken: $customerAccessToken) {\n      id\n      addresses(first: 250) {\n        edges {\n          node {\n            id\n            address1\n            address2\n            country\n            city\n            province\n            provinceCode\n            zip\n            company\n            name\n            phone\n            firstName\n            lastName\n          }\n        }\n      }\n      defaultAddress {\n        id\n        address1\n        address2\n        country\n        city\n        province\n        provinceCode\n        zip\n        company\n        name\n        phone\n        firstName\n        lastName\n      }\n    }\n  }\n"]);return d=function(){return e},e}var l=Object(c.gql)(d()),u=function(e,t){return e.query({query:l,variables:t})};function m(){var e=Object(s.a)(["\n  query ShopifyCustomer($customerAccessToken: String!) {\n    customer(customerAccessToken: $customerAccessToken) {\n      id\n      addresses(first: 250) {\n        edges {\n          node {\n            id\n            address1\n            address2\n            country\n            city\n            province\n            provinceCode\n            zip\n            company\n            name\n            phone\n            firstName\n            lastName\n          }\n        }\n      }\n      defaultAddress {\n        id\n        address1\n        address2\n        country\n        city\n        province\n        provinceCode\n        zip\n        company\n        name\n        phone\n        firstName\n        lastName\n      }\n    }\n  }\n"]);return m=function(){return e},e}var p=Object(c.gql)(m()),b=function(e,t){return e.query({query:p,variables:t,fetchPolicy:"no-cache"})},f=n("s+5j"),h=n("Eqht"),g=n("6Ox+"),y=Object(g.c)("customerAccessToken"),k=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(g.b)("customerAccessToken"))&&!(Date.parse(n.expiresAt)<new Date)){e.next=8;break}return console.log("fetching accessToken"),e.next=5,Object(h.a)(t);case 5:return null!=(r=e.sent)&&y(r),e.abrupt("return",r);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=function(){var e=Object(i.useContext)(f.d),t=Object(i.useState)(null),n=t[0],r=t[1],s=Object(i.useState)(!1),c=s[0],d=s[1],l=Object(i.useState)(!1),m=l[0],p=l[1],h=function(){var t=Object(o.a)(a.a.mark((function t(){var n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,k(e.lastbrand.client);case 3:return n=t.sent,t.next=6,u(e.lastbrand.client,{customerAccessToken:n.accessToken});case 6:o=t.sent,i=o.data,r(i.customer),p(!1);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(a.a.mark((function t(){var n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e.lastbrand.client);case 2:return n=t.sent,t.next=5,b(e.lastbrand.client,{customerAccessToken:n.accessToken});case 5:o=t.sent,i=o.data,r(i.customer);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){function t(){return(t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e.lastbrand.client);case 2:t.sent&&!c?h():c||r(null);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[c]),{customer:n,refreshCustomer:function(){g(),d(!0)},loading:m}}}}]);
//# sourceMappingURL=component---src-templates-account-my-profile-js-c3937245bb63c525c0dd.js.map