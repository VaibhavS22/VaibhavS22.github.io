{"version":3,"sources":["webpack:///./src/components/SEO.js","webpack:///./src/components/BestSellersSection.js","webpack:///./src/components/Auth/AuthWrapper.js","webpack:///./src/templates/Auth/GetReferral.js","webpack:///./src/hooks/useSwellSDK.js"],"names":["SEO","title","description","type","slug","canonicalUrl","image","schemaData","noindex","nofollow","category","reviewsAndRatings","price","userReviews","reviews","map","review","author","datePublished","dateCreated","body","reviewRating","bestRating","ratingValue","rating","worstRating","name","content","index","property","rel","href","hrefLang","toFixed","averageRating","count","JSON","stringify","StyledBestSellersSection","styled","section","props","theme","breakpoints","desktopSmall","desktopVw","FeaturedImage","div","header","desktop","height","StyledImage","Image","TextWrapper","fonts","secondary","BestSellers","ul","BestSellerItem","li","BestSellersSection","imageDesktop","json","textColor","products","hideImageOnMobile","tracker","link","imageRender","fluid","imageSources","style","position","left","right","bottom","top","zIndex","alt","to","getLinkPath","toLowerCase","documentToReactComponents","product","key","id","contentfulProduct","undefined","prefixName","StyledAuthWrapper","ImageWrapper","largeImage","announcementBar","ImageTextWrapper","ImageText","colors","red","ImageTextAlt","FormContainer","FormWrapper","AuthWrapper","children","imageText","stage","className","width","StyledReferral","ReferralContainer","StyledH1","h1","StyledH2","h2","StyledText","ButtonContainer","StyledButton","Button","primary","RecommendedProductsWrapper","rotate","keyframes","Loader","greyLighter","greyLight","GetReferral","page","data","contentfulAuthenticationPage","useSwellSDK","couponCode","setReferralCouponCode","loading","useEffect","error","console","log","seoTitle","metaImage","seoDescripton","recommendedProducts","src","reduceMarginTop","isLoggedIn","fontSize","text","GetReferralQuery","email","customerId","isReloadNotRequired","useState","initialized","setInitialized","loadReferralCouponCode","loadState","saveReferralCouponCode","saveState","code","setCouponCode","setLoading","setup","setSetup","swellSDK","document","querySelector","parentNode","removeChild","script","createElement","head","appendChild","swellCustomerIdentification","setAttribute","display","customerDetails","setCustomerDetails","window","swellAPI","getCustomerDetails","addEventListener","referralLink","setReferralLink","showPopUp","showPopupByType","event","generatedCouponCode","detail","coupon_code","savedCouponCode","setCookie"],"mappings":"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","file":"component---src-templates-auth-get-referral-js-fd0a937506cf2b6fa043.js","sourcesContent":["import React from 'react'\nimport { Helmet } from 'react-helmet'\n\nconst SEO = ({\n  title,\n  description,\n  type,\n  slug,\n  canonicalUrl,\n  image,\n  noindex,\n  nofollow,\n  schemaData,\n  category,\n  reviewsAndRatings,\n  price,\n}) => {\n  const index =\n    noindex || process.env.GATSBY_BUILD_ENVIRONMENT !== 'production'\n      ? 'noindex'\n      : 'index'\n  const follow =\n    nofollow || process.env.GATSBY_BUILD_ENVIRONMENT !== 'production'\n      ? 'nofollow'\n      : 'follow'\n  const userReviews =\n    schemaData &&\n    reviewsAndRatings &&\n    reviewsAndRatings.reviews.map(review => {\n      return {\n        '@type': 'Review',\n        author: review.author,\n        datePublished: review.dateCreated,\n        description: review.body,\n        reviewRating: {\n          '@type': 'Rating',\n          bestRating: '5',\n          ratingValue: `${review.rating}`,\n          worstRating: '1',\n        },\n      }\n    })\n  return (\n    <Helmet>\n      <title>{title}</title>\n      <meta name='robots' content={`${index}, ${follow}`} />\n      <meta name='description' content={description || ''} />\n      <meta property='og:title' content={title || ''} />\n      <meta property='og:type' content={type || ''} />\n      <meta property='og:url' content={`https://www.onequince.com/${slug}`} />\n      <meta property='og:image' content={image && image} />\n      <link\n        rel='alternate'\n        href={`https://www.onequince.com/${slug}`}\n        hrefLang='en-US'\n      />\n      <link\n        rel='canonical'\n        href={canonicalUrl || `https://www.onequince.com/${slug}`}\n      />\n      {schemaData && reviewsAndRatings && (\n        <script type='application/ld+json'>\n          {`{\n              \"@context\": \"https://schema.org\",\n              \"@type\": \"${type}\",\n              \"name\": \"${title}\",\n              \"description\": \"${description}\",\n              \"image\": \"${image}\",\n              \"category\": \"${category}\",\n              \"brand\": \"Quince\",\n              \"offers\": {\n                \"@type\": \"Offer\",\n                \"availability\": \"http://schema.org/InStock\",\n                \"price\": \"${price && price.toFixed(2)}\",\n                \"priceCurrency\": \"USD\"\n              },\n              \"aggregateRating\": {\n                \"@type\" : \"AggregateRating\",\n                \"ratingValue\": \"${reviewsAndRatings.averageRating}\",\n                \"reviewCount\": \"${reviewsAndRatings.count}\"\n              },\n              \"review\": ${JSON.stringify(userReviews)}\n            }`}\n        </script>\n      )}\n      {schemaData && !reviewsAndRatings && (\n        <script type='application/ld+json'>\n          {`{\n              \"@context\": \"https://schema.org\",\n              \"@type\": \"${type}\",\n              \"name\": \"${title}\",\n              \"description\": \"${description}\",\n              \"image\": \"${image}\",\n              \"category\": \"${category}\",\n              \"brand\": \"Quince\",\n              \"offers\": {\n                \"@type\": \"Offer\",\n                \"availability\": \"http://schema.org/InStock\",\n                \"price\": \"${price && price.toFixed(2)}\",\n                \"priceCurrency\": \"USD\"\n              }\n            }`}\n        </script>\n      )}\n    </Helmet>\n  )\n}\n\nexport default SEO\n","import React from 'react'\nimport styled from 'styled-components'\nimport Image from 'gatsby-image'\nimport { Link } from 'gatsby'\nimport { documentToReactComponents } from '@contentful/rich-text-react-renderer'\n\nimport { desktopVw } from '../styles/utils'\nimport { getLinkPath, imageSources } from '../utils'\n\nimport ProductThumbnail from './ProductThumbnail'\n\nconst StyledBestSellersSection = styled.section`\n  margin: 20px 0 30.5px 0;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    margin: ${desktopVw(80)} 0 ${desktopVw(76.6)};\n    padding-right: ${desktopVw(80)};\n  }\n`\n\nconst FeaturedImage = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column-reverse;\n  box-sizing: border-box;\n  margin: var(--marginMobile);\n  padding: var(--paddingMobile);\n  height: var(--heightMobile);\n  width: 100%;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    position: sticky;\n    top: ${props => desktopVw(props.theme.header.desktop.height)};\n    flex-shrink: 0;\n    width: ${desktopVw(521)};\n    height: calc(\n      100vh - ${props => desktopVw(props.theme.header.desktop.height)}\n    );\n    margin: 0 ${desktopVw(79)} 0 0;\n    padding: ${desktopVw(100)} ${desktopVw(80)};\n  }\n`\n\nconst StyledImage = styled(Image)`\n  display: var(--displayMobile);\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst TextWrapper = styled.div`\n  h1,\n  h2,\n  h3,\n  p {\n    font-size: 30px;\n    line-height: 30px;\n    white-space: pre-wrap;\n    text-transform: uppercase;\n    color: var(--color);\n    text-align: var(--textAlign);\n  }\n\n  i {\n    font-family: ${props => props.theme.fonts.secondary};\n    font-style: normal;\n    font-weight: 600;\n    font-size: 35px;\n  }\n\n  z-index: 1;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    h1,\n    h2,\n    h3,\n    p {\n      font-size: ${desktopVw(30)};\n      line-height: ${desktopVw(30)};\n      text-align: initial;\n    }\n\n    i {\n      font-size: ${desktopVw(35)};\n    }\n  }\n`\n\nconst BestSellers = styled.ul`\n  display: flex;\n  flex: 1;\n  margin: 10px 0 0;\n  padding: 0 10px;\n  overflow-x: scroll;\n  white-space: nowrap;\n  -webkit-overflow-scrolling: touch;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: column;\n    flex-flow: wrap;\n    align-items: flex-start;\n    justify-content: space-between;\n    margin: 0;\n    padding: 0;\n  }\n`\n\nconst BestSellerItem = styled.li`\n  padding-right: 10px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(50.58)};\n    padding: 0;\n    width: calc(50% - ${desktopVw(20)});\n\n    &:nth-last-child(-n + 2) {\n      margin-bottom: 0;\n    }\n  }\n`\n\nconst BestSellersSection = ({\n  image,\n  imageDesktop,\n  json,\n  textColor,\n  products,\n  hideImageOnMobile,\n  tracker,\n  link,\n}) => {\n  const imageRender = () => (\n    <StyledImage\n      fluid={imageSources(image, imageDesktop)}\n      style={{\n        position: 'absolute',\n        left: '0',\n        right: '0',\n        bottom: '0',\n        top: '0',\n        zIndex: '0',\n        '--displayMobile': hideImageOnMobile ? 'none' : 'block',\n      }}\n      alt={image.description || image.title}\n    />\n  )\n\n  return (\n    <StyledBestSellersSection>\n      <FeaturedImage\n        style={{\n          '--marginMobile': hideImageOnMobile ? '0 0 26px' : null,\n          '--paddingMobile': hideImageOnMobile ? null : ' 17px 20px',\n          '--heightMobile': hideImageOnMobile ? null : '568px',\n        }}\n      >\n        {link ? (\n          <Link to={getLinkPath(link)}>{imageRender()}</Link>\n        ) : (\n          imageRender()\n        )}\n        <TextWrapper\n          style={{\n            '--textAlign': hideImageOnMobile ? 'center' : null,\n            '--color': textColor.toLowerCase(),\n          }}\n        >\n          {documentToReactComponents(json)}\n        </TextWrapper>\n      </FeaturedImage>\n      <BestSellers>\n        {products.map((product, index) => (\n          <BestSellerItem key={product.id}>\n            <ProductThumbnail\n              contentfulProduct={product}\n              tracker={\n                tracker ? `${tracker}_you_may_also_like__${index}` : undefined\n              }\n              prefixName='You May Also Like'\n            />\n          </BestSellerItem>\n        ))}\n      </BestSellers>\n    </StyledBestSellersSection>\n  )\n}\n\nexport default BestSellersSection\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport ScaledImage from '../../components/ScaledImage'\n\nconst StyledAuthWrapper = styled.section`\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n  }\n`\n\nconst ImageWrapper = styled.div`\n  position: relative;\n  box-sizing: border-box;\n  height: ${props => (props.largeImage ? '587px' : '310px')};\n  flex-shrink: 0;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    top: 0;\n    width: ${props => (props.largeImage ? desktopVw(880) : '50%')};\n    height: ${props =>\n      `calc(100vh - ${desktopVw(props.theme.announcementBar.desktop.height)})`};\n    margin: 0;\n    margin-top: -${props => desktopVw(props.theme.header.desktop.height)};\n  }\n`\n\nconst ImageTextWrapper = styled.div`\n  text-align: center;\n  justify-self: center;\n`\n\nconst ImageText = styled.div`\n  white-space: pre-wrap;\n  text-transform: uppercase;\n  color: ${props => props.theme.colors.red};\n  font-family: ${props => props.theme.fonts.secondary};\n  position: absolute;\n  margin-left: auto;\n  margin-right: auto;\n  left: 0;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 80px;\n  line-height: 70px;\n  letter-spacing: -2px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(200)};\n    line-height: ${desktopVw(169)};\n    letter-spacing: -${desktopVw(2)};\n  }\n`\n\nconst ImageTextAlt = styled.div`\n  position: absolute;\n  top: 124px;\n  left: 20px;\n  right: 20px;\n  bottom: 0;\n  font-size: 80px;\n\n  letter-spacing: -2px;\n  text-transform: uppercase;\n  color: ${props => props.theme.colors.red};\n  font-family: ${props => props.theme.fonts.secondary};\n\n  div {\n    margin-bottom: 15px;\n    text-align: left;\n\n    &:nth-child(2) {\n      text-align: right;\n    }\n\n    &:nth-child(3) {\n      margin-left: 20px;\n    }\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    top: 50%;\n    transform: translateY(-50%);\n    left: ${desktopVw(80)};\n    right: ${desktopVw(200)};\n    font-size: ${desktopVw(130)};\n    letter-spacing: -${desktopVw(2)};\n\n    div {\n      margin-bottom: ${desktopVw(20)};\n\n      &:nth-child(3) {\n        margin-top: -${desktopVw(10)};\n        margin-left: ${desktopVw(40)};\n      }\n    }\n  }\n`\n\nconst FormContainer = styled.div`\n  padding: 0 20px;\n  align-self: center;\n  position: relative;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    width: ${desktopVw(400)};\n\n    margin: auto;\n    padding: 0 ${desktopVw(80)};\n    height: ${({ theme }) =>\n      `calc(100vh - ${desktopVw(\n        theme.announcementBar.desktop.height + theme.header.desktop.height,\n      )})`};\n  }\n`\n\nconst FormWrapper = styled.div`\n  margin: 18px 0 0;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    overflow-y: scroll;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n`\n\nconst AuthWrapper = ({ children, image, imageText, stage, largeImage }) => {\n  return (\n    <StyledAuthWrapper>\n      <ImageWrapper\n        largeImage={largeImage}\n        className='authwrapper__image-wrapper'\n      >\n        <ScaledImage\n          style={{ height: '100%', width: '100%' }}\n          fluid={image.fluid}\n        />\n        {imageText && stage === 0 && (\n          <ImageTextWrapper>\n            <ImageText>{imageText}</ImageText>\n          </ImageTextWrapper>\n        )}\n        {imageText && stage === 1 && (\n          <ImageTextWrapper>\n            <ImageTextAlt>\n              <div>Share</div>\n              <div>The</div>\n              <div>Word</div>\n            </ImageTextAlt>\n          </ImageTextWrapper>\n        )}\n      </ImageWrapper>\n      <FormContainer className='authwrapper__form-container'>\n        <FormWrapper className='authwrapper__form-wrapper'>\n          {children}\n        </FormWrapper>\n      </FormContainer>\n    </StyledAuthWrapper>\n  )\n}\n\nexport default AuthWrapper\n","import React, { useEffect } from 'react'\nimport styled, { keyframes } from 'styled-components'\nimport { graphql } from 'gatsby'\n\nimport { desktopVw } from '../../styles/utils'\nimport { isLoggedIn } from '../../utils'\nimport useSwellSDK from '../../hooks/useSwellSDK'\nimport AuthWrapper from '../../components/Auth/AuthWrapper'\nimport SEO from '../../components/SEO'\nimport Button from '../../components/Button'\nimport theme from '../../styles/theme'\nimport BestSellersSection from '../../components/BestSellersSection'\n\nconst StyledReferral = styled.div`\n  .authwrapper__form-container {\n    padding: 0;\n  }\n  .authwrapper__form-wrapper {\n    margin: 0;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(76.6)};\n    .authwrapper__form-container {\n      position: relative;\n      box-sizing: border-box;\n      height: ${props => (props.largeImage ? '587px' : '310px')};\n      flex-shrink: 0;\n      margin: 0;\n      padding: 0;\n\n      @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n        top: 0;\n        height: ${props =>\n          `calc(100vh - ${desktopVw(\n            props.theme.announcementBar.desktop.height,\n          )})`};\n        width: calc(100% - ${desktopVw(880)});\n        margin-top: -${props => desktopVw(props.theme.header.desktop.height)};\n      }\n    }\n    .authwrapper__form-wrapper {\n      margin: 0;\n      height: 100%;\n    }\n  }\n`\n\nconst ReferralContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n  height: 100%;\n  padding: 20px 35px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 35px;\n  }\n`\n\nconst StyledH1 = styled.h1`\n  text-transform: uppercase;\n  font-size: 30px;\n  margin-bottom: 29px;\n`\n\nconst StyledH2 = styled.h2`\n  text-transform: uppercase;\n  font-size: 20px;\n  margin-bottom: 29px;\n`\n\nconst StyledText = styled.div`\n  font-size: 15px;\n  line-height: 20px;\n  margin-bottom: 40px;\n`\n\nconst ButtonContainer = styled.div``\n\nconst StyledButton = styled(Button)`\n  padding: 17px 35px;\n  border: 1px solid ${props => props.theme.colors.primary};\n  background: ${props => props.theme.colors.primary};\n  color: ${props => props.theme.colors.secondary};\n  margin-bottom: 25px;\n  margin-top: 40px;\n  font-size: 18px;\n\n  @media (min-width: ${theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(18)};\n    margin-bottom: ${desktopVw(60)};\n    width: ${desktopVw(275)};\n    padding: ${desktopVw(20)} 0;\n    text-transform: uppercase;\n  }\n`\n\nconst RecommendedProductsWrapper = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    border-top: 1px solid rgba(0, 0, 0, 0.1);\n  }\n`\n\nconst rotate = keyframes`\n\n 0% {\n    transform: rotate(0); }\n  100% {\n    transform: rotate(360deg); }\n `\n\nconst Loader = styled.div`\n  height: 24px;\n  width: 24px;\n  color: ${props => props.theme.colors.greyLighter};\n  display: inline-block;\n  position: relative;\n  border: 3px solid;\n  border-radius: 50%;\n  border-right-color: ${props => props.theme.colors.greyLight};\n  animation: ${rotate} 1s linear infinite;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(24)};\n    border-width: ${desktopVw(3)};\n    width: ${desktopVw(24)};\n  }\n`\n\nconst GetReferral = ({ data }) => {\n  const page = data.contentfulAuthenticationPage\n\n  const { couponCode, setReferralCouponCode, loading } = useSwellSDK()\n\n  useEffect(() => {\n    if (!page) {\n      return\n    }\n    try {\n      setReferralCouponCode()\n    } catch (error) {\n      console.log('Error in setting referral coupon code')\n    }\n  }, [page])\n\n  const {\n    slug,\n    seoTitle,\n    metaImage,\n    seoDescripton,\n    image,\n    imageText,\n    recommendedProducts,\n  } = page || {}\n\n  return (\n    <>\n      <SEO\n        title={seoTitle}\n        description={seoDescripton}\n        slug={slug}\n        image={metaImage ? metaImage.fluid.src : null}\n      />\n      <StyledReferral reduceMarginTop={isLoggedIn()}>\n        <AuthWrapper\n          image={image}\n          largeImage\n          imageText={imageText.imageText}\n          stage={0}\n        >\n          <ReferralContainer>\n            <StyledH1>welcome to quince!</StyledH1>\n            <StyledH2>get $10 off</StyledH2>\n            <StyledText>\n              The referral code below will be automatically applied at checkout\n              and gets you $10 off your order!\n            </StyledText>\n            {loading && (\n              <div>\n                <Loader />\n              </div>\n            )}\n            <div style={{ fontSize: '20px' }}>{couponCode}</div>\n            <ButtonContainer>\n              <StyledButton to='/women/best-sellers'>\n                Start shopping\n              </StyledButton>\n            </ButtonContainer>\n          </ReferralContainer>\n        </AuthWrapper>\n        {recommendedProducts && (\n          <RecommendedProductsWrapper>\n            <BestSellersSection\n              json={recommendedProducts.text.json}\n              textColor={recommendedProducts.textColor}\n              image={recommendedProducts.image}\n              products={recommendedProducts.products}\n              tracker='product_page'\n              hideImageOnMobile\n            />\n          </RecommendedProductsWrapper>\n        )}\n      </StyledReferral>\n    </>\n  )\n}\n\nexport default GetReferral\n\nexport const GetReferralQuery = graphql`\n  query GetReferral($id: String!) {\n    contentfulAuthenticationPage(id: { eq: $id }) {\n      id\n      slug\n      seoTitle\n      seoDescripton\n      image {\n        description\n        fluid(maxWidth: 3840) {\n          ...GatsbyContentfulFluid_withWebp\n        }\n      }\n      imageText {\n        imageText\n      }\n      recommendedProducts {\n        id\n        image {\n          description\n          fluid(maxWidth: 1440) {\n            ...GatsbyContentfulFluid_withWebp_noBase64\n          }\n        }\n        textColor\n        text {\n          json\n        }\n        products {\n          id\n          title\n          slug\n          subtitle\n          seoTitle\n          gender\n          metaTags\n          shippingInformation {\n            shippingInformation\n          }\n          shippingMetaInfoText {\n            shippingMetaInfoText\n          }\n          productImages {\n            color {\n              name\n            }\n            images {\n              id\n              description\n              fluid(maxWidth: 1440) {\n                ...GatsbyContentfulFluid_withWebp_noBase64\n              }\n            }\n          }\n          colors {\n            name\n            addBorder\n            hexcode\n            texture {\n              description\n              fluid(maxWidth: 50) {\n                ...GatsbyContentfulFluid_withWebp_noBase64\n              }\n            }\n          }\n          shopifyProduct {\n            ...ShopifyProduct\n          }\n        }\n      }\n    }\n  }\n`\n","import { useState, useEffect } from 'react'\nimport { loadState, saveState } from '../utils/localStorage'\nimport { setCookie } from '../utils'\n\nconst useSwellSDK = (email, customerId, isReloadNotRequired) => {\n  const [initialized, setInitialized] = useState(false)\n  const loadReferralCouponCode = loadState('referralCouponCode')\n  const saveReferralCouponCode = saveState('referralCouponCode')\n  const [couponCode, setCouponCode] = useState(\n    loadReferralCouponCode && loadReferralCouponCode.code,\n  )\n  const [loading, setLoading] = useState(\n    loadReferralCouponCode ? !loadReferralCouponCode.code : true,\n  )\n  const [setup, setSetup] = useState(false)\n\n  const IS_WELCOME_POPUP_PREVIOUSLY_OPENED = '_quince_welcome_popup'\n  const WELCOME_COOKIE_EXPIRY_MINUTES = 1440\n\n  useEffect(() => {\n    if (!isReloadNotRequired) {\n      const swellSDK = document.querySelector('#swell-sdk')\n\n      if (swellSDK) {\n        swellSDK.parentNode.removeChild(swellSDK)\n      }\n\n      const script = document.createElement('script')\n      script.src =\n        'https://cdn-loyalty.yotpo.com/loader/Ll6pppZ6VQxK_x86N6mnnw.js'\n      script.id = 'swell-sdk'\n\n      document.head.appendChild(script)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!email || !customerId) return\n    const swellCustomerIdentification = document.querySelector(\n      '#swell-customer-identification',\n    )\n\n    if (swellCustomerIdentification) {\n      // Update if already exists\n      swellCustomerIdentification.setAttribute('data-id', customerId)\n      swellCustomerIdentification.setAttribute('data-email', email)\n\n      setInitialized(true)\n      return\n    }\n\n    const div = document.createElement('div')\n    div.setAttribute('id', 'swell-customer-identification')\n    div.setAttribute('data-authenticated', true)\n    div.setAttribute('data-email', email)\n    div.setAttribute('data-id', customerId)\n    div.style.display = 'none'\n\n    document.body.appendChild(div)\n\n    setInitialized(true)\n  }, [email, customerId])\n\n  const [customerDetails, setCustomerDetails] = useState(null)\n\n  useEffect(() => {\n    if (!initialized) return\n\n    if (typeof window !== 'undefined' && window.swellAPI) {\n      setCustomerDetails(window.swellAPI.getCustomerDetails())\n    } else {\n      document.addEventListener('swell:setup', function() {\n        setSetup(true)\n        setCustomerDetails(window.swellAPI.getCustomerDetails())\n      })\n    }\n  }, [initialized])\n\n  const [referralLink, setReferralLink] = useState(null)\n\n  useEffect(() => {\n    if (!customerDetails) return\n\n    if (!customerDetails.email) {\n      document.addEventListener('swell:setup', function() {\n        setSetup(true)\n        setCustomerDetails(window.swellAPI.getCustomerDetails())\n      })\n    }\n\n    setReferralLink(customerDetails.referralLink)\n  }, [customerDetails])\n\n  const showPopUp = () => {\n    if (!customerDetails && !initialized) return\n\n    window.swellAPI.showPopupByType('RewardsPopup')\n  }\n\n  const setReferralCouponCode = () => {\n    document.addEventListener('swell:referred:customer:discount', function(\n      event,\n    ) {\n      const eventDetails = event.detail\n      const generatedCouponCode = eventDetails.coupon_code\n      const savedCouponCode = loadReferralCouponCode\n        ? loadReferralCouponCode.code\n        : null\n\n      // Do not open welcome popup\n      setCookie(\n        IS_WELCOME_POPUP_PREVIOUSLY_OPENED,\n        true,\n        WELCOME_COOKIE_EXPIRY_MINUTES,\n      )\n\n      // Set coupon code which has been generated latest\n      if (generatedCouponCode) {\n        saveReferralCouponCode({ code: generatedCouponCode })\n        setCouponCode(generatedCouponCode)\n        setLoading(false)\n      } else {\n        setCouponCode(savedCouponCode)\n        setLoading(false)\n      }\n    })\n  }\n\n  return {\n    referralLink,\n    showPopUp,\n    setReferralCouponCode,\n    couponCode,\n    loading,\n    setup,\n  }\n}\n\nexport default useSwellSDK\n"],"sourceRoot":""}