{"version":3,"sources":["webpack:///./src/components/Returns/ProductRating.js","webpack:///./src/components/Account/ReturnsModal/returnModalData.js","webpack:///./src/components/common/ImageUpload/UploadThumbnail.js","webpack:///./src/components/common/ImageUpload/index.js","webpack:///./src/components/Returns/StageZero/StageZeroDrawer.js","webpack:///./src/components/Returns/ExchangeLineItemSelector.js","webpack:///./src/components/Returns/StageOne/LineItem.js","webpack:///./src/components/Returns/StageOne/index.js","webpack:///./src/components/Returns/StageTwo/ReturnsSummaryCard.js","webpack:///./src/components/Returns/StageTwo/index.js","webpack:///./src/components/Returns/EditAddressModal.js","webpack:///./src/components/Returns/MobileLineItemSummaryModal.js","webpack:///./src/components/BackLink.js","webpack:///./src/components/common/Timeline.js","webpack:///./src/components/Returns/ReturnConfirmation.js","webpack:///./src/templates/Account/Returns.js","webpack:///./src/assets/info.svg","webpack:///./src/components/common/DottedSpinner.js","webpack:///./src/assets/landing_star.svg","webpack:///./src/assets/bolt.svg","webpack:///./src/components/common/StarRating.js"],"names":["StyledProductRating","styled","form","props","theme","breakpoints","desktopSmall","desktopVw","Star","StarIcon","colors","primary","fill","Input","input","yellow","Rate","div","RatingInputWrapper","StyledRatingInput","StarRating","ratingObj","onChange","initialValue","useState","value","setValue","Array","map","_","i","label","type","name","e","aria-label","ProductRating","handleChange","ratings","formData","r","key","Number","RETURN_REASONS","REASON_CATEGORY_MAP","default","sweaters","t_shirts","gloves","hats","fleece","hats_scarves_and_gloves","shirts","scarves","dresses","tops","bottoms","loungewear","bedding","sheets","pillowcases_and_shams","bags","belts","slgs","jewelry","towels","duvet_covers","SUB_REASON_MAP","SIZE_OR_FIT","STYLE","INCORRECT_PRODUCT","MATERIAL","COLOR","ORDERED_EXTRA","SHIPPING_DELAY","CHANGED_MIND","DEFECTIVE_ITEM","DAMAGED_PACKAGE","OTHER","apparel","home","home_towels","RATINGS_MAP","range","startVal","endVal","error","REASON_COMMENTS_MAP","StyledUploadThumbnail","DeletePhotoBtn","button","secondary","StyledCloseIcon","CloseIcon","PreviewThumbnailImg","img","opacity","UploadThumbnail","fileName","imageApiUrl","base64String","photos","removePhoto","setPhotos","file","useFetch","fetchData","response","loading","useEffect","newPhotos","findIndex","data","FormData","append","method","body","onClick","SpinningLoader","src","StyledImageUpload","greyLight","Inner","Camera","CameraIcon","ThumbnailList","ul","spacingL","ThumbnailItem","li","ImageWithTextLayout","ImageUpload","className","placeholder","required","handleFiles","length","p","accept","multiple","StyledLineItem","LineItemThumbnail","Form","Text","Footer","AlertContainer","ButtonContainer","StyledButton","Button","QuantitySelect","Select","isPhotoUploadRequired","includes","reasonCode","StageZeroDrawer","open","closeModal","lineItem","saveReturnLineItem","contentfulProduct","onSubmitSuccess","validationError","setValidationError","returnLineItem","handlePhotosChange","imageUrl","id","currentLineItemId","setCurrentLineItemId","setLocalPhotos","productType","setProductType","Math","min","getQuantitiesRemainingToReturn","returnQuantity","setReturnQuantity","productTypeName","toLowerCase","setReturnLineItemReview","setSubReasons","setTextAreaPlaceholder","returnLineItemReview","subReasons","textAreaPlaceholder","handleChangeReview","target","Drawer","onClose","secondaryLayout","options","idx","quantitiesRemainingToReturn","subReason","defaultOption","find","rObj","reason","files","some","reader","FileReader","readAsDataURL","onload","prevState","result","onerror","console","log","filteredPhotos","filter","additionalComments","height","message","black","valid","lineItemId","returnLineItemId","imageUrls","getImageUrls","StyledLineItemSelect","ImageContainer","MobileTitle","Title","ImageWrapper","greyLighter","StyledImage","Image","SizeWrapper","StyledSizeSelector","ProductSizeSelector","ExchangeLineItemSelector","onLineItemSelect","product","startingColor","startingSize","clearValidationError","handleOutOfStock","useShopifyProduct","shopifyProduct","handle","oneSize","setOneSize","sizes","setSizes","shopifyColors","setShopifyColors","outOfStock","setOutOfStock","newStartingSize","variantTitle","split","trim","productImages","setProductImages","sizeOption","colorOption","values","newStartingColor","v","pop","useSelectedOptions","selectedSize","selectedColor","productVariant","selectedColorImages","color","variantBySelectedOptions","variantId","decodeIdFromGraphQLResponse","parseFloat","size","price","priceV2","amount","availableQuantity","quantityAvailable","fluid","images","ProductColorSelector","selected","productTitle","title","showPrice","variants","edges","sizeGuide","sizeGuideJson","isOutOfStock","DetailsWrapper","StyledCheckboxStageTwo","StyledCheckbox","checked","showMarginTop","ExchangeWrapper","LineItem","initialExchangeOption","onOutOfStockForReplace","storeCreditReturnsMessage","exchangeProductVariant","outOfStockForReplace","setOutOfStockForReplace","exchangeOption","setExchangeOption","exchangeData","setExchangeData","drawerOpen","setDrawerOpen","saveLineItem","returnType","handleCheckboxChange","devices","useDetectDevices","formatReasonCode","formatSubReason","checkedColor","style","display","marginRight","fontWeight","margin","content","tabIndex","disabled","mobile","desktop","option","exchangeProductId","productId","exchangeVariantId","contrast","psuedoEvent","width","StageOne","returnLineItems","nodes","getContentfulProduct","StyledReturnsSummaryCard","RefundDetails","RefundDetailsItem","RefundDetailTitle","span","RefundDetailTitleSummary","Body","RefundShortDesc","RefundDetail","RefundTerms","RefundDetailSummary","initialSummaryState","subtotal","taxRefund","refundEstimate","discount","ReturnsSummaryCard","orderId","listReturnLineItemRequests","forEach","rLineItem","push","headers","JSON","stringify","process","refundSummary","setRefundSummary","captureWarning","summary","lineItemRefunds","refundItem","refundDistribution","ITEM_PRICE_REFUND","refundAmount","TAX_REFUND","totalRefund","DISCOUNT_REFUND","toFixed","shamrockGreen","StyledLineItemThumbnailFinalStage","StyledLineItemThumbnail","ReturnType","Price","StageTwo","showHighlightedPrice","flexDirection","mapReturnType","StyledModal","Modal","mobileVw","FormContainer","StyledHeader","Header","EditAddressModal","openModal","order","addAddressForm","activeOrder","reloadPageData","addressData","successBannerHtml","successHTML","address1","city","PROVINCE_CODE_MAP","province","zip","navigate","state","updatedOrder","orderNumber","StyledBuyAgain","QuickShopModal","Wrapper","Img","SubHeading","MobileLineItemSummaryModal","page","summaryModalOpen","lineItems","modalOpen","setModalOpen","setOpenModal","productHandle","useContentfulProduct","buyAgainModalOpen","setBuyAgainModalOpen","getReturnLineItems","returnCompletedLineItems","status","returnStartedLineItems","returnCompletedLineItemsByReturnId","groupBy","returnStartedLineItemsByReturnId","getOrderReturnLineItem","orderTrackingLineItemsByShipment","getOrderTrackingLineItemsByShipment","latestReturnDetailForLineItem","getLatestReturnDetailForLineItem","updatedLineItems","reduce","shipment","labelUrl","returnStatus","returnId","otherLineItems","lItem","isOrderCancellable","fulfillableQuantity","isShipmentAddressEditable","shipments","isArray","unallocatedLineItems","tracker","showMenuBar","showCloseBtn","marginTop","ReviewFormModal","reviewForm","productName","href","trackingUrl","getCancellationRoute","to","getTrackingRoute","fulfillmentId","getReturnsRoute","image","StyledBackLink","BackArrow","BackArrowIcon","BackLink","text","window","history","go","TimeLineWrapper","TimeLine","Circle","isComplete","silver","Dashed","Timeline","activeStep","steps","step","StyledReturnsSummary","FeedbackBox","SubText","Heading","h1","AnotherHeading","LabelButton","StarContainer","ReturnConfirmation","recommendedProducts","pseudoSuccessMsg","returnLabelUrl","orders","user","getCurrentUser","padding","DottedSpinner","getLatestReturnDetailForOrderId","email","marginBottom","eventTracker","track","EventType","ENTER_FEEDBACK","action","entity_type","context","return_id","NewBestSellersSection","json","textColor","products","hideImageOnMobile","Container","LinkWrapper","Description","ReturnsQuery","Returns","location","contentfulAccountPage","allContentfulProduct","createReturn","createReturnResponse","createReturnLoading","createReturnError","extractQueryParamFromPageLocation","setSummaryModalOpen","setLineItems","activeLineItem","setActiveLineItem","activeLineItemIndex","setActiveLineItemIndex","activeLineItemsChecked","setActiveLineItemsChecked","setContentfulProduct","allLineItems","concat","currLocation","useLocation","stage","setStage","lineItemPhotos","setLineItemPhotos","errorMsg","setErrorMsg","setReturnLineItems","setFormData","setPseudoSuccessMsg","setReturnLabelUrl","stageParam","logSentry","lineItemIdParam","newFormData","isMethodRefund","zipObject","Object","keys","returnContentfulProduct","firstFindReturnLineItemIndex","l","existingLineItems","itemsToReturn","returnedQuantity","slice","every","rData","lineItemToShow","getHeading","StageZero","handleCheckboxClick","checkedItems","returnItems","rIdx","item","indexOf","splice","newReturnLineItems","isStoreCreditRefund","refundParameters","refundMethod","restocked","customerName","family_name","redirect","handleReturnCreate","replace","Set","getReturnLineItem","React","Info","createElement","defaultProps","module","exports","bounce_circularG","keyframes","StyledSpinner","LandingStar","Bolt","FeedbackStar","parseInt"],"mappings":"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Cd,+BACA,cACA,kBAEFC,gBAAiB,CACf,sCACA,oCACA,kBAEFC,MAAO,IAETE,KAAM,CACJZ,YAAa,CACX,iBACA,iBACA,iBACA,iBACA,kBACA,kBACA,kBAEFC,MAAO,CAAC,eAAgB,gCAAiC,mBACzDC,kBAAmB,GAEnBC,SAAU,CACR,oBACA,qBACA,oBACA,oBACA,uCACA,kBACA,kBAEFC,MAAO,CACL,6BACA,uBACA,kBAEFC,cAAe,GACfC,eAAgB,GAChBC,aAAc,GACdC,eAAgB,CACd,+BACA,cACA,kBAEFC,gBAAiB,CACf,sCACA,oCACA,kBAEFC,MAAO,IAETjB,KAAM,CACJO,YAAa,CACX,iBACA,iBACA,mBACA,oBACA,yBACA,mCACA,kBAEFC,MAAO,CACL,eACA,gCACA,qBACA,kBAEFC,kBAAmB,GACnBC,SAAU,CACR,oBACA,qBACA,uCACA,uBACA,mBACA,kBAEFC,MAAO,CACL,6BACA,uBACA,+BACA,kBAEFC,cAAe,GACfC,eAAgB,GAChBC,aAAc,GACdC,eAAgB,CACd,+BACA,cACA,kBAEFC,gBAAiB,CACf,sCACA,oCACA,kBAEFC,MAAO,IAEThB,MAAO,CACLM,YAAa,CACX,iBACA,iBACA,gBACA,iBACA,mCACA,kBAEFC,MAAO,CAAC,eAAgB,gCAAiC,kBACzDC,kBAAmB,GACnBC,SAAU,CACR,oBACA,qBACA,uCACA,uBACA,mBACA,kBAEFC,MAAO,CACL,6BACA,uBACA,+BACA,kBAEFC,cAAe,GACfC,eAAgB,GAChBC,aAAc,GACdC,eAAgB,CACd,+BACA,cACA,kBAEFC,gBAAiB,CACf,sCACA,oCACA,kBAEFC,MAAO,IAETf,KAAM,CACJK,YAAa,CACX,iBACA,iBACA,mBACA,mBACA,kBAEFC,MAAO,CACL,eACA,mBACA,gCACA,kBAEFC,kBAAmB,GAEnBC,SAAU,CACR,oBACA,qBACA,uCACA,uBACA,mBACA,kBAEFC,MAAO,CACL,6BACA,uBACA,+BACA,kBAEFC,cAAe,GACfC,eAAgB,GAChBC,aAAc,GACdC,eAAgB,CACd,+BACA,cACA,kBAEFC,g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","file":"component---src-templates-account-returns-js-3c9865faa74ba561946a.js","sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport StarIcon from '../../assets/star.svg'\n\nconst StyledProductRating = styled.form`\n  display: flex;\n  justify-content: space-between;\n  margin: 0 50px 0 0;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 ${desktopVw(80)} 0 0;\n  }\n`\n\nconst Star = styled(StarIcon)`\n  width: 14px;\n  height: 14px;\n\n  .star {\n    &__stroke {\n      fill: ${props => props.theme.colors.primary};\n    }\n    &__inner {\n      fill: ${props => props.fill && props.theme.colors.primary};\n    }\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(20)};\n    height: ${desktopVw(20)};\n  }\n`\n\nconst Input = styled.input`\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n\n  &:checked {\n    + svg {\n      .star {\n        &__inner {\n          fill: ${props => props.fill && props.theme.colors.yellow};\n        }\n      }\n    }\n  }\n`\n\nconst Rate = styled.div`\n  position: relative;\n  margin-right: 2px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(4.5)};\n  }\n`\n\nconst RatingInputWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-size: 12px;\n\n  span {\n    margin-right: 10px;\n    margin-bottom: 5px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n\n    span {\n      margin-right: ${desktopVw(10)};\n    }\n  }\n`\n\nconst StyledRatingInput = styled.div`\n  display: flex;\n  align-items: flex-start;\n`\n\nfunction StarRating({ ratingObj, onChange, initialValue }) {\n  const [value, setValue] = useState(initialValue)\n\n  return (\n    <StyledRatingInput>\n      {[...Array(5)].map((_, i) => (\n        <Rate>\n          <Input\n            label={ratingObj.label}\n            type='radio'\n            value={i + 1}\n            name={ratingObj.name}\n            onChange={e => {\n              setValue(i + 1)\n              onChange(e)\n            }}\n            aria-label={`${i} star`}\n          />\n          <Star fill={i < value ? 1 : 0} />\n        </Rate>\n      ))}\n    </StyledRatingInput>\n  )\n}\n\nconst ProductRating = ({ handleChange, ratings, formData }) => {\n  return (\n    <StyledProductRating>\n      {ratings.map(r => (\n        <RatingInputWrapper key={r.name}>\n          <span>{r.label}</span>\n          <StarRating\n            ratingObj={r}\n            onChange={handleChange}\n            initialValue={Number(formData?.[r.name])}\n          />\n        </RatingInputWrapper>\n      ))}\n    </StyledProductRating>\n  )\n}\n\nexport default ProductRating\n","export const RETURN_REASONS = [\n  {\n    value: 'SIZE_OR_FIT',\n    name: 'Size or fit',\n  },\n  {\n    value: 'STYLE',\n    name: 'Style',\n  },\n  {\n    value: 'INCORRECT_PRODUCT',\n    name: 'Incorrect product',\n  },\n  {\n    value: 'MATERIAL',\n    name: 'Material',\n  },\n  {\n    value: 'COLOR',\n    name: 'Color',\n  },\n  {\n    value: 'ORDERED_EXTRA',\n    name: 'Ordered an extra',\n  },\n  {\n    value: 'SHIPPING_DELAY',\n    name: 'Shipping delay',\n  },\n  {\n    value: 'CHANGED_MIND',\n    name: 'Changed mind',\n  },\n  {\n    value: 'DEFECTIVE_ITEM',\n    name: 'Defective item',\n  },\n  {\n    value: 'DAMAGED_PACKAGE',\n    name: 'Damaged package',\n  },\n  {\n    value: 'OTHER',\n    name: 'Other',\n  },\n]\n\nexport const REASON_CATEGORY_MAP = {\n  default: 'default',\n  sweaters: 'apparel',\n  t_shirts: 'apparel',\n  gloves: 'apparel',\n  hats: 'apparel',\n  fleece: 'apparel',\n  hats_scarves_and_gloves: 'apparel',\n  shirts: 'apparel',\n  scarves: 'apparel',\n  dresses: 'apparel',\n  tops: 'apparel',\n  bottoms: 'apparel',\n  loungewear: 'apparel',\n  bedding: 'home',\n  sheets: 'home',\n  pillowcases_and_shams: 'home',\n  bags: 'bags',\n  belts: 'belts',\n  slgs: 'slgs',\n  jewelry: 'jewelry',\n  towels: 'home_towels',\n  duvet_covers: 'home_towels',\n}\n\nexport const SUB_REASON_MAP = {\n  default: {\n    SIZE_OR_FIT: [\n      'Size too large',\n      'Size too small',\n      'Style too long',\n      'Something else',\n    ],\n    STYLE: ['Not my style', 'Style different than pictured', 'Something else '],\n    INCORRECT_PRODUCT: [],\n    MATERIAL: [\n      \"Didn't like the material\",\n      'Material seems cheap',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n  apparel: {\n    SIZE_OR_FIT: [\n      'Size too large',\n      'Size too small',\n      'Style too long',\n      'Style too short',\n      'Style too wide/boxy',\n      'Style too narrow/slim',\n      'Style not good for my body type',\n      'Something else',\n    ],\n    STYLE: ['Not my style', 'Style different than pictured', 'Something else '],\n    INCORRECT_PRODUCT: [],\n\n    MATERIAL: [\n      'Material too thin',\n      'Material too thick',\n      \"Didn't like the feel of the material\",\n      'Material seems cheap',\n      'Shrinking/twisting after wash',\n      'Pilling occured',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n  home: {\n    SIZE_OR_FIT: [\n      'Size too large',\n      'Size too small',\n      'Fit too loose ',\n      'Fit too tight ',\n      'Style too long ',\n      'Style too short',\n      'Something else',\n    ],\n    STYLE: ['Not my style', 'Style different than pictured', 'Something else '],\n    INCORRECT_PRODUCT: [],\n\n    MATERIAL: [\n      'Material too thin',\n      'Material too thick',\n      'Material to heavy',\n      'Material to light',\n      \"Didn't like the feel of the material\",\n      'Pilling occured',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n  bags: {\n    SIZE_OR_FIT: [\n      'Size too large',\n      'Size too small',\n      'Straps too long ',\n      'Straps too short ',\n      'Does not fit my laptop',\n      'Style not right for my body type',\n      'Something else',\n    ],\n    STYLE: [\n      'Not my style',\n      'Style different than pictured',\n      'Needs more pockets',\n      'Something else',\n    ],\n    INCORRECT_PRODUCT: [],\n    MATERIAL: [\n      'Material too thin',\n      'Material too thick',\n      \"Didn't like the feel of the material\",\n      'Material seems cheap',\n      'Material flaking',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      \"Color isn't versatile enough\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n  belts: {\n    SIZE_OR_FIT: [\n      'Size too large',\n      'Size too small',\n      'Belt too long',\n      'Belt too short',\n      'Style not right for my body type',\n      'Something else',\n    ],\n    STYLE: ['Not my style', 'Style different than pictured', 'Something else'],\n    INCORRECT_PRODUCT: [],\n    MATERIAL: [\n      'Material too thin',\n      'Material too thick',\n      \"Didn't like the feel of the material\",\n      'Material seems cheap',\n      'Material flaking',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      \"Color isn't versatile enough\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n  slgs: {\n    SIZE_OR_FIT: [\n      'Size too large',\n      'Size too small',\n      'Slots too tight ',\n      'Slots too loose ',\n      'Something else',\n    ],\n    STYLE: [\n      'Not my style',\n      'Not enough slots',\n      'Style different than pictured',\n      'Something else',\n    ],\n    INCORRECT_PRODUCT: [],\n\n    MATERIAL: [\n      'Material too thin',\n      'Material too thick',\n      \"Didn't like the feel of the material\",\n      'Material seems cheap',\n      'Material flaking',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      \"Color isn't versatile enough\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n  jewelry: {\n    SIZE_OR_FIT: [\n      'Size too large',\n      'Size too small',\n      'Fit too long',\n      'Fit too short',\n      'Style too thick ',\n      'Style too narrow/slim',\n      'Something else',\n    ],\n    STYLE: ['Not my style', 'Style different than pictured', 'Something else'],\n    INCORRECT_PRODUCT: [],\n\n    MATERIAL: [\n      'Material too thin',\n      'Material too thick',\n      \"Didn't like the feel of the material\",\n      'Material seems cheap',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      \"Color isn't versatile enough\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n  home_towels: {\n    SIZE_OR_FIT: ['Size too large', 'Size too small', 'Something else'],\n    STYLE: ['Not my style', 'Style different than pictured', 'Something else'],\n    INCORRECT_PRODUCT: [],\n\n    MATERIAL: [\n      'Material too thin',\n      'Material too thick',\n      'Material too heavy',\n      'Material too light',\n      \"Didn't like the feel of the material\",\n      'Pilling occured',\n      'Something else',\n    ],\n    COLOR: [\n      'Color different than shown',\n      \"Color didn't suit me\",\n      'Something else',\n    ],\n    ORDERED_EXTRA: [],\n    SHIPPING_DELAY: [],\n    CHANGED_MIND: [],\n    DEFECTIVE_ITEM: [\n      'Defective or Damaged product',\n      'Made poorly',\n      'Something else',\n    ],\n    DAMAGED_PACKAGE: [\n      'Damaged shipping box but product ok',\n      'Damaged package & damaged product',\n      'Something else',\n    ],\n    OTHER: [],\n  },\n}\n\nexport const RATINGS_MAP = {\n  default: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n    {\n      label: 'Fit',\n      name: 'ratingFit',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Great',\n      error: 'Please add a review for fit of this item',\n    },\n  ],\n  home: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n  ],\n  apparel: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n    {\n      label: 'Fit',\n      name: 'ratingFit',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Great',\n      error: 'Please add a review for fit of this item',\n    },\n  ],\n  bags: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n    {\n      label: 'Fit',\n      name: 'ratingFit',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Great',\n      error: 'Please add a review for fit of this item',\n    },\n  ],\n  belts: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n    {\n      label: 'Fit',\n      name: 'ratingFit',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Great',\n      error: 'Please add a review for fit of this item',\n    },\n  ],\n  slgs: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n  ],\n  jewelry: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n  ],\n  home_towels: [\n    {\n      label: 'Quality',\n      name: 'ratingQuality',\n      range: 5,\n      startVal: 'Poor',\n      endVal: 'Exceptional',\n      error: 'Please add a review for quality of this item',\n    },\n  ],\n}\n\nexport const REASON_COMMENTS_MAP = {\n  SIZE_OR_FIT: 'Describe what was off about the Size or fit',\n  STYLE: 'Describe what was off about the style',\n  INCORRECT_PRODUCT: 'Tell us which product was sent to you by mistake',\n  MATERIAL: 'Describe what was off about the material',\n  COLOR: 'Describe what was off about the color',\n  ORDERED_EXTRA: 'Describe what can we do about it',\n  SHIPPING_DELAY: 'Describe what you expect for your shipping experience',\n  CHANGED_MIND: 'Tell us what made you change your mind',\n  DEFECTIVE_ITEM: 'Describe what was defective',\n  DAMAGED_PACKAGE: 'Describe what was damaged',\n  OTHER: \"What was off about your order that wasn't listed\",\n}\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../../styles/utils'\nimport useFetch from '../../../hooks/useFetch'\n\nimport CloseIcon from '../../../assets/close.svg'\nimport SpinningLoader from '../../SpinningLoader'\n\nconst StyledUploadThumbnail = styled.div`\n  position: relative;\n`\n\nconst DeletePhotoBtn = styled.button`\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  padding: 5px;\n  background: ${props => props.theme.colors.secondary};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(5)};\n  }\n`\n\nconst StyledCloseIcon = styled(CloseIcon)`\n  width: 11px;\n  path {\n    fill: ${props => props.theme.colors.primary};\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(11)};\n  }\n`\n\nconst PreviewThumbnailImg = styled.img`\n  width: 105px;\n  opacity: ${props => (props.opacity ? '0.5' : '1')};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(136)};\n  }\n`\n\nconst UploadThumbnail = ({\n  fileName,\n  imageApiUrl,\n  base64String,\n  photos,\n  removePhoto,\n  setPhotos,\n  file,\n}) => {\n  const { fetchData, response, error, loading } = useFetch()\n\n  useEffect(() => {\n    if (!response) return\n\n    const newPhotos = [...photos]\n    const objIndex = photos.findIndex(({ name }) => name === fileName)\n\n    newPhotos[objIndex].response = response\n    setPhotos(newPhotos)\n  }, [response])\n\n  useEffect(() => {\n    if (response) return\n\n    const data = new FormData()\n\n    data.append('file', file)\n\n    const options = {\n      method: 'post',\n      body: data,\n    }\n\n    fetchData(imageApiUrl, options)\n  }, [file])\n\n  return (\n    <StyledUploadThumbnail>\n      <DeletePhotoBtn\n        type='button'\n        aria-label='Remove photo'\n        onClick={() => removePhoto(fileName)}\n      >\n        <StyledCloseIcon />\n      </DeletePhotoBtn>\n      {loading && <SpinningLoader />}\n      <PreviewThumbnailImg src={base64String} opacity={loading ? 1 : 0} />\n    </StyledUploadThumbnail>\n  )\n}\n\nexport default UploadThumbnail\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../../styles/utils'\n\nimport UploadThumbnail from './UploadThumbnail'\nimport CameraIcon from '../../../assets/camera.svg'\n\nconst StyledImageUpload = styled.div`\n  position: relative;\n  box-sizing: border-box;\n  border: 1px solid ${props => props.theme.colors.greyLight};\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(38)};\n    padding: 0;\n    width: 100%;\n  }\n`\n\nconst Inner = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 10px 16px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(10)} ${desktopVw(10)};\n  }\n`\n\nconst Camera = styled(CameraIcon)`\n  min-width: 13.5px;\n  margin-right: 9px;\n  height: 23px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(33)};\n    height: ${desktopVw(23)};\n  }\n`\n\nconst Input = styled.input`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  opacity: 0;\n`\n\nconst ThumbnailList = styled.ul`\n  display: flex;\n  flex-flow: wrap;\n  margin-bottom: ${props => (props.spacingL ? '32px' : '20px')};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${props => (props.spacingL ? desktopVw(36) : desktopVw(20))};\n  }\n`\n\nconst ThumbnailItem = styled.li`\n  margin: 0 10px 10px 0;\n\n  &:nth-child(3n + 3) {\n    margin-right: 0;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 ${desktopVw(10)} ${desktopVw(10)} 0;\n\n    &:nth-child(3n + 3) {\n      margin: 0 ${desktopVw(10)} ${desktopVw(10)} 0;\n    }\n\n    &:nth-child(5n + 5) {\n      margin-right: 0;\n    }\n  }\n`\n\nconst ImageWithTextLayout = styled.div`\n  cursor: pointer;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    align-items: center;\n  }\n`\n\nexport const ImageUpload = ({\n  className,\n  placeholder,\n  name,\n  required = false,\n  imageApiUrl,\n  handleFiles,\n  photos,\n  setPhotos,\n  removePhoto,\n}) => {\n  return (\n    <>\n      {photos.length > 0 && (\n        <ThumbnailList>\n          {photos.map((p, i) => (\n            <ThumbnailItem key={`${p}${i}`}>\n              <UploadThumbnail\n                fileName={p.name}\n                imageApiUrl={imageApiUrl}\n                file={p.file}\n                base64String={p.value}\n                photos={photos}\n                removePhoto={removePhoto}\n                setPhotos={setPhotos}\n              />\n            </ThumbnailItem>\n          ))}\n        </ThumbnailList>\n      )}\n      <ImageWithTextLayout>\n        <StyledImageUpload>\n          <Inner>\n            <Camera />\n          </Inner>\n          <Input\n            className={className}\n            placeholder={placeholder}\n            required={required}\n            name={name}\n            type='file'\n            onChange={e => handleFiles(e)}\n            accept='image/png, image/jpeg'\n            multiple\n          />\n        </StyledImageUpload>\n      </ImageWithTextLayout>\n    </>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../../styles/utils'\n\n// Components\nimport LineItemThumbnail from '../../Account/LineItemThumbnail'\nimport Button from '../../Button'\n\n// Stage components\nimport ProductRating from '../ProductRating'\n\nimport {\n  Alert,\n  Container,\n  CustomSelect,\n  Select,\n  TagSelection,\n  TextArea,\n} from '../../FormElements'\n\nimport {\n  RATINGS_MAP,\n  REASON_CATEGORY_MAP,\n  REASON_COMMENTS_MAP,\n  RETURN_REASONS,\n  SUB_REASON_MAP,\n} from '../../Account/ReturnsModal/returnModalData'\n\nimport {\n  getImageUrls,\n  getQuantitiesRemainingToReturn,\n} from '../../../utils/returns'\nimport Drawer from '../../common/Drawer'\nimport { ImageUpload } from '../../common/ImageUpload'\n\nconst StyledLineItem = styled(LineItemThumbnail)`\n  margin: 0;\n  .line_item_thumbnail__content {\n    flex-direction: column;\n  }\n  .line_item_thumbnail__detail {\n    margin: 3px 0;\n  }\n`\n\nconst Form = styled.form`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding-top: ${desktopVw(26.5)};\n  }\n`\n\nconst Text = styled.div`\n  font-size: 12px;\n  margin: 15px 0 10px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n    margin: 0 0 ${desktopVw(10)};\n  }\n`\n\nconst Footer = styled.div`\n  margin-top: 30px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: ${desktopVw(20)};\n  }\n`\n\nconst AlertContainer = styled.div`\n  margin-bottom: 16px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(16)};\n  }\n`\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: column-reverse;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n  }\n`\n\nconst Back = styled(Button)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 ${desktopVw(10)} 0 0;\n    padding-left: ${desktopVw(62)};\n    padding-right: ${desktopVw(62)};\n  }\n`\n\nconst StyledButton = styled(Button)`\n  display: block;\n  width: 100%;\n  margin: 0 0 10px;\n  padding: 10px;\n  span {\n    font-size: 12px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    span {\n      font-size: ${desktopVw(12)};\n      text-transform: uppercase;\n    }\n  }\n`\n\nconst QuantitySelect = styled(Select)`\n  flex-shrink: 0;\n  flex: 1;\n  font-size: 16px;\n  margin-right: 0px;\n  margin-top: 10px;\n  width: 59px;\n\n  select {\n    text-transform: uppercase;\n    font-size: 12px;\n    padding: 6px 10px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(65)};\n    margin-top: ${desktopVw(10)};\n    select {\n      font-size: ${desktopVw(12)};\n      padding: ${desktopVw(6)} ${desktopVw(12)};\n    }\n  }\n`\n\nfunction isPhotoUploadRequired(formData) {\n  return ['DEFECTIVE_ITEM', 'DAMAGED_PACKAGE'].includes(formData?.reasonCode)\n}\n\nconst StageZeroDrawer = ({\n  open,\n  closeModal,\n  lineItem,\n  saveReturnLineItem,\n  contentfulProduct,\n  onSubmitSuccess,\n  formData,\n  validationError,\n  setValidationError,\n  handleChange,\n  returnLineItem,\n  photos,\n  handlePhotosChange,\n}) => {\n  const imageUrl = `https://api.onequince.com/service/returns/upload-image?lineItemId=${lineItem?.id}`\n\n  const [currentLineItemId, setCurrentLineItemId] = useState(null)\n\n  const [localPhotos, setLocalPhotos] = useState(photos)\n\n  const [productType, setProductType] = useState('default')\n\n  const [returnQuantity, setReturnQuantity] = useState(\n    Math.min(getQuantitiesRemainingToReturn(lineItem), 1),\n  )\n\n  const resetModal = () => {\n    // Initialize the state\n    setProductType('default')\n    setReturnLineItemReview({})\n    setSubReasons([])\n    setValidationError('')\n    setTextAreaPlaceholder('Comments')\n  }\n\n  const handleFiles = e => {\n    if (!e.target.files) return\n    const { files } = e.target\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i]\n\n      if (photos.some(({ name }) => name === file.name)) return\n\n      const reader = new FileReader()\n      reader.readAsDataURL(file)\n\n      reader.onload = () => {\n        setLocalPhotos(prevState => {\n          const newPhotos = [\n            ...prevState,\n            { name: file.name, value: reader.result, response: '', file },\n          ]\n          handlePhotosChange(newPhotos)\n          return newPhotos\n        })\n      }\n\n      reader.onerror = function(error) {\n        console.log('Error: ', error)\n      }\n    }\n  }\n\n  const removePhoto = fileName => {\n    const filteredPhotos = photos.filter(({ name }) => name !== fileName)\n    setLocalPhotos(filteredPhotos)\n    handlePhotosChange(filteredPhotos)\n  }\n\n  useEffect(() => {\n    if (!contentfulProduct) return\n    if (contentfulProduct.productTypeName) {\n      setProductType(contentfulProduct.productTypeName.toLowerCase())\n    }\n  }, [contentfulProduct])\n\n  useEffect(() => {\n    if (!lineItem) return\n    setReturnQuantity(Math.min(getQuantitiesRemainingToReturn(lineItem), 1))\n    if (!currentLineItemId) {\n      setCurrentLineItemId(lineItem.id)\n    } else if (currentLineItemId != lineItem.id) {\n      setCurrentLineItemId(lineItem.id)\n      resetModal()\n    }\n  }, [lineItem])\n\n  const [returnLineItemReview, setReturnLineItemReview] = useState(\n    returnLineItem?.returnLineItemReview ?? {},\n  )\n  const [subReasons, setSubReasons] = useState([])\n\n  const [textAreaPlaceholder, setTextAreaPlaceholder] = useState('Optional')\n\n  useEffect(() => {\n    if (!formData.reasonCode) return\n\n    const subReasons =\n      SUB_REASON_MAP[\n        REASON_CATEGORY_MAP[\n          (contentfulProduct?.productTypeName ?? '').toLowerCase()\n        ] || REASON_CATEGORY_MAP.default\n      ][formData.reasonCode]\n\n    setSubReasons(subReasons)\n    setTextAreaPlaceholder(REASON_COMMENTS_MAP[formData.reasonCode])\n  }, [formData])\n\n  const handleChangeReview = e => {\n    setValidationError('')\n\n    const { target } = e\n    const { name } = target\n    const { value } = target\n\n    setReturnLineItemReview({\n      ...returnLineItemReview,\n      [name]: value,\n    })\n  }\n\n  const valid = () => {\n    if (!formData.reasonCode) {\n      setValidationError('Please select a reason before proceeding')\n\n      return false\n    }\n\n    if (isPhotoUploadRequired(formData) && (photos || []).length === 0) {\n      setValidationError('Please upload a photo before proceeding')\n\n      return false\n    }\n\n    if (subReasons.length > 0 && !returnLineItemReview?.subReason) {\n      setValidationError('Please select an additional reason before proceeding')\n\n      return false\n    }\n\n    for (const r of RATINGS_MAP[\n      REASON_CATEGORY_MAP[productType] || REASON_CATEGORY_MAP.default\n    ]) {\n      if (!returnLineItemReview[r.name]) {\n        setValidationError(r.error)\n        return false\n      }\n    }\n\n    setValidationError('')\n    return true\n  }\n\n  const handleSubmit = () => {\n    if (!valid()) return\n\n    saveReturnLineItem(\n      {\n        ...formData,\n        lineItemId: lineItem.id,\n        returnLineItemReview: {\n          ...returnLineItemReview,\n          reason: formData.reasonCode,\n          returnLineItemId: lineItem.id,\n        },\n        lineItem,\n        imageUrls: getImageUrls(photos),\n      },\n      contentfulProduct,\n      returnQuantity,\n    )\n\n    onSubmitSuccess()\n    closeModal()\n  }\n\n  function handleQuantityChange(e) {\n    const quantitiesRemainingToReturn = getQuantitiesRemainingToReturn(lineItem)\n    const { value } = e.target\n    if (value <= 0) setReturnQuantity(Math.min(quantitiesRemainingToReturn, 1))\n    else if (value > quantitiesRemainingToReturn)\n      setReturnQuantity(Number(quantitiesRemainingToReturn))\n    else setReturnQuantity(Number(value))\n  }\n\n  return (\n    <Drawer open={open} onClose={closeModal}>\n      <StyledLineItem secondaryLayout lineItem={lineItem} />\n\n      <Form>\n        {getQuantitiesRemainingToReturn(lineItem) > 1 && (\n          <Container>\n            <Text>Quantity</Text>\n            <QuantitySelect\n              options={[\n                ...new Array(getQuantitiesRemainingToReturn(lineItem)),\n              ].map((_, idx) => idx + 1)}\n              onChange={handleQuantityChange}\n            />\n          </Container>\n        )}\n        <Container>\n          <Text>Reason</Text>\n          <CustomSelect\n            label='Select Reason'\n            name='reasonCode'\n            required\n            options={RETURN_REASONS}\n            onChange={e => {\n              setReturnLineItemReview({\n                ...returnLineItemReview,\n                subReason: null,\n              })\n              setLocalPhotos([])\n              handlePhotosChange([])\n              handleChange(e)\n            }}\n            defaultOption={\n              RETURN_REASONS.find(rObj => rObj.value === formData?.reasonCode)\n                ?.name\n            }\n          />\n        </Container>\n        {formData.reasonCode && subReasons.length > 0 && (\n          <Container>\n            <Text>Additional Reason</Text>\n            <CustomSelect\n              label='Select Additional Reason'\n              name='subReason'\n              required\n              options={(subReasons || []).map(reason => ({\n                value: reason,\n                name: reason,\n              }))}\n              onChange={handleChangeReview}\n              defaultOption={returnLineItemReview?.subReason}\n            />\n          </Container>\n        )}\n        {isPhotoUploadRequired(formData) && (\n          <Container>\n            <Text>Upload Photo (Required)</Text>\n            <ImageUpload\n              imageApiUrl={imageUrl}\n              handleFiles={handleFiles}\n              photos={photos}\n              setPhotos={handlePhotosChange}\n              removePhoto={removePhoto}\n            />\n          </Container>\n        )}\n        <Container>\n          <ProductRating\n            ratings={\n              RATINGS_MAP[\n                REASON_CATEGORY_MAP[productType] || REASON_CATEGORY_MAP.default\n              ]\n            }\n            handleChange={handleChangeReview}\n            formData={returnLineItemReview}\n          />\n        </Container>\n        <Container>\n          <Text>Additional Comments</Text>\n          <TextArea\n            name='additionalComments'\n            required\n            placeholder={textAreaPlaceholder}\n            onChange={handleChangeReview}\n            value={returnLineItemReview?.additionalComments}\n            height={100}\n          />\n        </Container>\n      </Form>\n\n      <Footer>\n        {validationError && (\n          <AlertContainer>\n            <Alert message={validationError} />\n          </AlertContainer>\n        )}\n        <ButtonContainer>\n          <StyledButton black type='button' onClick={handleSubmit}>\n            Submit\n          </StyledButton>\n        </ButtonContainer>\n      </Footer>\n    </Drawer>\n  )\n}\n\nexport default StageZeroDrawer\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport Image from 'gatsby-image'\n\nimport { desktopVw } from '../../styles/utils'\nimport { decodeIdFromGraphQLResponse } from '../../utils'\n\nimport useShopifyProduct from '../../hooks/useShopifyProduct'\nimport useSelectedOptions from '../../hooks/useSelectedOptions'\n\nimport ProductSizeSelector from '../ProductSizeSelector'\nimport ProductColorSelector from '../ProductColorSelector'\n\nconst StyledLineItemSelect = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 30px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(24)};\n    flex-direction: column;\n  }\n`\n\nconst ImageContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  padding-bottom: 15px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    flex-direction: row;\n  }\n`\n\nconst MobileTitle = styled.div`\n  font-size: 12px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: none;\n  }\n`\n\nconst Title = styled.div`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n    font-size: ${desktopVw(16)};\n    margin: 0 0 ${desktopVw(14)};\n  }\n`\n\nconst ImageWrapper = styled.div`\n  width: 80px;\n  height: 104px;\n  flex-shrink: 0;\n  margin: 0 12px 0 0;\n  background: ${props => props.theme.colors.greyLighter};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 ${desktopVw(13)} 0 0;\n    width: ${desktopVw(80)};\n    height: ${desktopVw(104)};\n  }\n`\nconst StyledImage = styled(Image)`\n  width: 100%;\n  height: 100%;\n`\n\nconst Body = styled.div``\n\nconst SizeWrapper = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(10)};\n  }\n`\n\nconst StyledSizeSelector = styled(ProductSizeSelector)`\n  border-top: none;\n  justify-content: start;\n`\n\nconst ExchangeLineItemSelector = ({\n  onLineItemSelect,\n  product,\n  startingColor,\n  startingSize,\n  lineItem,\n  clearValidationError,\n  handleOutOfStock,\n}) => {\n  const { product: p } = useShopifyProduct(product.shopifyProduct.handle)\n  const [oneSize, setOneSize] = useState(false)\n  const [sizes, setSizes] = useState(null)\n  const [shopifyColors, setShopifyColors] = useState([])\n  const [outOfStock, setOutOfStock] = useState(false)\n  const newStartingSize =\n    startingSize ||\n    (oneSize ? sizes[0] : lineItem.variantTitle.split(' / ')[0].trim())\n\n  const [productImages, setProductImages] = useState([])\n\n  useEffect(() => {\n    if (!p) return\n    const sizeOption = p.options.find(({ name }) => name === 'Size')\n    const colorOption = p.options.find(({ name }) => name === 'Color')\n\n    if (sizeOption) {\n      setSizes(sizeOption.values)\n    }\n\n    if (colorOption) {\n      setShopifyColors(colorOption.values)\n    }\n  }, [p])\n\n  const newStartingColor =\n    startingColor ||\n    lineItem.variantTitle\n      .split(' / ')\n      .filter(v => v !== '-')\n      .pop()\n      .trim()\n\n  const {\n    handleChange,\n    selectedSize,\n    selectedColor,\n    productVariant,\n  } = useSelectedOptions(\n    product.shopifyProduct.handle,\n    newStartingSize,\n    newStartingColor,\n  )\n\n  useEffect(() => {\n    const selectedColorImages = product.productImages.filter(\n      ({ color }) => color.name === selectedColor,\n    )\n\n    setProductImages(selectedColorImages)\n  }, [selectedColor])\n\n  useEffect(() => {\n    if (!productVariant || !productVariant.variantBySelectedOptions) return\n\n    clearValidationError && clearValidationError()\n\n    const variantId = decodeIdFromGraphQLResponse(\n      productVariant.variantBySelectedOptions.id,\n    )\n\n    onLineItemSelect(parseFloat(variantId), {\n      size: oneSize ? sizes[0] : selectedSize,\n      color: selectedColor,\n      price: parseFloat(productVariant.variantBySelectedOptions.priceV2.amount),\n    })\n\n    if (productVariant && productVariant.variantBySelectedOptions) {\n      const availableQuantity =\n        productVariant.variantBySelectedOptions.quantityAvailable\n      setOutOfStock(availableQuantity <= 0)\n      handleOutOfStock(availableQuantity <= 0)\n    }\n  }, [productVariant, selectedColor, selectedSize])\n\n  useEffect(() => {\n    if (!sizes) return\n\n    if (sizes.length === 1) {\n      setOneSize(true)\n    }\n  }, [sizes])\n\n  return (\n    <StyledLineItemSelect>\n      <ImageContainer>\n        <ImageWrapper>\n          {productImages.length > 0 && (\n            <StyledImage fluid={productImages[0].images[0].fluid} />\n          )}\n        </ImageWrapper>\n        <MobileTitle>Select color and size for exchange</MobileTitle>\n        <Title>Select color and size for exchange</Title>\n      </ImageContainer>\n\n      <div>\n        {product && (\n          <ProductColorSelector\n            colors={product.colors}\n            onChange={handleChange}\n            selected={selectedColor}\n            shopifyColors={shopifyColors}\n            productTitle={\n              product.title ||\n              (product.shopifyProduct && product.shopifyProduct.title)\n            }\n            showPrice={false}\n          />\n        )}\n        {p && sizes && (\n          <SizeWrapper>\n            <StyledSizeSelector\n              sizes={sizes}\n              onChange={handleChange}\n              selected={selectedSize}\n              selectedColor={selectedColor}\n              variants={p.variants.edges}\n              sizeGuide={product.sizeGuide}\n              sizeGuideJson={product.sizeGuideJson}\n              isOutOfStock={outOfStock}\n            />\n          </SizeWrapper>\n        )}\n      </div>\n    </StyledLineItemSelect>\n  )\n}\n\nexport default ExchangeLineItemSelector\n","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport Tippy from '@tippyjs/react'\nimport useSelectedOptions from '../../../hooks/useSelectedOptions'\nimport {\n  DetailValue,\n  Edit,\n  ProductOption,\n  ReturnItem,\n  StyledButton,\n  StyledCheckbox,\n  StyledLineItemThumbnail,\n} from '../commons'\nimport { colors } from '../../../styles/theme'\nimport Drawer from '../../common/Drawer'\nimport ExchangeLineItemSelector from '../ExchangeLineItemSelector'\nimport { desktopVw } from '../../../styles/utils'\nimport useDetectDevices from '../../../hooks/useDetectDevices'\nimport { formatReasonCode, formatSubReason } from '../../../utils/returns'\n\nimport Bolt from '../../../assets/bolt.svg'\nimport Info from '../../../assets/info.svg'\n\nimport 'tippy.js/dist/tippy.css'\n\nconst DetailsWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: unset;\n  }\n`\n\nconst StyledCheckboxStageTwo = styled(StyledCheckbox)`\n  label {\n    color: ${({ theme }) => theme.colors.primary};\n  }\n  border: ${({ checked }) => checked && '0.35px solid #c4c4c4'};\n  padding: ${({ checked }) => checked && '2px 8px 3px'};\n  margin-left: ${({ checked }) => checked && '-9px'};\n  margin-top: ${({ checked, showMarginTop }) =>\n    checked && showMarginTop && '4px'};\n  margin-right: ${({ checked }) => checked && 0};\n  margin-bottom: 8px;\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  border-radius: 5px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: 0;\n    margin-bottom: ${desktopVw(18)};\n  }\n`\n\nconst ExchangeWrapper = styled.div`\n  font-size: 10px;\n  display: flex;\n  .exchange {\n    font-weight: 500;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n  }\n`\n\nexport function LineItem({\n  lineItem,\n  reasonCode,\n  returnLineItemReview,\n  contentfulProduct,\n  formData,\n  handleChange,\n  setValidationError,\n  saveReturnLineItem,\n  initialExchangeOption,\n  onOutOfStockForReplace,\n  storeCreditReturnsMessage,\n}) {\n  const { productVariant } = useSelectedOptions(\n    contentfulProduct.shopifyProduct.handle,\n    lineItem.variantTitle.split(' / ')[0].trim(),\n    lineItem.variantTitle.split(' / ')[1].trim(),\n  )\n  const { productVariant: exchangeProductVariant } = useSelectedOptions(\n    contentfulProduct.shopifyProduct.handle,\n    initialExchangeOption?.size,\n    initialExchangeOption?.color,\n  )\n\n  const [outOfStockForReplace, setOutOfStockForReplace] = useState(false)\n  const [exchangeOption, setExchangeOption] = useState(initialExchangeOption)\n  const [exchangeData, setExchangeData] = useState({})\n  const [drawerOpen, setDrawerOpen] = useState(false)\n  const [outOfStock, setOutOfStock] = useState(false)\n\n  const handleOutOfStock = isOutOfStock => {\n    setOutOfStock(isOutOfStock)\n  }\n\n  const setExchangeVariant = (id, option) => {\n    setExchangeData({\n      exchangeProductId: lineItem.productId,\n      exchangeVariantId: id,\n    })\n\n    setExchangeOption(option)\n  }\n\n  function saveLineItem(e) {\n    saveReturnLineItem(\n      {\n        ...formData,\n        ...exchangeData,\n        lineItemId: lineItem.id,\n        returnType: e.target.value,\n        returnLineItemReview: {\n          ...returnLineItemReview,\n          reason: formData.reasonCode,\n          returnLineItemId: lineItem.id,\n        },\n        lineItem,\n        exchangeOption,\n      },\n      contentfulProduct,\n      1,\n    )\n  }\n\n  const handleSubmit = () => {\n    if (!exchangeOption) {\n      setValidationError('Please select a size')\n      return\n    }\n    const psuedoEvent = {\n      target: { name: 'returnType', value: 'EXCHANGE', checked: true },\n    }\n    saveLineItem(psuedoEvent)\n    setDrawerOpen(false)\n    handleChange(psuedoEvent, lineItem?.id)\n  }\n\n  useEffect(() => {\n    if (!productVariant || !productVariant.variantBySelectedOptions) return\n\n    if (productVariant && productVariant.variantBySelectedOptions) {\n      const availableQuantity =\n        productVariant.variantBySelectedOptions.quantityAvailable\n      if (formData?.returnType === 'REPLACEMENT') {\n        handleCheckboxChange({\n          target: {\n            name: 'returnType',\n            value: availableQuantity <= 0 ? 'REFUND' : 'REPLACEMENT',\n            checked: true,\n          },\n        })\n      }\n      setOutOfStockForReplace(availableQuantity <= 0)\n      if (onOutOfStockForReplace) onOutOfStockForReplace(availableQuantity <= 0)\n    }\n  }, [productVariant])\n\n  useEffect(() => {\n    if (\n      !exchangeProductVariant ||\n      !exchangeProductVariant.variantBySelectedOptions ||\n      formData?.returnType !== 'EXCHANGE'\n    )\n      return\n\n    if (\n      exchangeProductVariant &&\n      exchangeProductVariant.variantBySelectedOptions\n    ) {\n      const availableQuantity =\n        exchangeProductVariant.variantBySelectedOptions.quantityAvailable\n      if (availableQuantity <= 0) {\n        handleCheckboxChange({\n          target: {\n            name: 'returnType',\n            value: 'REFUND',\n            checked: true,\n          },\n        })\n      }\n    }\n  }, [exchangeProductVariant])\n\n  function handleCheckboxChange(e) {\n    saveLineItem(e)\n    handleChange(e, lineItem?.id)\n  }\n\n  const { devices } = useDetectDevices()\n\n  return (\n    <ReturnItem>\n      <ProductOption>\n        <StyledLineItemThumbnail lineItem={lineItem} />\n      </ProductOption>\n      <DetailsWrapper>\n        <DetailValue>\n          Return Reason:{' '}\n          {`${formatReasonCode(reasonCode || '')}${formatSubReason(\n            returnLineItemReview,\n          )}`}\n        </DetailValue>\n        <StyledCheckboxStageTwo\n          name='returnType'\n          value='REFUND_TO_STORE_CREDIT'\n          checked={formData.returnType === 'REFUND_TO_STORE_CREDIT'}\n          checkedColor={colors.primary}\n          onChange={handleCheckboxChange}\n          label={\n            <div style={{ display: 'flex' }}>\n              <div style={{ marginRight: 5 }}>Refund to store credit </div>\n              <div>\n                <Bolt />\n              </div>\n              <p style={{ fontWeight: 500 }}>fastest</p>\n              <div style={{ margin: '2px 0 0 5px' }}>\n                <Tippy content={storeCreditReturnsMessage}>\n                  <span tabIndex='0'>\n                    <Info />\n                  </span>\n                </Tippy>\n              </div>\n            </div>\n          }\n        />\n\n        <StyledCheckboxStageTwo\n          name='returnType'\n          value='REPLACEMENT'\n          checked={formData.returnType === 'REPLACEMENT'}\n          checkedColor={colors.primary}\n          onChange={handleCheckboxChange}\n          disabled={outOfStockForReplace}\n          label='Exchange with the exact same item'\n        />\n\n        <StyledCheckboxStageTwo\n          name='returnType'\n          value='EXCHANGE'\n          checkedColor={colors.primary}\n          checked={formData.returnType === 'EXCHANGE'}\n          label={\n            formData.returnType === 'EXCHANGE' ? (\n              <ExchangeWrapper>\n                <p style={{ marginRight: 20 }}>\n                  Exchange Color:{' '}\n                  {devices.mobile && (\n                    <p className='exchange'>{exchangeOption?.color}</p>\n                  )}\n                  {devices.desktop && (\n                    <span className='exchange'>{exchangeOption?.color}</span>\n                  )}\n                </p>\n                <p>\n                  Size:{' '}\n                  {devices.mobile && (\n                    <p className='exchange'>{exchangeOption?.size}</p>\n                  )}\n                  {devices.desktop && (\n                    <span className='exchange'>{exchangeOption?.size}</span>\n                  )}\n                </p>\n                <Edit onClick={() => setDrawerOpen(true)}>Edit</Edit>\n              </ExchangeWrapper>\n            ) : (\n              'Exchange with different size or color'\n            )\n          }\n          onChange={() => {\n            setDrawerOpen(true)\n          }}\n          showMarginTop\n        />\n\n        <StyledCheckboxStageTwo\n          name='returnType'\n          value='REFUND'\n          checked={formData.returnType === 'REFUND'}\n          checkedColor={colors.primary}\n          label='Refund to your card'\n          onChange={handleCheckboxChange}\n          showMarginTop\n        />\n      </DetailsWrapper>\n      {drawerOpen && (\n        <Drawer open={drawerOpen} onClose={() => setDrawerOpen(false)}>\n          <ExchangeLineItemSelector\n            onLineItemSelect={setExchangeVariant}\n            lineItem={lineItem}\n            startingSize={exchangeOption && exchangeOption.size}\n            startingColor={exchangeOption && exchangeOption.color}\n            product={contentfulProduct}\n            clearValidationError={() => setValidationError('')}\n            handleOutOfStock={handleOutOfStock}\n          />\n          <StyledButton\n            contrast\n            onClick={handleSubmit}\n            style={{ width: '100%' }}\n            disabled={outOfStock}\n          >\n            Submit\n          </StyledButton>\n        </Drawer>\n      )}\n    </ReturnItem>\n  )\n}\n","import React from 'react'\nimport { LineItem } from './LineItem'\nimport { getContentfulProduct } from '../../../utils/returns'\n\nexport function StageOne({\n  returnLineItems,\n  formData,\n  handleChange,\n  setValidationError,\n  saveReturnLineItem,\n  nodes,\n  setOutOfStockForReplace,\n  storeCreditReturnsMessage,\n}) {\n  return (\n    <>\n      {returnLineItems.map(\n        ({ lineItem, reasonCode, returnLineItemReview, exchangeOption }, i) => (\n          <LineItem\n            key={lineItem.id}\n            lineItem={lineItem}\n            reasonCode={reasonCode}\n            returnLineItemReview={returnLineItemReview}\n            contentfulProduct={getContentfulProduct(nodes, lineItem)}\n            formData={formData?.[lineItem?.id] ?? {}}\n            handleChange={handleChange}\n            setValidationError={setValidationError}\n            saveReturnLineItem={saveReturnLineItem}\n            initialExchangeOption={exchangeOption}\n            onOutOfStockForReplace={setOutOfStockForReplace}\n            storeCreditReturnsMessage={storeCreditReturnsMessage}\n          />\n        ),\n      )}\n    </>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../../styles/utils'\n\nimport useFetch from '../../../hooks/useFetch'\n\nimport { captureWarning } from '../../Sentry/utils'\nimport { colors } from '../../../styles/theme'\n\nconst StyledReturnsSummaryCard = styled.div`\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  flex-direction: column;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: ${desktopVw(59)};\n    flex-direction: row;\n  }\n`\n\nconst RefundDetails = styled.ul``\n\nconst RefundDetailsItem = styled.li`\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  margin-bottom: 24px;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(18)};\n    justify-content: end;\n  }\n`\n\nconst RefundDetailTitle = styled.span`\n  font-size: 12px;\n  line-height: 1;\n  font-weight: 500;\n  margin-right: 10px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n  }\n`\n\nconst RefundDetailTitleSummary = styled(RefundDetailTitle)`\n  font-weight: 500 !important;\n  font-size: 15px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(15)};\n  }\n`\n\nconst Body = styled.div`\n  ${RefundDetailTitle} {\n    font-weight: normal;\n  }\n  ${RefundDetailsItem} {\n    margin-bottom: 20px;\n  }\n  width: 100%;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: unset;\n    ${RefundDetailsItem} {\n      width: ${desktopVw(290)};\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n`\n\nconst RefundShortDesc = styled.p`\n  margin-bottom: 5px;\n`\n\nconst RefundDetail = styled.div`\n  font-size: 12px;\n  text-align: left;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n    max-width: ${desktopVw(280)};\n  }\n`\n\nconst RefundTerms = styled.p`\n  font-size: 10px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(10)};\n  }\n`\n\nconst RefundDetailSummary = styled(RefundDetail)`\n  font-weight: 500 !important;\n  font-size: 15px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(15)};\n  }\n`\n\nconst initialSummaryState = {\n  subtotal: 0,\n  taxRefund: 0,\n  refundEstimate: 0,\n  discount: 0,\n}\n\nconst ReturnsSummaryCard = ({ returnLineItems }) => {\n  const { fetchData, response, error, loading } = useFetch()\n\n  useEffect(() => {\n    const listReturnLineItemRequests = []\n    let orderId\n\n    returnLineItems.forEach(rLineItem => {\n      if (\n        rLineItem.returnType === 'REFUND' ||\n        rLineItem.returnType === 'REFUND_TO_STORE_CREDIT'\n      ) {\n        ;({ orderId } = rLineItem.lineItem)\n        listReturnLineItemRequests.push({\n          lineItemId: rLineItem.lineItem.id,\n          returnType: 'REFUND',\n        })\n      }\n    })\n\n    if (!orderId) return\n\n    const url = `${process.env.GATSBY_ORDERS_API_ENDPOINT}/service/returns/refund-amount`\n\n    const body = { orderId, listReturnLineItemRequests }\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    }\n\n    fetchData(url, options)\n  }, [])\n\n  const [refundSummary, setRefundSummary] = useState({ ...initialSummaryState })\n\n  useEffect(() => {\n    if (!response) return\n    if (!response.error) {\n      const summary = { ...initialSummaryState }\n      ;(response?.lineItemRefunds ?? []).forEach(refundItem => {\n        summary.subtotal +=\n          refundItem?.refundDistribution?.ITEM_PRICE_REFUND?.refundAmount ?? 0\n        summary.taxRefund +=\n          refundItem?.refundDistribution?.TAX_REFUND?.refundAmount ?? 0\n        summary.refundEstimate += refundItem?.totalRefund?.refundAmount ?? 0\n        summary.discount +=\n          refundItem?.refundDistribution?.DISCOUNT_REFUND?.refundAmount ?? 0\n      })\n      setRefundSummary(summary)\n    } else if (response.error) {\n      captureWarning(\n        `Issue with fetching data from refund calculator - ${response.error}`,\n      )\n    }\n  }, [response])\n\n  return (\n    <StyledReturnsSummaryCard>\n      <RefundDetailsItem>\n        <RefundDetailTitle>Return Method:</RefundDetailTitle>\n        <RefundDetail>\n          <RefundShortDesc>Mail in Items*</RefundShortDesc>\n          <RefundTerms>\n            We guarantee free returns of most items while keeping our prices low\n            by consolidating parcels across the country. Please expect transit\n            times of 5-7 business days. Once received, your return will be\n            processed within 72 business hours.\n          </RefundTerms>\n        </RefundDetail>\n      </RefundDetailsItem>\n      <Body>\n        <RefundDetails>\n          <RefundDetailsItem>\n            <RefundDetailTitle>Subtotal:</RefundDetailTitle>\n            <RefundDetail>{`$${refundSummary.subtotal.toFixed(\n              2,\n            )}`}</RefundDetail>\n          </RefundDetailsItem>\n\n          <RefundDetailsItem>\n            <RefundDetailTitle>Tax Refund:</RefundDetailTitle>\n            <RefundDetail>{`$${refundSummary.taxRefund.toFixed(\n              2,\n            )}`}</RefundDetail>\n          </RefundDetailsItem>\n\n          <RefundDetailsItem>\n            <RefundDetailTitle>Discount Refund:</RefundDetailTitle>\n            <RefundDetail>{`-$${(-1 * refundSummary.discount).toFixed(\n              2,\n            )}`}</RefundDetail>\n          </RefundDetailsItem>\n\n          <RefundDetailsItem>\n            <RefundDetailTitle>Return Label Fee:</RefundDetailTitle>\n            <RefundDetail style={{ color: colors.shamrockGreen }}>\n              FREE\n            </RefundDetail>\n          </RefundDetailsItem>\n\n          <RefundDetailsItem>\n            <RefundDetailTitleSummary>\n              Refund Estimate:\n            </RefundDetailTitleSummary>\n            <RefundDetailSummary>{`$${refundSummary.refundEstimate.toFixed(\n              2,\n            )}`}</RefundDetailSummary>\n          </RefundDetailsItem>\n        </RefundDetails>\n      </Body>\n    </StyledReturnsSummaryCard>\n  )\n}\n\nexport default ReturnsSummaryCard\n","import useDetectDevices from '../../../hooks/useDetectDevices'\nimport { ReturnItem, StyledLineItemThumbnail } from '../commons'\nimport ReturnsSummaryCard from './ReturnsSummaryCard'\nimport React from 'react'\nimport styled from 'styled-components'\nimport { desktopVw } from '../../../styles/utils'\nimport { mapReturnType } from '../../../utils/returns'\n\nconst StyledLineItemThumbnailFinalStage = styled(StyledLineItemThumbnail)`\n  .line_item_thumbnail__wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: baseline;\n    margin-top: 0;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    .line_item_thumbnail__wrapper {\n    }\n  }\n`\n\nconst ReturnType = styled.p`\n  font-size: 10px;\n  margin-top: 5px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    font-size: ${desktopVw(12)};\n  }\n  span {\n    font-weight: 500;\n  }\n`\nconst Price = styled.p`\n  font-weight: 500;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n  }\n`\n\nexport function StageTwo({ returnLineItems }) {\n  const { devices } = useDetectDevices()\n\n  return (\n    <>\n      {returnLineItems.map(({ lineItem, exchangeOption, returnType }, i) => (\n        <ReturnItem key={lineItem.id}>\n          <StyledLineItemThumbnailFinalStage\n            lineItem={lineItem}\n            showPrice={false}\n            showHighlightedPrice={!devices.desktop}\n          >\n            <ReturnType>\n              {returnType === 'EXCHANGE' ? (\n                <div\n                  style={{\n                    display: 'flex',\n                    flexDirection: devices.desktop ? 'row' : 'column',\n                  }}\n                >\n                  <p style={{ marginRight: 10 }}>\n                    Exchange Color: <span>{exchangeOption?.color}</span>\n                  </p>\n                  <p>\n                    Size: <span>{exchangeOption?.size}</span>\n                  </p>\n                </div>\n              ) : (\n                mapReturnType(returnType)\n              )}\n            </ReturnType>\n          </StyledLineItemThumbnailFinalStage>\n\n          {devices.desktop && (\n            <Price>\n              ${parseFloat(exchangeOption?.price || lineItem?.price).toFixed(2)}\n            </Price>\n          )}\n        </ReturnItem>\n      ))}\n      <ReturnsSummaryCard returnLineItems={returnLineItems} />\n    </>\n  )\n}\n","import React from 'react'\nimport { navigate } from '@reach/router'\nimport styled from 'styled-components'\nimport Modal from '../Modal'\nimport Header from '../Header'\nimport { mobileVw } from '../../styles/utils'\nimport EditAddress from '../Account/EditShippingAdress'\nimport { PROVINCE_CODE_MAP } from '../../utils/constants'\n\nconst StyledModal = styled(Modal)`\n  overflow-y: scroll !important;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0 20px 20px;\n  .modal__close_button {\n    top: ${mobileVw(85)};\n  }\n`\nconst FormContainer = styled.div`\n  margin-top: ${mobileVw(48)};\n`\n\nconst StyledHeader = styled(Header)`\n  margin: 0 -20px;\n  background: white;\n`\n\nconst EditAddressModal = ({ openModal, order, closeModal, addAddressForm }) => {\n  const showSuccessBanner = addressData => {\n    // navigate to my orders and returns and pass msg for banner using state\n    const successBannerHtml = {\n      successHTML: `<div style=\"display: flex;justify-content: space-between;flex-direction: column\">\n      <div style=\"font-weight: 500; margin-bottom: 5px; font-size: ${mobileVw(\n        12,\n      )}; line-height: ${mobileVw(\n        16,\n      )}\"><b>Shipping address has been updated</b></div>\n      <div style=\"font-weight: 400;font-size: ${mobileVw(\n        10,\n      )}; line-height: ${mobileVw(13)}\">New Shipping information is ${\n        addressData.address1\n      }, ${addressData.city}, ${PROVINCE_CODE_MAP[addressData.province]}, ${\n        addressData.zip\n      }</div>\n      </div>`,\n    }\n    navigate(`/account/my-orders-returns/`, {\n      state: { successBannerHtml, updatedOrder: order?.orderNumber },\n    })\n    closeModal()\n  }\n  return (\n    <StyledModal open={openModal} onClose={closeModal}>\n      <StyledHeader />\n      <FormContainer>\n        <EditAddress\n          open={openModal}\n          closeModal={() => {\n            closeModal()\n          }}\n          addAddressForm={addAddressForm}\n          activeOrder={order}\n          reloadPageData={showSuccessBanner}\n        />\n      </FormContainer>\n    </StyledModal>\n  )\n}\n\nexport default EditAddressModal\n","import React, { useEffect, useState } from 'react'\nimport { navigate } from '@reach/router'\nimport styled from 'styled-components'\nimport LineItemThumbnail from '../Account/LineItemThumbnail'\nimport { StyledButton } from './commons'\nimport ReviewFormModal from '../ReviewFormModal'\nimport {\n  getLatestReturnDetailForLineItem,\n  getOrderReturnLineItem,\n  getOrderTrackingLineItemsByShipment,\n  getReturnLineItems,\n  getReturnsRoute,\n  getCancellationRoute,\n} from '../../utils/returns'\nimport Modal from '../Modal'\nimport useShopifyProduct from '../../hooks/useShopifyProduct'\nimport useContentfulProduct from '../../hooks/useContentfulProduct'\nimport QuickShopModal from '../QuickShopModal'\nimport { groupBy } from '../../utils'\nimport Header from '../Header'\nimport { mobileVw } from '../../styles/utils'\nimport { getTrackingRoute } from '../../utils/tracking'\nimport EditAddressModal from './EditAddressModal'\n\nconst StyledModal = styled(Modal)`\n  overflow-y: scroll !important;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0 20px 20px;\n  .modal__close_button {\n    top: ${mobileVw(85)};\n  }\n`\n\nconst StyledBuyAgain = styled(QuickShopModal)`\n  .modal__close_button {\n    top: 20px;\n  }\n`\n\nconst Wrapper = styled.div`\n  padding: 25px 25px;\n`\n\nconst Img = styled.img`\n  width: 49px;\n  height: 64px;\n  background-color: grey;\n  margin-right: 13px;\n  object-fit: cover;\n`\n\nconst SubHeading = styled.p`\n  font-size: 12px;\n  font-weight: 500;\n  border-top: 1px solid #e0e0e0;\n  padding-top: 30px;\n  margin-top: 30px;\n  margin-bottom: 15px;\n`\n\nconst StyledHeader = styled(Header)`\n  margin: 0 -20px;\n`\n\nexport function MobileLineItemSummaryModal({\n  lineItem,\n  onClose,\n  order,\n  page,\n  lineItems,\n  summaryModalOpen,\n  closeModal,\n  addAddressForm,\n}) {\n  const [modalOpen, setModalOpen] = useState(null)\n  const [sizes, setSizes] = useState([])\n  const [shopifyColors, setShopifyColors] = useState([])\n  const [openModal, setOpenModal] = useState(false)\n\n  const { product } = useShopifyProduct(lineItem.productHandle)\n  const { product: contentfulProduct } = useContentfulProduct(\n    lineItem.productId,\n  )\n\n  const [buyAgainModalOpen, setBuyAgainModalOpen] = useState(false)\n\n  useEffect(() => {\n    if (!product) {\n      return\n    }\n\n    const sizeOption = product.options.find(({ name }) => name === 'Size')\n    if (sizeOption) {\n      setSizes(sizeOption.values)\n    }\n\n    const colorOption = product.options.find(({ name }) => name === 'Color')\n    if (colorOption) {\n      setShopifyColors(colorOption.values)\n    }\n  }, [product])\n\n  if (!lineItem) return null\n\n  const returnLineItems = getReturnLineItems(order)\n\n  const returnCompletedLineItems = returnLineItems.filter(\n    lineItem => lineItem.status === 'PROCESSED',\n  )\n  const returnStartedLineItems = returnLineItems.filter(\n    lineItem => lineItem.status !== 'PROCESSED',\n  )\n  const returnCompletedLineItemsByReturnId = groupBy(\n    returnCompletedLineItems,\n    'returnId',\n  )\n  const returnStartedLineItemsByReturnId = groupBy(\n    returnStartedLineItems,\n    'returnId',\n  )\n\n  const returnLineItem = getOrderReturnLineItem(order, lineItem.id)\n\n  const orderTrackingLineItemsByShipment = getOrderTrackingLineItemsByShipment(\n    order,\n    returnLineItems,\n  )\n\n  const latestReturnDetailForLineItem = getLatestReturnDetailForLineItem(\n    order,\n    lineItem.id,\n  )\n\n  let updatedLineItems = orderTrackingLineItemsByShipment.reduce(\n    (lineItems, shipment) => [...lineItems, ...(shipment?.lineItems ?? [])],\n    [],\n  )\n\n  if (\n    returnLineItem?.status === 'PROCESSED' ||\n    (latestReturnDetailForLineItem?.labelUrl &&\n      latestReturnDetailForLineItem?.returnStatus === 'REQUEST_CREATED')\n  ) {\n    if (returnLineItem?.status === 'PROCESSED')\n      updatedLineItems =\n        returnCompletedLineItemsByReturnId?.[returnLineItem?.returnId] ?? []\n    else\n      updatedLineItems =\n        returnStartedLineItemsByReturnId?.[returnLineItem?.returnId] ?? []\n  }\n\n  const otherLineItems =\n    updatedLineItems.filter(lItem => lItem?.id !== lineItem?.id) ?? []\n\n  const isOrderCancellable = lineItem?.fulfillableQuantity > 0\n\n  const isShipmentAddressEditable =\n    (!order.shipments ||\n      (Array.isArray(order.shipments) && order.shipments.length === 0)) &&\n    (order?.unallocatedLineItems ?? []).length > 0\n\n  return (\n    <StyledModal open={summaryModalOpen} onClose={onClose}>\n      <StyledHeader />\n      {contentfulProduct && product && (\n        <StyledBuyAgain\n          product={product}\n          contentfulProduct={contentfulProduct}\n          shopifyProduct={product}\n          title={lineItem.title}\n          variants={product && product.variants.edges}\n          sizes={sizes}\n          open={buyAgainModalOpen}\n          onClose={() => setBuyAgainModalOpen(false)}\n          tracker='returns_process'\n          startingColor={lineItem?.color}\n          shopifyColors={shopifyColors}\n          showMenuBar={false}\n          showCloseBtn\n        />\n      )}\n      {openModal && (\n        <EditAddressModal\n          openModal={openModal}\n          order={order}\n          closeModal={() => {\n            setOpenModal(false)\n          }}\n          addAddressForm={addAddressForm}\n        />\n      )}\n      <Wrapper>\n        {lineItem && <LineItemThumbnail lineItem={lineItem} />}\n        <div style={{ display: 'flex', marginTop: 20 }}>\n          <StyledButton\n            contrast\n            style={{ marginRight: 9 }}\n            onClick={() => setBuyAgainModalOpen(true)}\n          >\n            Buy it again\n          </StyledButton>\n          <StyledButton onClick={() => setModalOpen(true)}>\n            Write a review\n          </StyledButton>\n          <ReviewFormModal\n            open={modalOpen}\n            reviewForm={page.reviewForm}\n            closeModal={() => setModalOpen(false)}\n            productId={lineItem?.productId}\n            productName={lineItem?.title}\n          />\n        </div>\n        {latestReturnDetailForLineItem?.labelUrl ? (\n          <div>\n            <StyledButton\n              href={latestReturnDetailForLineItem?.labelUrl}\n              target='_blank'\n            >\n              Print Label\n            </StyledButton>\n            {latestReturnDetailForLineItem?.trackingUrl &&\n              returnLineItem?.status !== 'PROCESSED' && (\n                <StyledButton\n                  href={latestReturnDetailForLineItem?.trackingUrl}\n                  target='_blank'\n                >\n                  Track Return\n                </StyledButton>\n              )}\n          </div>\n        ) : !isOrderCancellable ? (\n          <>\n            <StyledButton\n              to={getTrackingRoute(\n                order,\n                (order?.shipments ?? []).find(\n                  shipment => shipment.fulfillmentId === lineItem.fulfillmentId,\n                ),\n              )}\n            >\n              Track Package\n            </StyledButton>\n            <StyledButton\n              onClick={() => {\n                navigate(`${getReturnsRoute(order)}?stage=0`)\n                closeModal()\n              }}\n            >\n              Return or Replace Items\n            </StyledButton>\n          </>\n        ) : (\n          <div>\n            <StyledButton\n              onClick={() => {\n                navigate(`${getCancellationRoute(order)}`)\n                closeModal()\n              }}\n            >\n              Cancel Order\n            </StyledButton>\n            {isShipmentAddressEditable && (\n              <StyledButton\n                onClick={() => {\n                  setOpenModal(true)\n                }}\n              >\n                Edit Address\n              </StyledButton>\n            )}\n          </div>\n        )}\n        {(otherLineItems ?? []).length > 0 && (\n          <>\n            <SubHeading>{`Other items in this ${\n              latestReturnDetailForLineItem?.labelUrl ? 'return' : 'shipment'\n            }`}</SubHeading>\n            <div>\n              {(otherLineItems ?? []).map(lineItem => (\n                <Img key={lineItem.id} loading='lazy' src={lineItem.image} />\n              ))}\n            </div>\n          </>\n        )}\n      </Wrapper>\n    </StyledModal>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Link } from 'gatsby'\n\nimport { desktopVw } from '../styles/utils'\n\nimport BackArrowIcon from '../assets/back-arrow.svg'\n\nconst StyledBackLink = styled.div`\n  display: block;\n  font-size: 10px;\n  text-transform: uppercase;\n  cursor: pointer;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(10)};\n  }\n`\n\nconst BackArrow = styled(BackArrowIcon)`\n  margin-right: 6px;\n  width: 13px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(6)};\n    width: ${desktopVw(20)};\n  }\n`\n\nconst BackLink = ({ className, text }) => {\n  return (\n    <StyledBackLink className={className} onClick={() => window.history.go(-1)}>\n      <BackArrow />\n      <span>{text}</span>\n    </StyledBackLink>\n  )\n}\n\nexport default BackLink\n","import React from 'react'\nimport styled from 'styled-components'\nimport useDetectDevices from '../../hooks/useDetectDevices'\nimport BackLink from '../BackLink'\nimport { desktopVw } from '../../styles/utils'\n\nconst TimeLineWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 34px 0 25px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: ${desktopVw(62)};\n    margin-bottom: ${desktopVw(26)};\n  }\n`\n\nconst TimeLine = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n`\n\nconst Circle = styled.div`\n  width: 13px;\n  height: 13px;\n  background: ${({ isComplete, theme }) =>\n    isComplete ? theme.colors.primary : theme.colors.secondary};\n  border: 1px solid\n    ${({ isComplete, theme }) =>\n      isComplete ? theme.colors.primary : theme.colors.silver};\n  border-radius: 50%;\n`\n\nconst Dashed = styled.div`\n  width: 100px;\n  border: 1px dashed\n    ${({ isComplete, theme }) =>\n      isComplete ? theme.colors.primary : theme.colors.silver};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(126)};\n  }\n`\n\nexport function Timeline({ activeStep, steps = 3 }) {\n  const { devices } = useDetectDevices()\n\n  return (\n    <TimeLineWrapper>\n      {activeStep > 0 && devices.desktop && <BackLink />}\n      <TimeLine>\n        {[...new Array(steps)].map((_, step) => {\n          if (step === steps - 1)\n            return <Circle isComplete={activeStep >= step} />\n          return (\n            <>\n              <Circle isComplete={activeStep >= step} />\n              <Dashed isComplete={activeStep >= step + 1} />\n            </>\n          )\n        })}\n      </TimeLine>\n    </TimeLineWrapper>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport { getCurrentUser } from '../../utils/auth'\n\nimport CirceTick from '../../assets/circle_tick.svg'\nimport { StyledButton } from './commons'\n\nimport { getLatestReturnDetailForOrderId } from '../../utils/returns'\nimport DottedSpinner from '../common/DottedSpinner'\nimport NewBestSellersSection from '../NewBestSellersSection'\nimport { StarRating } from '../common/StarRating'\nimport eventTracker from '../../trackers/EventTracker'\nimport EventType from '../../trackers/eventType'\n\nconst StyledReturnsSummary = styled.div`\n  margin: 22px 0 42px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  padding: 25px 11px 42px;\n  p {\n    font-size: 12px;\n    line-height: 20px;\n    text-align: center;\n  }\n  background: #f9f9f9;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: ${desktopVw(19)} 0 ${desktopVw(43)};\n    padding: ${desktopVw(47)} ${desktopVw(241)} ${desktopVw(32)};\n    p {\n      font-size: ${desktopVw(12)};\n      line-height: ${desktopVw(20)};\n    }\n  }\n`\n\nconst FeedbackBox = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  text-align: center;\n  border-top: 0.5px solid ${({ theme }) => theme.colors.silver};\n  border-bottom: 0.5px solid ${({ theme }) => theme.colors.silver};\n  padding: 70px 0;\n  margin: 0 -11px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    text-align: left;\n    border: 0.5px solid ${({ theme }) => theme.colors.silver};\n    flex-direction: row;\n    padding: ${desktopVw(34)} ${desktopVw(43)};\n  }\n`\n\nconst Text = styled.p`\n  font-weight: 500;\n  font-size: 15px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(22)};\n  }\n`\n\nconst SubText = styled.p`\n  font-size: 12px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(17)};\n  }\n`\n\nconst Heading = styled.h1`\n  font-size: 24px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(36)};\n    margin-top: ${desktopVw(17)};\n    margin-bottom: ${desktopVw(10)};\n  }\n`\n\nconst AnotherHeading = styled(Heading)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: ${desktopVw(40)} 0 ${desktopVw(9)};\n  }\n`\n\nconst LabelButton = styled(StyledButton)`\n  text-transform: uppercase;\n  margin-top: 26px;\n  margin-bottom: 26px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: ${desktopVw(28)};\n    margin-bottom: ${desktopVw(28)};\n  }\n`\n\nconst StarContainer = styled.div`\n  display: flex;\n  margin-top: 28px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n  }\n`\n\nconst ReturnConfirmation = ({\n  orderId,\n  recommendedProducts,\n  pseudoSuccessMsg,\n  returnLabelUrl,\n  orders,\n  loading,\n}) => {\n  const user = getCurrentUser()\n\n  if (loading)\n    return (\n      <div style={{ padding: 25 }}>\n        <DottedSpinner />\n      </div>\n    )\n\n  return (\n    <>\n      <StyledReturnsSummary>\n        <div>\n          <CirceTick />\n        </div>\n        {!pseudoSuccessMsg && (\n          <>\n            <Heading>Success!</Heading>\n            <p>\n              Your return{' '}\n              <b>\n                {getLatestReturnDetailForOrderId(orders, orderId)?.returnId}\n              </b>{' '}\n              has been started.\n            </p>\n            <p>Weve sent a confirmation email to {user?.email}</p>\n          </>\n        )}\n        <AnotherHeading>Next steps</AnotherHeading>\n        {pseudoSuccessMsg ? (\n          <p>{pseudoSuccessMsg}</p>\n        ) : (\n          <>\n            <p style={{ marginBottom: 9 }}>\n              Follow the instruction in your email to complete your return or\n              exchange.\n            </p>\n            <p>\n              Print your shipping label below affix it to a package of your\n              choice, and drop in the mail. Please note we do not accept items\n              that have been worn, washed, damaged or altered.\n            </p>\n            <>\n              {returnLabelUrl && (\n                <LabelButton contrast href={returnLabelUrl} target='_blank'>\n                  Download Shipping Label\n                </LabelButton>\n              )}\n              <p>\n                *Transit time on returns is 5-7 business days. Once received,\n                your return will be processed in 72 business hours*\n              </p>\n            </>\n          </>\n        )}\n      </StyledReturnsSummary>\n      <FeedbackBox>\n        <div>\n          <Text style={{ marginBottom: 6 }}>HOW WAS YOUR EXPERIENCE?</Text>\n          <SubText>Help us improve!</SubText>\n        </div>\n        <StarContainer>\n          <StarRating\n            onClick={value => {\n              eventTracker.track(EventType.ENTER_FEEDBACK, {\n                action: 'return_process',\n                entity_type: 'rating',\n                value,\n                context: {\n                  return_id: getLatestReturnDetailForOrderId(orders, orderId)\n                    ?.returnId,\n                },\n              })\n            }}\n          />\n        </StarContainer>\n      </FeedbackBox>\n      {recommendedProducts && (\n        <NewBestSellersSection\n          json={recommendedProducts.text.json}\n          textColor={recommendedProducts.textColor}\n          image={recommendedProducts.image}\n          products={recommendedProducts.products}\n          tracker='returns_process'\n          hideImageOnMobile\n        />\n      )}\n    </>\n  )\n}\n\nexport default ReturnConfirmation\n","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { graphql, Link } from 'gatsby'\n\nimport { navigate, useLocation } from '@reach/router'\nimport { desktopVw } from '../../styles/utils'\nimport StageZeroDrawer from '../../components/Returns/StageZero/StageZeroDrawer'\nimport { Alert } from '../../components/FormElements'\nimport useFetch from '../../hooks/useFetch'\nimport { extractQueryParamFromPageLocation, getCurrentUser } from '../../utils'\nimport {\n  getContentfulProduct,\n  getHeading,\n  getImageUrls,\n  getQuantitiesRemainingToReturn,\n  getReturnLineItem,\n  isMethodRefund,\n  logSentry,\n} from '../../utils/returns'\nimport { StageZero } from '../../components/Returns/StageZero'\nimport { StyledButton } from '../../components/Returns/commons'\nimport { StageOne } from '../../components/Returns/StageOne'\nimport { StageTwo } from '../../components/Returns/StageTwo'\nimport { MobileLineItemSummaryModal } from '../../components/Returns/MobileLineItemSummaryModal'\nimport { Timeline } from '../../components/common/Timeline'\nimport ReturnConfirmation from '../../components/Returns/ReturnConfirmation'\nimport { zipObject } from '../../utils/build'\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n  }\n`\n\nconst Container = styled.div`\n  padding: 21px 21px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(41)} ${desktopVw(240)};\n  }\n`\n\nconst LinkWrapper = styled.div`\n  display: flex;\n  text-transform: uppercase;\n  font-size: 12px;\n  a {\n    text-decoration: underline;\n    margin: 0 5px;\n    &:first-child {\n      margin-left: 0;\n    }\n  }\n  p {\n    margin-left: 5px;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n  }\n`\n\nconst Heading = styled.h1`\n  font-size: 24px;\n  margin: 19px 0 7px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(36)};\n    margin: ${desktopVw(24)} 0 ${desktopVw(15)};\n  }\n`\n\nconst Description = styled.p`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n    span {\n      text-transform: uppercase;\n    }\n  }\n`\n\nconst Returns = ({ location, data, orderId }) => {\n  const page = data.contentfulAccountPage\n  const { nodes } = data.allContentfulProduct\n  const { fetchData, response: orders } = useFetch()\n  const {\n    fetchData: createReturn,\n    response: createReturnResponse,\n    loading: createReturnLoading,\n    error: createReturnError,\n  } = useFetch()\n\n  const order =\n    (location.state && location.state.order) ||\n    (orders ?? []).find(order => order.orderId === Number(orderId))\n\n  const { email } = getCurrentUser()\n\n  useEffect(() => {\n    const url = `${process.env.GATSBY_ORDERS_API_ENDPOINT}/service/order?emailId=${email}&limit=50`\n    if (!order && email) fetchData(url)\n\n    const showOrderSummary = extractQueryParamFromPageLocation(\n      'show_order_summary',\n    )\n    if (showOrderSummary === 'true') setSummaryModalOpen(true)\n  }, [])\n\n  const [lineItems, setLineItems] = useState([])\n  const [activeLineItem, setActiveLineItem] = useState(null)\n  const [activeLineItemIndex, setActiveLineItemIndex] = useState(null)\n  const [activeLineItemsChecked, setActiveLineItemsChecked] = useState([])\n  const [contentfulProduct, setContentfulProduct] = useState(null)\n  const [summaryModalOpen, setSummaryModalOpen] = useState(false)\n  const [validationError, setValidationError] = useState('')\n\n  useEffect(() => {\n    if (!order) return\n    const { shipments } = order\n    let allLineItems = []\n    ;(shipments || []).forEach(shipment => {\n      if (shipment.lineItems && shipment.lineItems.length > 0) {\n        if (\n          extractQueryParamFromPageLocation('show_order_summary') === 'true'\n        ) {\n          allLineItems = allLineItems.concat(shipment.lineItems)\n        } else {\n          allLineItems = allLineItems.concat(\n            shipment.lineItems.filter(\n              lineItem => getQuantitiesRemainingToReturn(lineItem) > 0,\n            ),\n          )\n        }\n      }\n    })\n    setLineItems(allLineItems)\n  }, [order])\n\n  useEffect(() => {\n    if (!activeLineItem) return\n\n    const product = getContentfulProduct(nodes, activeLineItem)\n\n    setContentfulProduct(product)\n  }, [activeLineItem])\n\n  const currLocation = useLocation()\n\n  const [stage, setStage] = useState(0)\n  const [lineItemPhotos, setLineItemPhotos] = useState({})\n\n  const [errorMsg, setErrorMsg] = useState('')\n\n  const [returnLineItems, setReturnLineItems] = useState([])\n  const [formData, setFormData] = useState({})\n\n  const [modalOpen, setModalOpen] = useState(null)\n\n  const [pseudoSuccessMsg, setPseudoSuccessMsg] = useState('')\n\n  const [returnLabelUrl, setReturnLabelUrl] = useState(null)\n\n  const [outOfStockForReplace, setOutOfStockForReplace] = useState(false)\n\n  const user = getCurrentUser()\n\n  useEffect(() => {\n    const stageParam = extractQueryParamFromPageLocation('stage')\n    const showOrderSummary = extractQueryParamFromPageLocation(\n      'show_order_summary',\n    )\n    if (showOrderSummary === 'true') setSummaryModalOpen(true)\n    else if (stageParam) {\n      if (returnLineItems.length === 0 && Number(stageParam) !== 0) {\n        navigate(`?stage=0`)\n      } else {\n        setStage(Number(stageParam))\n        setSummaryModalOpen(false)\n      }\n    }\n  }, [currLocation])\n\n  const handleCheckboxClick = i => {\n    if (activeLineItemsChecked.includes(i)) {\n      const lineItemId = lineItems[i]?.id\n      const checkedItems = [...activeLineItemsChecked]\n      const returnItems = [...returnLineItems]\n      const rIdx = returnItems.findIndex(item => item.lineItemId === lineItemId)\n      const idx = checkedItems.indexOf(i)\n      checkedItems.splice(idx, 1)\n      returnItems.splice(rIdx, 1)\n      setActiveLineItemsChecked(checkedItems)\n      setReturnLineItems(returnItems)\n    } else {\n      setActiveLineItem(lineItems[i])\n      setActiveLineItemIndex(i)\n      setModalOpen(true)\n      setErrorMsg('')\n    }\n  }\n\n  const handleReturnCreate = () => {\n    const url = `${process.env.GATSBY_ORDERS_API_ENDPOINT}/service/returns/create`\n\n    if ((returnLineItems ?? []).length === 0) return\n\n    const newReturnLineItems = returnLineItems.map(\n      ({ lineItem, exchangeOption, ...returnLineItem }) => {\n        const isStoreCreditRefund =\n          returnLineItem?.returnType === 'REFUND_TO_STORE_CREDIT'\n        const isRefundMethod = returnLineItem?.returnType === 'REFUND'\n\n        let refundParameters = {}\n\n        if (isRefundMethod)\n          refundParameters = { returnType: 'REFUND', refundMethod: 'CARD' }\n        if (isStoreCreditRefund)\n          refundParameters = {\n            returnType: 'REFUND',\n            refundMethod: 'STORE_CREDIT',\n          }\n\n        return {\n          ...returnLineItem,\n          ...refundParameters,\n          returnLineItemReview: {\n            ...returnLineItem.returnLineItemReview,\n            subReason: returnLineItem.returnLineItemReview.subReason,\n          },\n          restocked: false,\n        }\n      },\n    )\n\n    try {\n      const body = {\n        orderId,\n        returnStatus: 'REQUEST_CREATED',\n        customerName: `${user.name} ${user.family_name}`,\n        returnLineItems: newReturnLineItems,\n      }\n\n      const options = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n        redirect: 'follow',\n      }\n\n      createReturn(url, options)\n    } catch (error) {\n      logSentry(error, user, orderId)\n      // handling error gracefully, since this is handled by CS team internally\n      setPseudoSuccessMsg(pseudoSuccessMsg)\n    }\n  }\n\n  useEffect(() => {\n    if (!createReturnResponse) return\n\n    if (createReturnError) {\n      logSentry(createReturnError, user, orderId)\n      // handling error gracefully, since this is handled by CS team internally\n      setPseudoSuccessMsg(\n        `We've received your return request. Our customer success team will get back to you with the shipping label to send the product(s) back to us within the next 48 hrs.`,\n      )\n\n      return\n    }\n\n    setReturnLabelUrl(createReturnResponse?.labelUrl)\n    if (email)\n      fetchData(\n        `${process.env.GATSBY_ORDERS_API_ENDPOINT}/service/order?emailId=${email}&limit=50`,\n      )\n  }, [createReturnResponse])\n\n  const handleChange = (e, lineItemIdParam) => {\n    setValidationError('')\n\n    const { target } = e\n    const { name } = target\n    const value = target.name === 'consent' ? target.checked : target.value\n\n    const lineItemId = lineItemIdParam || activeLineItem?.id\n\n    let newFormData = formData\n\n    if (isMethodRefund(value)) {\n      newFormData = zipObject(\n        Object.keys(formData),\n        Object.values(formData).map(data => {\n          if (isMethodRefund(data?.returnType)) {\n            return { ...data, returnType: value }\n          }\n          return data\n        }),\n      )\n    }\n\n    newFormData = {\n      ...newFormData,\n      [lineItemId]: {\n        ...(formData?.[lineItemId] ?? {}),\n        [name]: value,\n      },\n    }\n\n    setFormData(newFormData)\n  }\n\n  const saveReturnLineItem = (\n    returnLineItem,\n    returnContentfulProduct,\n    returnQuantity,\n  ) => {\n    const firstFindReturnLineItemIndex = returnLineItems.findIndex(\n      l => l.lineItemId === returnLineItem.lineItemId,\n    )\n\n    const existingLineItems = returnLineItems.filter(\n      l => l.lineItemId !== returnLineItem.lineItemId,\n    )\n\n    const itemsToReturn = [...Array(returnQuantity)].map(_ => ({\n      ...returnLineItem,\n      imageUrls: getImageUrls([\n        ...(lineItemPhotos?.[returnLineItem?.lineItem?.id] ?? []),\n      ]),\n      lineItem: {\n        ...returnLineItem.lineItem,\n        returnedQuantity:\n          (returnLineItem?.lineItem?.returnedQuantity || 0) + returnQuantity,\n      },\n    }))\n\n    let updatedLineItems\n    if (firstFindReturnLineItemIndex === -1) {\n      updatedLineItems = existingLineItems.concat(itemsToReturn)\n    } else {\n      // to preserve ordering\n      updatedLineItems = [\n        ...existingLineItems.slice(0, firstFindReturnLineItemIndex),\n        ...itemsToReturn,\n        ...existingLineItems.slice(firstFindReturnLineItemIndex),\n      ]\n    }\n\n    if (\n      stage === 1 &&\n      (updatedLineItems || []).every(rData => !!rData.returnType)\n    ) {\n      setErrorMsg('')\n    }\n\n    if (isMethodRefund(returnLineItem?.returnType)) {\n      updatedLineItems = updatedLineItems.map(lineItem => {\n        if (isMethodRefund(lineItem?.returnType)) {\n          return { ...lineItem, returnType: returnLineItem?.returnType }\n        }\n        return lineItem\n      })\n    }\n\n    setReturnLineItems(updatedLineItems)\n  }\n\n  const handleContinue = () => {\n    if (returnLineItems.length === 0) {\n      setErrorMsg('Please select at least one item to continue')\n\n      return\n    }\n\n    let newFormData = formData\n\n    const newReturnLineItems = (returnLineItems ?? []).map(lineItem => {\n      if (lineItem?.returnType) return lineItem\n      newFormData = {\n        ...newFormData,\n        [lineItem?.lineItemId]: {\n          ...newFormData[lineItem?.lineItemId],\n          returnType: 'REFUND_TO_STORE_CREDIT',\n        },\n      }\n      return {\n        ...lineItem,\n        returnType: 'REFUND_TO_STORE_CREDIT',\n      }\n    })\n\n    setReturnLineItems(newReturnLineItems)\n    setFormData(newFormData)\n\n    if (stage === 1) {\n      if (returnLineItems.some(rData => !rData.returnType)) {\n        if (outOfStockForReplace) {\n          setErrorMsg(\n            'This item is out of stock, please select one of the available return options',\n          )\n          return\n        }\n        setErrorMsg('Please select one of the above options to proceed')\n        return\n      }\n    }\n\n    if (stage === 2) handleReturnCreate()\n\n    setErrorMsg('')\n    navigate(`?stage=${stage + 1}`, { replace: stage === 2 })\n    setStage(stage + 1)\n  }\n\n  const lineItemToShow = location?.state?.lineItem ?? lineItems?.[0]\n\n  const handleSubmitSuccess = () => {\n    const checkedItems = [...activeLineItemsChecked]\n    checkedItems.push(activeLineItemIndex)\n    setActiveLineItemsChecked([...new Set(checkedItems)])\n  }\n\n  const handlePhotosChange = photos => {\n    const lineItemId = activeLineItem?.id\n\n    setLineItemPhotos({\n      ...lineItemPhotos,\n      [lineItemId]: photos,\n    })\n  }\n\n  if (summaryModalOpen) {\n    if (!lineItemToShow) return null\n    return (\n      <MobileLineItemSummaryModal\n        onClose={() => {\n          window.history.go(-1)\n        }}\n        order={order}\n        lineItem={lineItemToShow}\n        page={page}\n        lineItems={lineItems}\n        summaryModalOpen={summaryModalOpen}\n        closeModal={() => setSummaryModalOpen(false)}\n        addAddressForm={page.addAddressForm}\n      />\n    )\n  }\n\n  return (\n    <Container>\n      <LinkWrapper>\n        <Link to='/account/my-profile'>Account</Link>/\n        <Link to='/account/my-orders-returns'>Orders</Link>/<p>Return</p>\n      </LinkWrapper>\n      {stage !== 3 && (\n        <>\n          <Heading>{getHeading(stage)}</Heading>\n          <Description>\n            Showing product(s) from your{' '}\n            <span>order #{order?.orderNumber}</span>\n          </Description>\n          <Timeline activeStep={stage} />\n        </>\n      )}\n      {stage === 0 && order && (\n        <StageZero\n          lineItems={lineItems}\n          activeLineItemsChecked={activeLineItemsChecked}\n          handleCheckboxClick={handleCheckboxClick}\n          returnLineItems={returnLineItems}\n          setActiveLineItem={setActiveLineItem}\n          setActiveLineItemIndex={setActiveLineItemIndex}\n          setModalOpen={setModalOpen}\n        />\n      )}\n      {stage === 1 && order && (\n        <StageOne\n          returnLineItems={returnLineItems}\n          saveReturnLineItem={saveReturnLineItem}\n          setValidationError={setValidationError}\n          handleChange={handleChange}\n          formData={formData}\n          nodes={nodes}\n          setOutOfStockForReplace={setOutOfStockForReplace}\n          storeCreditReturnsMessage={\n            page?.storeCreditReturnsMessage?.storeCreditReturnsMessage\n          }\n        />\n      )}\n\n      {stage === 2 && order && <StageTwo returnLineItems={returnLineItems} />}\n      {stage === 3 && order && (\n        <ReturnConfirmation\n          returnLineItems={returnLineItems}\n          orderId={Number(order?.orderId)}\n          recommendedProducts={page.recommendedProducts}\n          orders={orders}\n          pseudoSuccessMsg={pseudoSuccessMsg}\n          returnLabelUrl={returnLabelUrl}\n          loading={createReturnLoading}\n        />\n      )}\n      {stage !== 3 && (\n        <ButtonContainer>\n          <StyledButton contrast onClick={handleContinue}>\n            {stage === 2 ? 'Submit' : 'Next'}\n          </StyledButton>\n          {errorMsg && <Alert message={errorMsg} />}\n        </ButtonContainer>\n      )}\n      {activeLineItem && contentfulProduct && modalOpen && (\n        <StageZeroDrawer\n          open={modalOpen}\n          closeModal={() => setModalOpen(false)}\n          lineItem={activeLineItem}\n          contentfulProduct={contentfulProduct}\n          saveReturnLineItem={saveReturnLineItem}\n          onSubmitSuccess={handleSubmitSuccess}\n          formData={formData?.[activeLineItem?.id] ?? {}}\n          validationError={validationError}\n          setValidationError={setValidationError}\n          handleChange={handleChange}\n          returnLineItem={getReturnLineItem(returnLineItems, activeLineItem)}\n          photos={lineItemPhotos?.[activeLineItem?.id] ?? []}\n          handlePhotosChange={handlePhotosChange}\n        />\n      )}\n    </Container>\n  )\n}\n\nexport default Returns\n\nexport const ReturnsQuery = graphql`\n  query Returns($id: String!) {\n    contentfulAccountPage(id: { eq: $id }) {\n      id\n      slug\n      title {\n        title\n      }\n      storeCreditReturnsMessage {\n        storeCreditReturnsMessage\n      }\n      pageType\n      hero {\n        fluid(maxWidth: 3840) {\n          ...GatsbyContentfulFluid_withWebp\n        }\n      }\n      menuList {\n        ...Link\n      }\n      featuredImage {\n        fluid(maxWidth: 640) {\n          ...GatsbyContentfulFluid_withWebp\n        }\n      }\n      text {\n        text\n      }\n      contact {\n        json\n      }\n      reviewForm {\n        title\n        submitButtonText\n        successMessage {\n          json\n        }\n        contentfulfields {\n          ... on ContentfulInput {\n            id\n            name\n            label\n            placeholder\n            type\n            width\n          }\n          ... on ContentfulRadio {\n            id\n            type\n            name\n            label\n            range\n            radioOptions {\n              name\n              value\n            }\n            displayValues\n          }\n          ... on ContentfulSelect {\n            id\n            name\n            label\n            options\n            width\n          }\n        }\n      }\n      recommendedProducts {\n        id\n        text {\n          json\n        }\n        products {\n          id\n          title\n          seoTitle\n          slug\n          subtitle\n          metaTags\n          shippingInformation {\n            shippingInformation\n          }\n          shippingMetaInfoText {\n            shippingMetaInfoText\n          }\n          productImages {\n            ...ProductImages\n          }\n          colors {\n            ...Color\n          }\n          shopifyProduct {\n            ...ShopifyProduct\n          }\n        }\n      }\n      addAddressForm {\n        title\n        submitButtonText\n        successMessage {\n          json\n        }\n        contentfulfields {\n          ... on ContentfulInput {\n            id\n            name\n            label\n            placeholder\n            type\n            width\n            required\n          }\n          ... on ContentfulSelect {\n            id\n            name\n            label\n            options\n            width\n          }\n        }\n      }\n    }\n    allContentfulProduct {\n      nodes {\n        id\n        createdAt\n        slug\n        title\n        subtitle\n        bigThumbnailTextColor\n        productTypeName\n        attributes {\n          name\n        }\n        tags\n        gender\n        metaTags\n        shippingInformation {\n          shippingInformation\n        }\n        shippingMetaInfoText {\n          shippingMetaInfoText\n        }\n        productImages {\n          color {\n            name\n          }\n          images {\n            id\n            description\n            fluid(maxWidth: 400) {\n              ...GatsbyContentfulFluid_withWebp_noBase64\n            }\n          }\n        }\n        colors {\n          name\n          addBorder\n          hexcode\n          texture {\n            description\n            fluid(maxWidth: 50) {\n              ...GatsbyContentfulFluid_withWebp_noBase64\n            }\n          }\n        }\n        sizeGuide {\n          tables {\n            id\n            title\n            tableRows {\n              id\n              tableData\n            }\n          }\n          title\n          information\n        }\n        shopifyProduct {\n          ...ShopifyProduct\n        }\n      }\n    }\n  }\n`\n","var React = require('react');\n\nfunction Info (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"circle\",{\"cx\":\"5.5\",\"cy\":\"5.5\",\"r\":\"5.5\",\"fill\":\"black\",\"key\":0}),React.createElement(\"path\",{\"d\":\"M5.80277 2.5C5.63701 2.5 5.47803 2.55926 5.36082 2.66475C5.24361 2.77024 5.17777 2.91332 5.17777 3.0625C5.17777 3.21168 5.24361 3.35476 5.36082 3.46025C5.47803 3.56574 5.63701 3.625 5.80277 3.625C5.96853 3.625 6.1275 3.56574 6.24471 3.46025C6.36192 3.35476 6.42777 3.21168 6.42777 3.0625C6.42777 2.91332 6.36192 2.77024 6.24471 2.66475C6.1275 2.55926 5.96853 2.5 5.80277 2.5ZM5.65277 4.28875C5.15693 4.32625 3.80277 5.2975 3.80277 5.2975C3.71943 5.35375 3.74443 5.35 3.8111 5.455C3.87777 5.55625 3.86943 5.56375 3.9486 5.515C4.03193 5.46625 4.16943 5.3875 4.3986 5.26C5.28193 4.75 4.54027 5.9275 4.1611 7.91125C4.0111 8.89375 4.99443 8.3875 5.2486 8.2375C5.4986 8.09125 6.16943 7.675 6.2361 7.63375C6.32777 7.5775 6.2611 7.5325 6.19027 7.43875C6.14027 7.375 6.09027 7.42 6.09027 7.42C5.81943 7.58125 5.3236 7.91875 5.25693 7.705C5.17777 7.49125 5.6861 6.025 5.96527 5.01625C6.0111 4.77625 6.1361 4.25125 5.65277 4.28875Z\",\"fill\":\"white\",\"key\":1})]);\n}\n\nInfo.defaultProps = {\"width\":\"11\",\"height\":\"11\",\"viewBox\":\"0 0 11 11\",\"fill\":\"none\"};\n\nmodule.exports = Info;\n\nInfo.default = Info;\n","import React from 'react'\nimport styled, { keyframes } from 'styled-components'\n\nconst bounce_circularG = keyframes`\n  0% {\n    transform: scale(1);\n  }\n\n  100% {\n    transform: scale(0.3);\n  }\n`\n\nconst StyledSpinner = styled.div`\n  position: relative;\n  width: 83px;\n  height: 83px;\n  margin: auto;\n\n  .circularG {\n    position: absolute;\n    background-color: rgb(0, 0, 0);\n    width: 19px;\n    height: 19px;\n    border-radius: 12px;\n    -o-border-radius: 12px;\n    -ms-border-radius: 12px;\n    -webkit-border-radius: 12px;\n    -moz-border-radius: 12px;\n    animation-name: ${bounce_circularG};\n    -o-animation-name: ${bounce_circularG};\n    -ms-animation-name: ${bounce_circularG};\n    -webkit-animation-name: ${bounce_circularG};\n    -moz-animation-name: ${bounce_circularG};\n    animation-duration: 1.25s;\n    -o-animation-duration: 1.25s;\n    -ms-animation-duration: 1.25s;\n    -webkit-animation-duration: 1.25s;\n    -moz-animation-duration: 1.25s;\n    animation-iteration-count: infinite;\n    -o-animation-iteration-count: infinite;\n    -ms-animation-iteration-count: infinite;\n    -webkit-animation-iteration-count: infinite;\n    -moz-animation-iteration-count: infinite;\n    animation-direction: normal;\n    -o-animation-direction: normal;\n    -ms-animation-direction: normal;\n    -webkit-animation-direction: normal;\n    -moz-animation-direction: normal;\n  }\n\n  #circularG_1 {\n    left: 0;\n    top: 33px;\n    animation-delay: 0.47s;\n    -o-animation-delay: 0.47s;\n    -ms-animation-delay: 0.47s;\n    -webkit-animation-delay: 0.47s;\n    -moz-animation-delay: 0.47s;\n  }\n\n  #circularG_2 {\n    left: 8px;\n    top: 8px;\n    animation-delay: 0.62s;\n    -o-animation-delay: 0.62s;\n    -ms-animation-delay: 0.62s;\n    -webkit-animation-delay: 0.62s;\n    -moz-animation-delay: 0.62s;\n  }\n\n  #circularG_3 {\n    top: 0;\n    left: 33px;\n    animation-delay: 0.78s;\n    -o-animation-delay: 0.78s;\n    -ms-animation-delay: 0.78s;\n    -webkit-animation-delay: 0.78s;\n    -moz-animation-delay: 0.78s;\n  }\n\n  #circularG_4 {\n    right: 8px;\n    top: 8px;\n    animation-delay: 0.94s;\n    -o-animation-delay: 0.94s;\n    -ms-animation-delay: 0.94s;\n    -webkit-animation-delay: 0.94s;\n    -moz-animation-delay: 0.94s;\n  }\n\n  #circularG_5 {\n    right: 0;\n    top: 33px;\n    animation-delay: 1.09s;\n    -o-animation-delay: 1.09s;\n    -ms-animation-delay: 1.09s;\n    -webkit-animation-delay: 1.09s;\n    -moz-animation-delay: 1.09s;\n  }\n\n  #circularG_6 {\n    right: 8px;\n    bottom: 8px;\n    animation-delay: 1.25s;\n    -o-animation-delay: 1.25s;\n    -ms-animation-delay: 1.25s;\n    -webkit-animation-delay: 1.25s;\n    -moz-animation-delay: 1.25s;\n  }\n\n  #circularG_7 {\n    left: 33px;\n    bottom: 0;\n    animation-delay: 1.4s;\n    -o-animation-delay: 1.4s;\n    -ms-animation-delay: 1.4s;\n    -webkit-animation-delay: 1.4s;\n    -moz-animation-delay: 1.4s;\n  }\n\n  #circularG_8 {\n    left: 8px;\n    bottom: 8px;\n    animation-delay: 1.56s;\n    -o-animation-delay: 1.56s;\n    -ms-animation-delay: 1.56s;\n    -webkit-animation-delay: 1.56s;\n    -moz-animation-delay: 1.56s;\n  }\n`\n\nfunction DottedSpinner({ className }) {\n  return (\n    <StyledSpinner className={className}>\n      <div id='circularG_1' className='circularG' />\n      <div id='circularG_2' className='circularG' />\n      <div id='circularG_3' className='circularG' />\n      <div id='circularG_4' className='circularG' />\n      <div id='circularG_5' className='circularG' />\n      <div id='circularG_6' className='circularG' />\n      <div id='circularG_7' className='circularG' />\n      <div id='circularG_8' className='circularG' />\n    </StyledSpinner>\n  )\n}\n\nexport default DottedSpinner\n","var React = require('react');\n\nfunction LandingStar (props) {\n    return React.createElement(\"svg\",props,React.createElement(\"path\",{\"className\":\"star__inner\",\"d\":\"M16.5 0L20.2045 11.0557H32.1924L22.494 17.8885L26.1985 28.9443L16.5 22.1115L6.80154 28.9443L10.506 17.8885L0.807568 11.0557H12.7955L16.5 0Z\",\"fill\":\"black\"}));\n}\n\nLandingStar.defaultProps = {\"width\":\"33\",\"height\":\"29\",\"viewBox\":\"0 0 33 29\",\"fill\":\"none\"};\n\nmodule.exports = LandingStar;\n\nLandingStar.default = LandingStar;\n","var React = require('react');\n\nfunction Bolt (props) {\n    return React.createElement(\"svg\",props,React.createElement(\"path\",{\"d\":\"M3.02031 10.7588L0.512707 9.72875L8.43057 0.442121L5.91216 6.57284L8.41976 7.60292L0.501901 16.8896L3.02031 10.7588Z\",\"fill\":\"#F0B44F\"}));\n}\n\nBolt.defaultProps = {\"width\":\"9\",\"height\":\"17\",\"viewBox\":\"0 0 9 17\",\"fill\":\"none\"};\n\nmodule.exports = Bolt;\n\nBolt.default = Bolt;\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { desktopVw } from '../../styles/utils'\nimport Star from '../../assets/landing_star.svg'\n\nconst FeedbackStar = styled(Star)`\n  path {\n    fill: ${({ fill, theme }) =>\n      fill ? theme.colors.primary : theme.colors.secondary};\n    stroke: ${({ fill, theme }) =>\n      fill ? theme.colors.secondary : theme.colors.primary};\n  }\n`\n\nconst Rate = styled.div`\n  position: relative;\n  margin-right: 2px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(4.5)};\n  }\n`\n\nconst Input = styled.input`\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  cursor: pointer;\n\n  &:checked {\n    + svg {\n      .star {\n        &__inner {\n          fill: ${props => props.fill && props.theme.colors.yellow};\n        }\n      }\n    }\n  }\n`\n\nexport const StarRating = ({ onClick, initialValue = 0 }) => {\n  const [value, setValue] = useState(parseInt(initialValue))\n  useEffect(() => {\n    setValue(parseInt(initialValue))\n  }, [initialValue])\n  return [...Array(5)].map((_, i) => (\n    <Rate>\n      <Input\n        key={i}\n        label='feedback'\n        type='radio'\n        value={i + 1}\n        name='feedback'\n        onChange={() => {\n          setValue(i + 1)\n          if (onClick) onClick(i + 1)\n        }}\n        aria-label={`${i} star`}\n      />\n      <FeedbackStar\n        fill={i < value ? 1 : 0}\n        className={`StarRating__Feedback-svg ${i < value ? 'svg_filled' : ''}`}\n      />\n    </Rate>\n  ))\n}\n"],"sourceRoot":""}