{"version":3,"sources":["webpack:///./src/utils/returns.js","webpack:///./src/components/common/Overlay.js","webpack:///./src/components/common/Drawer.js","webpack:///./src/components/Tracking/commons.js","webpack:///./src/components/CancelOrders/SideDrawer.js","webpack:///./src/components/CancelOrders/CancelSuccess.js","webpack:///./src/templates/Account/Cancel.js","webpack:///./src/components/Tracking/AdsSection.js","webpack:///./src/components/Account/LineItemThumbnail.js"],"names":["getReturnsRoute","order","orderId","getCancellationRoute","getQuantitiesRemainingToReturn","lineItem","quantity","returnedQuantity","getContentfulProduct","nodes","activeLineItem","filter","shopifyProduct","handle","productHandle","mapReturnType","returnType","getHeading","stage","getLatestReturnDetailForLineItem","lineItemId","returnsByDateCreatedDesc","returns","returnLineItems","findIndex","rLineItem","sort","returnObj1","returnObj2","Date","dateCreated","getOrderReturnLineItem","idx","getLatestReturnDetailForOrderId","orders","oId","find","getReturnLineItem","lItem","id","getImageUrls","photos","map","pObj","response","url","getReturnLineItems","shipments","forEach","shipment","lineItems","latestReturnDetailForLineItem","returnLineItem","status","labelUrl","returnStatus","push","trackingNumber","returnId","trackingUrl","getOrderTrackingLineItemsByShipment","lineItemsByShipment","filteredLineItems","length","formatSubReason","returnLineItemReview","subReason","formatReasonCode","str","capitalizeFirstLetter","toLowerCase","split","join","logSentry","error","user","captureWarning","API","type","isMethodRefund","value","includes","Overlay","styled","div","opacity","StyledDrawer","animated","aside","props","theme","colors","secondary","breakpoints","desktopSmall","desktopVw","isDrawerOpen","StyledCloseIcon","CloseIcon","primary","Close","button","hide","Drawer","open","onClose","children","useState","pseudoOpen","setPseudoOpen","useBodyScrollLock","useEffect","setTimeout","slideOutAnim","useSpring","transform","handlePseudoClose","ref","useOnClickOutSide","style","className","aria-label","onClick","StyledButton","Button","fonts","heading","StyledAdButton","ImageMobile","Image","ImageWrapper","mobileVw","StyledLineItem","LineItemThumbnail","Form","form","Text","Footer","AlertContainer","ButtonContainer","QuantitySelect","Select","StageZeroDrawer","closeModal","saveCancelledLineItem","onSubmitSuccess","formData","validationError","setValidationError","handleChange","cancelLineItem","currentLineItemId","setCurrentLineItemId","Math","min","fulfillableQuantity","cancelableQuantity","setCancelableQuantity","setCancelLineItemReview","cancelLineItemReview","secondaryLayout","options","Array","_","onChange","e","quantitiesRemainingToReturn","target","Number","label","name","required","CANCELATION_REASONS","defaultOption","rObj","reasonCode","placeholder","additionalComments","height","message","black","reason","comments","cancelLineItemId","contrast","Wrapper","Heading","RefundText","Container","StyledCancelledAdsSection","StyledRecom","StyledNewBestSeller","NewBestSellersSection","CancelSuccess","recommendedProducts","sections","navigate","json","text","textColor","image","products","tracker","hideImageOnMobile","AdsSection","BtnWrap","ErrorMsg","CancelInfo","LinkWrapper","h1","Description","p","CancelOrderQuery","CancelOrder","location","data","useFetch","fetchData","cancelOrder","cancelOrderErr","cancelOrderResponse","loading","contentfulAccountPage","state","email","getCurrentUser","process","setLineItems","setActiveLineItem","activeLineItemIndex","setActiveLineItemIndex","activeLineItemsChecked","setActiveLineItemsChecked","cancellationErrorMsg","setcancellationErrorMsg","cancellationError","setCancellationError","allLineItems","allCancellableLineItems","it","errorMsg","setErrorMsg","cancelledLineItems","setcancelledLineItems","setFormData","modalOpen","setModalOpen","cancellationSuccess","setCancellationSuccess","eventTracker","track","EventType","ORDER_CANCEL","entityId","action","category","context","line_items","work_flow","cancelOrderReq","items","cancelledQuantity","body","cancel_order","method","headers","JSON","stringify","redirect","to","orderNumber","StageZero","handleCheckboxClick","i","checkedItems","returnItems","rIdx","item","indexOf","splice","SideDrawer","contentfulProduct","updatedLineItems","firstFindCancelLineItemIndex","l","existingLineItems","itemsToBeCancelled","concat","slice","lineItemIdParam","checked","Set","StyledAdsSection","silver","StyledAdSectionButton","SectionImageContent","SectionImageWrapper","section","fluid","imageDesktop","documentToReactComponents","textMobile","getLinkPath","StyledLineItemThumbnail","Img","img","StyledImage","Content","Title","h2","Details","layout","greyLight","DetailWrapper","Detail","ErrorText","exchangeSize","exchangeColor","exchangePrice","exchangeImage","onLineItemClick","showPrice","showHighlightedPrice","errText","variants","variantTitle","v","size","color","price","parseFloat","devices","useDetectDevices","alt","description","src","title","fontWeight","mobile","marginRight","desktop"],"mappings":"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","file":"component---src-templates-account-cancel-js-c8d9d14926d3ec1cc91a.js","sourcesContent":["import { capitalizeFirstLetter } from './index'\nimport { captureWarning } from '../components/Sentry/utils'\n\nexport function getReturnsRoute(order) {\n  return `/account/orders/${order?.orderId}/return`\n}\n\nexport function getCancellationRoute(order) {\n  return `/account/orders/${order?.orderId}/cancel`\n}\n\nexport function getQuantitiesRemainingToReturn(lineItem) {\n  return lineItem.quantity - lineItem.returnedQuantity\n}\n\nexport function getContentfulProduct(nodes, activeLineItem) {\n  return nodes.filter(\n    ({ shopifyProduct }) =>\n      shopifyProduct.handle === activeLineItem.productHandle,\n  )[0]\n}\n\nexport const mapReturnType = returnType => {\n  if (returnType === 'REFUND') {\n    return 'Refund to card'\n  }\n\n  if (returnType === 'REFUND_TO_STORE_CREDIT') {\n    return 'Refund to store credit'\n  }\n\n  if (returnType === 'EXCHANGE') {\n    return 'Exchange with different size or color'\n  }\n\n  if (returnType === 'REPLACEMENT') {\n    return 'Exchange with exact same item'\n  }\n\n  return returnType\n}\n\nexport function getHeading(stage) {\n  if (stage === 0) {\n    return 'Choose items to return/exchange'\n  }\n  if (stage === 1) {\n    return 'How can we make it right?'\n  }\n  return 'Return Summary'\n}\n\nexport function getLatestReturnDetailForLineItem(order, lineItemId) {\n  const returnsForLineItem = (order?.returns || []).filter(\n    ({ returnLineItems }) => {\n      return (\n        (returnLineItems || []).findIndex(\n          rLineItem => rLineItem.lineItemId === lineItemId,\n        ) > -1\n      )\n    },\n  )\n\n  const returnsByDateCreatedDesc = (returnsForLineItem || []).sort(\n    (returnObj1, returnObj2) =>\n      new Date(returnObj2?.dateCreated) - new Date(returnObj1?.dateCreated),\n  )\n\n  return returnsByDateCreatedDesc?.[0]\n}\n\nexport function getOrderReturnLineItem(order, lineItemId) {\n  for (const { returnLineItems } of order?.returns || []) {\n    const idx = (returnLineItems || []).findIndex(\n      rLineItem => rLineItem.lineItemId === lineItemId,\n    )\n    if (idx > -1) return returnLineItems[idx]\n  }\n\n  return null\n}\n\nexport function getLatestReturnDetailForOrderId(orders, oId) {\n  const returnsForOrder =\n    (orders || []).find(({ orderId }) => oId === orderId)?.returns ?? []\n\n  const returnsByDateCreatedDesc = returnsForOrder.sort(\n    (returnObj1, returnObj2) =>\n      new Date(returnObj2?.dateCreated) - new Date(returnObj1?.dateCreated),\n  )\n\n  return returnsByDateCreatedDesc?.[0]\n}\n\nexport function getReturnLineItem(returnLineItems, lineItem) {\n  return (returnLineItems || []).find(\n    lItem => lItem?.lineItemId === lineItem?.id,\n  )\n}\n\nexport function getImageUrls(photos) {\n  return photos.map(pObj => pObj?.response?.url)\n}\n\nexport function getReturnLineItems(order) {\n  const returnLineItems = []\n  ;(order?.shipments ?? []).forEach(shipment => {\n    ;(shipment?.lineItems ?? []).forEach(lineItem => {\n      const latestReturnDetailForLineItem = getLatestReturnDetailForLineItem(\n        order,\n        lineItem.id,\n      )\n      const returnLineItem = getOrderReturnLineItem(order, lineItem.id)\n      if (\n        returnLineItem?.status === 'PROCESSED' ||\n        (latestReturnDetailForLineItem?.labelUrl &&\n          latestReturnDetailForLineItem?.returnStatus === 'REQUEST_CREATED')\n      ) {\n        returnLineItems.push({\n          ...lineItem,\n          status: returnLineItem?.status,\n          labelUrl: latestReturnDetailForLineItem?.labelUrl,\n          trackingNumber: latestReturnDetailForLineItem?.trackingNumber,\n          returnId: latestReturnDetailForLineItem?.returnId,\n          trackingUrl: latestReturnDetailForLineItem?.trackingUrl,\n        })\n      }\n    })\n  })\n  return returnLineItems\n}\n\nexport function getOrderTrackingLineItemsByShipment(\n  order,\n  returnLineItems = [],\n) {\n  const lineItemsByShipment = []\n  ;(order?.shipments ?? []).forEach(shipment => {\n    const filteredLineItems = (shipment?.lineItems ?? []).filter(\n      lItem =>\n        returnLineItems.findIndex(rLineItem => rLineItem.id === lItem.id) ===\n        -1,\n    )\n    if (filteredLineItems.length > 0)\n      lineItemsByShipment.push({ ...shipment, lineItems: filteredLineItems })\n  })\n  return lineItemsByShipment\n}\n\nexport const formatSubReason = returnLineItemReview =>\n  returnLineItemReview?.subReason ? ` | ${returnLineItemReview?.subReason}` : ''\n\nexport const formatReasonCode = str =>\n  capitalizeFirstLetter(\n    str\n      .toLowerCase()\n      .split('_')\n      .join(' '),\n  )\n\nexport function logSentry(error, user, orderId) {\n  captureWarning(\n    `Label API request failed with following error: ${error}`,\n    { user, orderId },\n    {\n      API: 'Return Label',\n      type: 'API_FAILURE',\n    },\n  )\n}\n\nexport function isMethodRefund(value) {\n  return ['REFUND_TO_STORE_CREDIT', 'REFUND'].includes(value)\n}\n","import styled from 'styled-components'\n\nexport const Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  opacity: ${({ opacity }) => opacity};\n  z-index: ${({ opacity }) => (opacity ? 2000 : -2000)};\n`\n","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { animated, useSpring } from 'react-spring'\nimport useOnClickOutSide from '../../hooks/useOnClickOutside'\nimport { desktopVw } from '../../styles/utils'\nimport useBodyScrollLock from '../../hooks/useBodyScrollLock'\nimport { Overlay } from './Overlay'\nimport CloseIcon from '../../assets/close.svg'\n\nconst StyledDrawer = styled(animated.aside)`\n  z-index: 2001;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  padding: 32px 46px;\n\n  background: ${props => props.theme.colors.secondary};\n  overflow-y: scroll;\n  -ms-overflow-style: none;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    left: unset;\n    width: ${desktopVw(392)};\n    padding: ${desktopVw(33)} ${desktopVw(51)};\n    box-shadow: ${({ isDrawerOpen }) =>\n      isDrawerOpen ? `#2B2D2F 0px 0px 5px 0px` : `none`};\n  }\n`\n\nconst StyledCloseIcon = styled(CloseIcon)`\n  path {\n    fill: ${props => props.theme.colors.primary};\n  }\n`\n\nconst Close = styled.button`\n  position: absolute;\n  z-index: 1;\n  top: 20px;\n  right: 20px;\n  width: 11px;\n  cursor: pointer;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: ${props => (props.hide ? 'none' : 'block')};\n    top: ${desktopVw(30)};\n    right: ${desktopVw(30)};\n    width: ${desktopVw(11)};\n  }\n`\n\nfunction Drawer({ open, onClose, children }) {\n  const [pseudoOpen, setPseudoOpen] = useState(false)\n\n  useBodyScrollLock(open)\n\n  useEffect(() => {\n    setTimeout(() => {\n      setPseudoOpen(open)\n    }, 200)\n  }, [open])\n\n  const slideOutAnim = useSpring({\n    transform: pseudoOpen ? `translate3d(0, 0, 0)` : ` translate3d(100%, 0, 0)`,\n  })\n\n  function handlePseudoClose() {\n    setPseudoOpen(false)\n    setTimeout(() => {\n      onClose()\n    }, 200)\n  }\n\n  const [ref] = useOnClickOutSide(() => open && handlePseudoClose())\n\n  return (\n    <>\n      {open && <Overlay opacity />}\n      <StyledDrawer\n        ref={ref}\n        isDrawerOpen={open}\n        style={slideOutAnim}\n        className='side__modal__container'\n      >\n        <Close\n          className='modal__close_button'\n          type='button'\n          aria-label='close'\n          onClick={handlePseudoClose}\n        >\n          <StyledCloseIcon />\n        </Close>\n        {children}\n      </StyledDrawer>\n    </>\n  )\n}\n\nexport default Drawer\n","import styled from 'styled-components'\nimport Image from 'gatsby-image'\nimport Button from '../Button'\nimport { desktopVw, mobileVw } from '../../styles/utils'\n\nexport const StyledButton = styled(Button)`\n  text-transform: uppercase;\n  font-size: 9px;\n  padding: 10px 40px;\n  width: 100%;\n  color: ${({ theme }) => theme.colors.secondary};\n  background: ${({ theme }) => theme.colors.primary};\n  font-family: ${({ theme }) => theme.fonts.heading};\n`\nexport const StyledAdButton = styled(StyledButton)`\n  margin-top: 5px;\n  width: 89px;\n  padding: 10px 0;\n  font-family: ${({ theme }) => theme.fonts.primary};\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(11)};\n    width: ${desktopVw(137)};\n  }\n`\nexport const ImageMobile = styled(Image)`\n  height: 100%;\n`\nexport const ImageWrapper = styled.div`\n  position: relative;\n  height: ${mobileVw(183)};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(307)};\n  }\n`\n","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\n// Components\nimport LineItemThumbnail from '../Account/LineItemThumbnail'\nimport Button from '../Button'\n\n// Stage components\n\nimport {\n  Alert,\n  Container,\n  CustomSelect,\n  Select,\n  TextArea,\n} from '../FormElements'\n\nimport Drawer from '../common/Drawer'\n\nimport { CANCELATION_REASONS } from '../../utils'\n\nconst StyledLineItem = styled(LineItemThumbnail)`\n  margin: 0;\n  .line_item_thumbnail__content {\n    flex-direction: column;\n  }\n  .line_item_thumbnail__detail {\n    margin: 3px 0;\n  }\n`\n\nconst Form = styled.form`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding-top: ${desktopVw(26.5)};\n  }\n`\n\nconst Text = styled.div`\n  font-size: 12px;\n  margin: 15px 0 10px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n    margin: 0 0 ${desktopVw(10)};\n  }\n`\n\nconst Footer = styled.div`\n  margin-top: 30px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-top: ${desktopVw(20)};\n  }\n`\n\nconst AlertContainer = styled.div`\n  margin-bottom: 16px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(16)};\n  }\n`\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: column-reverse;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  display: block;\n  width: 100%;\n  margin: 0 0 10px;\n  padding: 10px;\n  span {\n    font-size: 12px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    span {\n      font-size: ${desktopVw(12)};\n      text-transform: uppercase;\n    }\n  }\n`\n\nconst QuantitySelect = styled(Select)`\n  flex-shrink: 0;\n  flex: 1;\n  font-size: 16px;\n  margin-right: 0px;\n  margin-top: 10px;\n  width: 59px;\n\n  select {\n    text-transform: uppercase;\n    font-size: 12px;\n    padding: 6px 10px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(65)};\n    margin-top: ${desktopVw(10)};\n    select {\n      font-size: ${desktopVw(12)};\n      padding: ${desktopVw(6)} ${desktopVw(12)};\n    }\n  }\n`\n\nconst StageZeroDrawer = ({\n  open,\n  closeModal,\n  lineItem,\n  saveCancelledLineItem,\n  onSubmitSuccess,\n  formData,\n  validationError,\n  setValidationError,\n  handleChange,\n  cancelLineItem,\n}) => {\n  const [currentLineItemId, setCurrentLineItemId] = useState(null)\n\n  const [cancelableQuantity, setCancelableQuantity] = useState(\n    Math.min(lineItem.fulfillableQuantity, 1),\n  )\n\n  const resetModal = () => {\n    // Initialize the state\n    setCancelLineItemReview({})\n    setValidationError('')\n  }\n\n  useEffect(() => {\n    if (!lineItem) return\n    setCancelableQuantity(Math.min(lineItem.fulfillableQuantity, 1))\n    if (!currentLineItemId) {\n      setCurrentLineItemId(lineItem.id)\n    } else if (currentLineItemId != lineItem.id) {\n      setCurrentLineItemId(lineItem.id)\n      resetModal()\n    }\n  }, [lineItem])\n\n  const [cancelLineItemReview, setCancelLineItemReview] = useState(\n    cancelLineItem?.cancelLineItemReview ?? {},\n  )\n\n  const handleChangeReview = e => {\n    setValidationError('')\n\n    const { target } = e\n    const { name, value } = target\n\n    setCancelLineItemReview({\n      ...cancelLineItemReview,\n      [name]: value,\n    })\n  }\n\n  const valid = () => {\n    if (!formData.reasonCode) {\n      setValidationError('Please select a reason before proceeding')\n\n      return false\n    }\n    setValidationError('')\n    return true\n  }\n\n  const handleSubmit = () => {\n    if (!valid()) return\n\n    saveCancelledLineItem(\n      {\n        ...formData,\n        lineItemId: lineItem.id,\n        cancelLineItemReview: {\n          ...cancelLineItemReview,\n          reason: formData.reasonCode,\n          comments: formData?.additionalComments,\n          cancelLineItemId: lineItem.id,\n        },\n        lineItem,\n      },\n      cancelableQuantity,\n    )\n\n    onSubmitSuccess()\n    closeModal()\n  }\n\n  function handleQuantityChange(e) {\n    const quantitiesRemainingToReturn = lineItem.fulfillableQuantity\n    const { value } = e.target\n    if (value <= 0)\n      setCancelableQuantity(Math.min(quantitiesRemainingToReturn, 1))\n    else if (value > quantitiesRemainingToReturn)\n      setCancelableQuantity(Number(quantitiesRemainingToReturn))\n    else setCancelableQuantity(Number(value))\n  }\n\n  return (\n    <Drawer open={open} onClose={closeModal}>\n      <StyledLineItem secondaryLayout lineItem={lineItem} />\n\n      <Form>\n        {lineItem.fulfillableQuantity > 1 && (\n          <Container>\n            <Text>Quantity</Text>\n            <QuantitySelect\n              options={[...new Array(lineItem.fulfillableQuantity)].map(\n                (_, idx) => idx + 1,\n              )}\n              onChange={handleQuantityChange}\n            />\n          </Container>\n        )}\n        <Container>\n          <Text>Reason</Text>\n          <CustomSelect\n            label='Select Reason'\n            name='reasonCode'\n            required\n            options={CANCELATION_REASONS}\n            onChange={e => {\n              setCancelLineItemReview({\n                ...cancelLineItemReview,\n                subReason: null,\n              })\n              handleChange(e)\n            }}\n            defaultOption={\n              CANCELATION_REASONS.find(\n                rObj => rObj.value === formData?.reasonCode,\n              )?.name\n            }\n          />\n        </Container>\n        {formData?.reasonCode === 'OTHER' && (\n          <Container>\n            <Text>Additional Comments</Text>\n            <TextArea\n              name='additionalComments'\n              required\n              placeholder=''\n              onChange={handleChangeReview}\n              value={cancelLineItemReview?.additionalComments}\n              height={100}\n            />\n          </Container>\n        )}\n      </Form>\n\n      <Footer>\n        {validationError && (\n          <AlertContainer>\n            <Alert message={validationError} />\n          </AlertContainer>\n        )}\n        <ButtonContainer>\n          <StyledButton black type='button' onClick={handleSubmit}>\n            Submit\n          </StyledButton>\n        </ButtonContainer>\n      </Footer>\n    </Drawer>\n  )\n}\n\nexport default StageZeroDrawer\n","import React from 'react'\nimport styled from 'styled-components'\nimport { navigate } from '@reach/router'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport NewBestSellersSection from '../NewBestSellersSection'\nimport { AdsSection } from '../Tracking/AdsSection'\nimport CirceTick from '../../assets/circle_tick.svg'\nimport Button from '../Button'\n\nconst StyledButton = styled(Button)`\n  font-size: 12px;\n  padding: 0;\n  margin-bottom: 0px;\n  height: 48px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${props =>\n    props.contrast ? props.theme.colors.secondary : props.theme.colors.primary};\n  background: ${props =>\n    props.contrast ? props.theme.colors.primary : props.theme.colors.secondary};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: auto;\n    text-transform: uppercase;\n    padding: ${desktopVw(3)} ${desktopVw(29)};\n  }\n`\n\nconst Wrapper = styled.div`\n  background-color: #f9f9f9;\n  text-align: center;\n  padding: 25px 11px 42px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(47)} 0 ${desktopVw(32)};\n  }\n`\n\nconst Heading = styled.div`\n  font-family: ${props => props.theme.fonts.heading};\n  font-weight: 500;\n  font-size: 24px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: 100%;\n    font-size: ${desktopVw(36)};\n    margin-top: ${desktopVw(17)};\n    margin-bottom: ${desktopVw(10)};\n  }\n`\n\nconst RefundText = styled.div`\n  margin-bottom: 26px;\n  font-size: 12px;\n  line-height: 20px;\n  text-align: center;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    line-height: ${desktopVw(20)};\n    font-size: ${desktopVw(12)};\n    margin-bottom: ${desktopVw(28)};\n  }\n`\n\nconst Container = styled.div`\n  padding: 0 14px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 ${desktopVw(240)};\n  }\n`\n\nconst StyledCancelledAdsSection = styled.div`\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: block;\n  }\n`\n\nconst StyledRecom = styled.div`\n  /* padding: 22px 0px; */\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: 0 ${desktopVw(240)};\n  }\n`\n\nconst StyledNewBestSeller = styled(NewBestSellersSection)`\n  > ul {\n    padding: 0;\n    margin: 0;\n    > li:first-child {\n      margin-left: 25px;\n    }\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(25)};\n  }\n`\n\nconst CancelSuccess = ({ recommendedProducts, sections }) => {\n  return (\n    <>\n      <Container>\n        <Wrapper>\n          <div>\n            <CirceTick />\n          </div>\n          <Heading>This order has been canceled</Heading>\n          <RefundText>\n            Your order will be refunded in 2 - 3 business days.\n          </RefundText>\n          <StyledButton\n            contrast\n            onClick={() => {\n              navigate('/')\n            }}\n          >\n            Continue Shopping\n          </StyledButton>\n        </Wrapper>\n      </Container>\n      <StyledRecom>\n        {recommendedProducts && (\n          <StyledNewBestSeller\n            json={recommendedProducts.text.json}\n            textColor={recommendedProducts.textColor}\n            image={recommendedProducts.image}\n            products={recommendedProducts.products}\n            tracker='cancel_order'\n            hideImageOnMobile\n          />\n        )}\n        <StyledCancelledAdsSection>\n          {sections && <AdsSection sections={sections} />}\n        </StyledCancelledAdsSection>\n      </StyledRecom>\n    </>\n  )\n}\n\nexport default CancelSuccess\n","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { graphql, Link } from 'gatsby'\nimport { navigate } from '@reach/router'\nimport { desktopVw } from '../../styles/utils'\nimport SideDrawer from '../../components/CancelOrders/SideDrawer'\nimport { Alert } from '../../components/FormElements'\nimport useFetch from '../../hooks/useFetch'\nimport { getCurrentUser } from '../../utils'\nimport { StageZero } from '../../components/Returns/StageZero'\nimport CancelSuccess from '../../components/CancelOrders/CancelSuccess'\nimport { getReturnLineItem } from '../../utils/returns'\nimport { captureWarning } from '../../components/Sentry/utils'\nimport Button from '../../components/Button'\nimport eventTracker from '../../trackers/EventTracker'\nimport EventType from '../../trackers/eventType'\n\nconst ERROR_MESSAGE = `We’re sorry, it looks like your order has already processed for shipment, so we’re not able to change your order at this time.`\nconst INFO_CANCELLATION = `Not to worry! We offer 365 days free returns.`\n\nexport const BtnWrap = styled(Button)`\n  font-size: 12px;\n  padding: 0;\n  /* margin-bottom: 20px; */\n  height: 48px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${props =>\n    props.contrast ? props.theme.colors.secondary : props.theme.colors.primary};\n  background: ${props =>\n    props.contrast ? props.theme.colors.primary : props.theme.colors.secondary};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: auto;\n    text-transform: uppercase;\n    padding: 0 ${desktopVw(29)};\n  }\n`\n\nconst ErrorMsg = styled.div`\n  font-weight: 500;\n  color: #db3333;\n  font-size: 12px;\n  line-height: 20px;\n  margin-top: 5px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(569)};\n    margin-top: ${desktopVw(9)};\n    font-size: ${desktopVw(12)};\n    line-height: ${desktopVw(20)};\n  }\n`\n\nconst CancelInfo = styled.div`\n  font-weight: 400;\n  color: #000;\n  font-size: 10px;\n  line-height: 13px;\n  margin-top: 12px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(569)};\n    margin-top: 0;\n    font-size: ${desktopVw(12)};\n    line-height: ${desktopVw(20)};\n  }\n`\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  /* margin-top: 26px; */\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    /* margin-top: ${desktopVw(49)}; */\n  }\n`\n\nconst Container = styled.div`\n  padding: 21px 21px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(41)} ${desktopVw(240)};\n  }\n`\n\nconst LinkWrapper = styled.div`\n  display: flex;\n  text-transform: uppercase;\n  font-size: 12px;\n  a {\n    text-decoration: underline;\n    margin: 0 5px;\n    &:first-child {\n      margin-left: 0;\n    }\n  }\n  p {\n    margin-left: 5px;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n  }\n`\n\nconst Heading = styled.h1`\n  font-size: 24px;\n  line-height: 30px;\n  margin: 19px 0 5px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(36)};\n    margin: ${desktopVw(24)} 0 ${desktopVw(9)};\n    line-height: normal;\n  }\n`\n\nconst Description = styled.p`\n  margin-bottom: 25px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n    margin-bottom: ${desktopVw(63)};\n    span {\n      text-transform: uppercase;\n    }\n  }\n`\n\nconst CancelOrder = ({ location, data, orderId }) => {\n  const { fetchData, response: orders } = useFetch()\n\n  const {\n    fetchData: cancelOrder,\n    error: cancelOrderErr,\n    response: cancelOrderResponse,\n    loading,\n  } = useFetch()\n\n  const {\n    contentfulAccountPage: { recommendedProducts = {}, sections = {} },\n  } = data\n\n  const order =\n    (location.state && location.state.order) ||\n    (orders ?? []).find(order => order.orderId === Number(orderId))\n\n  const { email } = getCurrentUser()\n\n  useEffect(() => {\n    const url = `${process.env.GATSBY_ORDERS_API_ENDPOINT}/service/order?emailId=${email}&limit=50`\n    if (!order && email) fetchData(url)\n  }, [])\n\n  const [lineItems, setLineItems] = useState([])\n  const [activeLineItem, setActiveLineItem] = useState(null)\n  const [activeLineItemIndex, setActiveLineItemIndex] = useState(null)\n  const [activeLineItemsChecked, setActiveLineItemsChecked] = useState([])\n  const [cancellationErrorMsg, setcancellationErrorMsg] = useState(\n    ERROR_MESSAGE,\n  )\n  const [cancellationError, setCancellationError] = useState(false)\n\n  useEffect(() => {\n    if (!order) return\n    const { allLineItems } = order\n    const allCancellableLineItems = [\n      ...allLineItems.filter(\n        it => it.fulfillableQuantity && it.fulfillableQuantity > 0,\n      ),\n    ]\n\n    setLineItems(allCancellableLineItems)\n    setCancellationError(allCancellableLineItems.length == 0)\n  }, [order])\n\n  const [errorMsg, setErrorMsg] = useState('')\n\n  const [cancelledLineItems, setcancelledLineItems] = useState([])\n  const [formData, setFormData] = useState({})\n\n  const [modalOpen, setModalOpen] = useState(null)\n\n  const [cancellationSuccess, setCancellationSuccess] = useState(false)\n\n  const [validationError, setValidationError] = useState('')\n\n  useEffect(() => {\n    if (cancelOrderResponse) {\n      if (cancelOrderResponse.status === 500) {\n        setcancellationErrorMsg(\n          cancelOrderResponse.message || cancelOrderResponse.error,\n        )\n        setCancellationError(true)\n        captureWarning(\n          `Cancel Order API request failed with following error: ${cancelOrderResponse.message}`,\n          { orderId },\n          {\n            API: 'Cancel Order',\n            type: 'API_FAILURE',\n          },\n        )\n      } else if (cancelOrderResponse.status === 400) {\n        setcancellationErrorMsg(\n          cancelOrderResponse.message || cancelOrderResponse.error,\n        )\n        captureWarning(\n          `Cancel Order API request failed with following error: ${cancelOrderResponse.message}`,\n          { orderId },\n          {\n            API: 'Cancel Order',\n            type: 'API_FAILURE',\n          },\n        )\n        setCancellationError(true)\n      } else {\n        setCancellationSuccess(true)\n        eventTracker.track(EventType.ORDER_CANCEL, {\n          entityId: orderId,\n          action: 'cancel_order',\n          category: 'cancel',\n          context: {\n            line_items: cancelledLineItems,\n            work_flow: 'shipment_level_cancellation',\n          },\n        })\n      }\n    }\n  }, [cancelOrderErr, cancelOrderResponse])\n\n  const user = getCurrentUser()\n\n  const handleCheckboxClick = i => {\n    if (activeLineItemsChecked.includes(i)) {\n      const lineItemId = lineItems[i]?.id\n      const checkedItems = [...activeLineItemsChecked]\n      const returnItems = [...cancelledLineItems]\n      const rIdx = returnItems.findIndex(item => item.lineItemId === lineItemId)\n      const idx = checkedItems.indexOf(i)\n      checkedItems.splice(idx, 1)\n      returnItems.splice(rIdx, 1)\n      setActiveLineItemsChecked(checkedItems)\n      setcancelledLineItems(returnItems)\n    } else {\n      setActiveLineItem(lineItems[i])\n      setActiveLineItemIndex(i)\n      setModalOpen(true)\n      setErrorMsg('')\n    }\n  }\n\n  const handleChange = (e, lineItemIdParam) => {\n    setValidationError('')\n\n    const { target } = e\n    const { name } = target\n    const value = target.name === 'consent' ? target.checked : target.value\n\n    const lineItemId = lineItemIdParam || activeLineItem?.id\n\n    setFormData({\n      ...formData,\n      [lineItemId]: {\n        ...(formData?.[lineItemId] ?? {}),\n        [name]: value,\n      },\n    })\n  }\n\n  const saveCancelledLineItem = (cancelLineItem, quantity) => {\n    const firstFindCancelLineItemIndex = cancelledLineItems.findIndex(\n      l => l.lineItemId === cancelLineItem.lineItemId,\n    )\n\n    const existingLineItems = cancelledLineItems.filter(\n      l => l.lineItemId !== cancelLineItem.lineItemId,\n    )\n\n    const itemsToBeCancelled = {\n      ...cancelLineItem,\n      cancelledQuantity: quantity,\n    }\n\n    let updatedLineItems\n    if (firstFindCancelLineItemIndex === -1) {\n      updatedLineItems = existingLineItems.concat(itemsToBeCancelled)\n    } else {\n      // to preserve ordering\n      updatedLineItems = [\n        ...existingLineItems.slice(0, firstFindCancelLineItemIndex),\n        itemsToBeCancelled,\n        ...existingLineItems.slice(firstFindCancelLineItemIndex),\n      ]\n    }\n\n    setcancelledLineItems(updatedLineItems)\n  }\n\n  const handleContinue = () => {\n    if (cancellationError) {\n      navigate(`/account/my-orders-returns`)\n    }\n    if (cancelledLineItems.length === 0) {\n      setErrorMsg('Please select at least one item to continue')\n      return\n    }\n    cancelOrderReq()\n    setErrorMsg('')\n  }\n\n  const cancelOrderReq = () => {\n    if (loading) return\n    const url = `${process.env.GATSBY_ORDERS_API_ENDPOINT}/service/orders/${orderId}/cancel`\n    const items = cancelledLineItems.map(it => {\n      return {\n        id: it.lineItemId,\n        quantity: it.cancelledQuantity,\n        reason: it.reasonCode,\n      }\n    })\n    try {\n      const body = {\n        cancel_order: false,\n        items,\n      }\n\n      const options = {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n        redirect: 'follow',\n      }\n      cancelOrder(url, options)\n    } catch (error) {\n      setCancellationError(true)\n      captureWarning(\n        `Cancel Order API request failed with following error: ${error}`,\n        { user, orderId },\n        {\n          API: 'Cancel Order',\n          type: 'API_FAILURE',\n        },\n      )\n    }\n  }\n\n  const handleSubmitSuccess = () => {\n    const checkedItems = [...activeLineItemsChecked]\n    checkedItems.push(activeLineItemIndex)\n    setActiveLineItemsChecked([...new Set(checkedItems)])\n  }\n\n  return (\n    <>\n      <Container>\n        <LinkWrapper>\n          <Link to='/account/my-profile'>Account</Link>/\n          <Link to='/account/my-orders-returns'>Orders</Link>/<p>Cancel</p>\n        </LinkWrapper>\n        {!cancellationSuccess && (\n          <>\n            <Heading>Choose items to Cancel</Heading>\n            {cancellationError ? (\n              <>\n                <ErrorMsg>{cancellationErrorMsg}</ErrorMsg>\n                <CancelInfo>{INFO_CANCELLATION}</CancelInfo>\n              </>\n            ) : (\n              <>\n                <Description>\n                  Showing product(s) from your{' '}\n                  <span>order #{order?.orderNumber}</span>\n                </Description>\n                <StageZero\n                  lineItems={lineItems}\n                  activeLineItemsChecked={activeLineItemsChecked}\n                  handleCheckboxClick={handleCheckboxClick}\n                  returnLineItems={cancelledLineItems}\n                  setActiveLineItem={setActiveLineItem}\n                  setActiveLineItemIndex={setActiveLineItemIndex}\n                  setModalOpen={setModalOpen}\n                />\n              </>\n            )}\n\n            <ButtonContainer>\n              <BtnWrap contrast onClick={handleContinue} loading={loading}>\n                {cancellationError\n                  ? 'Return To Account'\n                  : 'Cancel selected Items in this order'}\n              </BtnWrap>\n              {errorMsg && <Alert message={errorMsg} />}\n            </ButtonContainer>\n          </>\n        )}\n      </Container>\n      {cancellationSuccess && (\n        <CancelSuccess\n          recommendedProducts={recommendedProducts}\n          sections={sections}\n        />\n      )}\n\n      {activeLineItem && modalOpen && (\n        <SideDrawer\n          open={modalOpen}\n          closeModal={() => setModalOpen(false)}\n          lineItem={activeLineItem}\n          contentfulProduct={{}}\n          saveCancelledLineItem={saveCancelledLineItem}\n          formData={formData?.[activeLineItem?.id] ?? {}}\n          validationError={validationError}\n          setValidationError={setValidationError}\n          handleChange={handleChange}\n          onSubmitSuccess={handleSubmitSuccess}\n          cancelLineItem={getReturnLineItem(cancelledLineItems, activeLineItem)}\n        />\n      )}\n    </>\n  )\n}\n\nexport default CancelOrder\n\nexport const CancelOrderQuery = graphql`\n  query Cancel($id: String!) {\n    contentfulAccountPage(id: { eq: $id }) {\n      id\n      pageType\n      recommendedProducts {\n        id\n        text {\n          json\n        }\n        products {\n          id\n          title\n          seoTitle\n          slug\n          subtitle\n          metaTags\n          shippingInformation {\n            shippingInformation\n          }\n          shippingMetaInfoText {\n            shippingMetaInfoText\n          }\n          productImages {\n            ...ProductImages\n          }\n          colors {\n            ...Color\n          }\n          shopifyProduct {\n            ...ShopifyProduct\n          }\n        }\n      }\n      sections {\n        ... on ContentfulImageWithTextSection {\n          ...ImageWithTextSection\n        }\n      }\n    }\n  }\n`\n","import { documentToReactComponents } from '@contentful/rich-text-react-renderer'\nimport { getLinkPath } from '../../utils'\nimport React from 'react'\nimport styled from 'styled-components'\nimport { desktopVw, mobileVw } from '../../styles/utils'\nimport { ImageMobile, ImageWrapper, StyledAdButton } from './commons'\n\nconst StyledAdsSection = styled.div`\n  border-top: 0.5px solid ${({ theme }) => theme.colors.silver};\n  padding-top: 34px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n  }\n`\n\nconst StyledAdSectionButton = styled(StyledAdButton)`\n  bottom: 13px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: 100%;\n    font-size: ${desktopVw(13)};\n  }\n`\n\nconst SectionImageContent = styled.div`\n  position: absolute;\n  top: 0;\n  left: 15px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  max-width: ${mobileVw(160)};\n  p {\n    position: relative;\n    font-size: 24px;\n    font-weight: 500;\n    top: 13px;\n    text-transform: uppercase;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    max-width: ${desktopVw(160)};\n    p {\n      font-size: ${desktopVw(27)};\n    }\n  }\n`\n\nconst SectionImageWrapper = styled(ImageWrapper)`\n  margin-bottom: 33px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-basis: 50%;\n    &:first-child {\n      margin-right: ${desktopVw(15)};\n    }\n    &:last-child {\n      margin-left: ${desktopVw(15)};\n    }\n  }\n`\n\nexport function AdsSection({ sections }) {\n  return (\n    <StyledAdsSection>\n      {sections.map(section => (\n        <SectionImageWrapper>\n          <ImageMobile\n            fluid={section?.image?.fluid || section?.imageDesktop?.fluid}\n          />\n          <SectionImageContent>\n            <p>\n              {documentToReactComponents(\n                section?.textMobile?.json || section?.text?.json,\n              )}\n            </p>\n            <StyledAdSectionButton to={getLinkPath(section?.button)}>\n              {section?.button?.text}\n            </StyledAdSectionButton>\n          </SectionImageContent>\n        </SectionImageWrapper>\n      ))}\n    </StyledAdsSection>\n  )\n}\n","import React from 'react'\nimport Image from 'gatsby-image'\nimport styled from 'styled-components'\nimport { desktopVw, mobileVw } from '../../styles/utils'\nimport useDetectDevices from '../../hooks/useDetectDevices'\nimport { colors } from '../../styles/theme'\n\nconst StyledLineItemThumbnail = styled.div`\n  display: flex;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(13)};\n  }\n`\n\nconst Img = styled.img`\n  width: 89px;\n  height: 100%;\n  background-color: grey;\n  margin-right: 13px;\n  object-fit: cover;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(13)};\n    width: ${desktopVw(89)};\n  }\n`\n\nconst StyledImage = styled(Image)`\n  width: 89px;\n  min-height: 116px;\n  margin-right: 13px;\n  flex-shrink: 0;\n  background-color: grey;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(13)};\n    width: ${desktopVw(80)};\n    min-height: ${desktopVw(104)};\n  }\n`\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 100%;\n`\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`\n\nconst Title = styled.h2`\n  font-size: 12px;\n  font-family: ${({ theme }) => theme.fonts.primary};\n  font-weight: 500;\n  margin: 0 0 2px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(12)};\n    line-height: ${desktopVw(18)};\n    margin: 0 0 ${desktopVw(10)};\n  }\n`\n\nconst Details = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n    color: ${({ layout, theme }) =>\n      layout ? theme.colors.primary : theme.colors.greyLight};\n  }\n`\n\nconst DetailWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(35)};\n  }\n`\n\nconst Break = styled.div`\n  width: 100%;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: ${({ layout }) => (layout ? 'block' : 'none')};\n  }\n`\n\nconst Detail = styled.div`\n  font-size: 10px;\n  margin: 0 9px 0 0;\n  font-family: ${props => props.theme.fonts.primary};\n  font-weight: 400;\n  color: ${props => props.theme.colors.greyLight};\n\n  &:last-child {\n    margin: 0;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(10)};\n    margin: 0 0 ${desktopVw(6)} 0;\n    line-height: 1;\n  }\n`\n\nconst ErrorText = styled.div`\n  color: #db3333;\n  font-size: ${mobileVw(10)};\n  line-height: ${mobileVw(12.5)};\n  display: none;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(10)};\n    line-height: ${desktopVw(20)};\n    display: block;\n  }\n`\n\nconst LineItemThumbnail = ({\n  className,\n  lineItem,\n  exchangeSize,\n  exchangeColor,\n  exchangePrice,\n  exchangeImage,\n  secondaryLayout,\n  children,\n  onLineItemClick,\n  showPrice = true,\n  showHighlightedPrice = false,\n  errText,\n}) => {\n  const variants = lineItem.variantTitle\n    .split('/')\n    .filter(v => !v.includes('-'))\n\n  const size = variants.slice(0, -1).join('/')\n  const color = variants.slice(-1)[0]\n  const price = exchangePrice || parseFloat(lineItem.price)\n\n  const { devices } = useDetectDevices()\n\n  return (\n    <StyledLineItemThumbnail onClick={onLineItemClick} className={className}>\n      {exchangeImage ? (\n        <StyledImage\n          fluid={exchangeImage.fluid}\n          alt={exchangeImage.description}\n        />\n      ) : (\n        <Img loading='lazy' src={lineItem.image} />\n      )}\n      <Content className='line_item_thumbnail__content'>\n        <div>\n          <Title layout={secondaryLayout}>{lineItem.title}</Title>\n          {showHighlightedPrice && (\n            <Detail\n              style={{ fontWeight: 500, color: colors.primary }}\n              className='line_item_thumbnail__detail'\n            >{`$${price}`}</Detail>\n          )}\n          <Wrapper className='line_item_thumbnail__wrapper'>\n            <Details\n              className='line_item_thumbnail__content'\n              layout={secondaryLayout}\n            >\n              <DetailWrapper>\n                <Detail className='line_item_thumbnail__detail'>{`Qty: ${lineItem.quantity}`}</Detail>\n                {showPrice && (\n                  <Detail className='line_item_thumbnail__detail'>{`Price: $${price}`}</Detail>\n                )}\n              </DetailWrapper>\n              <DetailWrapper>\n                <Detail className='line_item_thumbnail__detail'>{`Size: ${exchangeSize ||\n                  size}`}</Detail>\n                <Detail className='line_item_thumbnail__detail'>{`Color: ${exchangeColor ||\n                  color}`}</Detail>\n              </DetailWrapper>\n            </Details>\n            {devices.mobile && (\n              <div style={{ marginRight: 10 }}>{children}</div>\n            )}\n          </Wrapper>\n        </div>\n        {errText && <ErrorText>{errText}</ErrorText>}\n        {devices.desktop && <div>{children}</div>}\n      </Content>\n    </StyledLineItemThumbnail>\n  )\n}\n\nexport default LineItemThumbnail\n"],"sourceRoot":""}