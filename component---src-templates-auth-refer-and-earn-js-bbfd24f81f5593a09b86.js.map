{"version":3,"sources":["webpack:///./src/components/Auth/FormFooter.js","webpack:///./src/components/SEO.js","webpack:///./src/shopify/customerAccessTokenCreateWithMultipass.js","webpack:///./src/shopify/fetchCustomerAccessToken.js","webpack:///./src/components/icons/Facebook.js","webpack:///./src/components/icons/Messenger.js","webpack:///./src/components/icons/Twitter.js","webpack:///./src/components/icons/EntypoLink.js","webpack:///./src/components/ReferAndEarn/ReferralLink.js","webpack:///./src/components/ReferAndEarn/Success.js","webpack:///./src/templates/Auth/ReferAndEarn.js","webpack:///./src/components/Auth/AuthWrapper.js","webpack:///./src/hooks/useReferralPoints.js","webpack:///./src/components/ReferAndEarn/ReferralPoints.js","webpack:///./src/components/Auth/FormHeader.js","webpack:///./src/shopify/queryCustomer.js","webpack:///./src/shopify/queryLatestCustomer.js","webpack:///./src/shopify/loadCustomerAccessToken.js","webpack:///./src/hooks/useCustomer.js"],"names":["FormFooter","styled","div","props","theme","breakpoints","desktopSmall","desktopVw","SEO","title","description","type","slug","canonicalUrl","image","schemaData","noindex","nofollow","category","reviewsAndRatings","price","userReviews","reviews","map","review","author","datePublished","dateCreated","body","reviewRating","bestRating","ratingValue","rating","worstRating","name","content","index","property","rel","href","hrefLang","toFixed","averageRating","count","JSON","stringify","mutation","gql","customerAccessTokenCreateWithMultipass","client","variables","mutate","fetchCustomerAccessToken","a","Auth","user","getUserSession","userSession","headers","Headers","append","idToken","jwtToken","fetch","process","method","multipassFetch","json","multipassToken","accessTokenResult","customerAccessToken","data","Facebook","width","height","viewBox","fill","d","Messenger","Twitter","EntypoLink","StyledReferralLink","rotate","keyframes","Info","p","FacebookIcon","MessengerIcon","TwitterIcon","CopyIcon","SocialWrapper","Anchor","lessMargin","Hidden","textarea","Loader","colors","greyLighter","greyLight","ReferralLink","referralLink","loading","ref","useRef","value","className","onClick","current","select","document","execCommand","Form","form","StyledButton","Button","ActivateAccount","ReferralPointsContainer","ReferralPointsWrapper","isLast","Success","handleSubmit","handleChange","referralCode","targetEmail","successfulReferrals","invitedReferrals","submitButtonText","onSubmit","FormHeader","required","placeholder","onChange","black","ReferralPoints","referrals","totalText","noReferralsMsg","isLoggedIn","to","trackParams","trackInternal","trackGA","action","StyledReferAndEarn","reduceMarginTop","announcementBar","desktop","header","StyledInput","Input","StyledFormFooter","ReferAndEarnQuery","ReferAndEarn","page","contentfulAuthenticationPage","useState","stage","setStage","formData","setFormData","errorMsg","setErrorMsg","useFetch","customerDetails","response","fetchCustomerDetails","fetchData","customerDetailsLoading","email","getCurrentUser","customer","useCustomer","useEffect","sourceEmail","decodeIdFromGraphQLResponse","id","e","target","error","preventDefault","validateEmail","targetEmailArr","split","trim","options","eventTracker","track","EventType","SEND_REFERRAL_EMAIL_INVITE","trackClick","FORM_SUBMIT","setReferralCode","useReferralPoints","fetchReferrals","code","captureEvent","message","seoTitle","seoDescripton","metaImage","fluid","src","AuthWrapper","largeImage","imageText","marginTop","documentToReactComponents","formHeader","defaultValue","readOnly","buttonText","referral_code","formFooter","StyledAuthWrapper","section","ImageWrapper","ImageTextWrapper","ImageText","red","fonts","secondary","ImageTextAlt","FormContainer","FormWrapper","children","style","url","useCallback","StyledReferralPoints","Overview","OverviewTitle","RewardOverviewText","Total","TotalText","NoReferrals","totalPoints","setTotalPoints","total","reduce","acc","v","points","i","key","parseInt","toLocaleString","length","query","queryShopifyCustomer","queryShopifyLatestCustomer","fetchPolicy","saveCustomerAccessToken","saveState","loadCustomerAccessToken","loadState","Date","parse","expiresAt","console","log","newAccessToken","stores","useContext","StoreContext","setCustomer","refreshCustomerData","setRefreshCustomerData","setLoading","getCustomer","lastbrand","accessToken","getLatestCustomer","checkRefreshCustomer","refreshCustomer"],"mappings":"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","file":"component---src-templates-auth-refer-and-earn-js-bbfd24f81f5593a09b86.js","sourcesContent":["import styled from 'styled-components'\nimport { desktopVw } from '../../styles/utils'\n\nconst FormFooter = styled.div`\n  margin: 0 0 25px;\n\n  p {\n    text-align: center;\n    text-transform: uppercase;\n    font-size: 12px;\n    line-height: 33px;\n  }\n\n  a {\n    text-decoration: underline;\n    letter-spacing: 1.8px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n\n    p {\n      font-size: ${desktopVw(12)};\n      line-height: ${desktopVw(24)};\n      margin-top: ${desktopVw(14)};\n    }\n\n    a {\n      letter-spacing: 0;\n    }\n  }\n`\n\nexport default FormFooter\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\n\nconst SEO = ({\n  title,\n  description,\n  type,\n  slug,\n  canonicalUrl,\n  image,\n  noindex,\n  nofollow,\n  schemaData,\n  category,\n  reviewsAndRatings,\n  price,\n}) => {\n  const index =\n    noindex || process.env.GATSBY_BUILD_ENVIRONMENT !== 'production'\n      ? 'noindex'\n      : 'index'\n  const follow =\n    nofollow || process.env.GATSBY_BUILD_ENVIRONMENT !== 'production'\n      ? 'nofollow'\n      : 'follow'\n  const userReviews =\n    schemaData &&\n    reviewsAndRatings &&\n    reviewsAndRatings.reviews.map(review => {\n      return {\n        '@type': 'Review',\n        author: review.author,\n        datePublished: review.dateCreated,\n        description: review.body,\n        reviewRating: {\n          '@type': 'Rating',\n          bestRating: '5',\n          ratingValue: `${review.rating}`,\n          worstRating: '1',\n        },\n      }\n    })\n  return (\n    <Helmet>\n      <title>{title}</title>\n      <meta name='robots' content={`${index}, ${follow}`} />\n      <meta name='description' content={description || ''} />\n      <meta property='og:title' content={title || ''} />\n      <meta property='og:type' content={type || ''} />\n      <meta property='og:url' content={`https://www.onequince.com/${slug}`} />\n      <meta property='og:image' content={image && image} />\n      <link\n        rel='alternate'\n        href={`https://www.onequince.com/${slug}`}\n        hrefLang='en-US'\n      />\n      <link\n        rel='canonical'\n        href={canonicalUrl || `https://www.onequince.com/${slug}`}\n      />\n      {schemaData && reviewsAndRatings && (\n        <script type='application/ld+json'>\n          {`{\n              \"@context\": \"https://schema.org\",\n              \"@type\": \"${type}\",\n              \"name\": \"${title}\",\n              \"description\": \"${description}\",\n              \"image\": \"${image}\",\n              \"category\": \"${category}\",\n              \"brand\": \"Quince\",\n              \"offers\": {\n                \"@type\": \"Offer\",\n                \"availability\": \"http://schema.org/InStock\",\n                \"price\": \"${price && price.toFixed(2)}\",\n                \"priceCurrency\": \"USD\"\n              },\n              \"aggregateRating\": {\n                \"@type\" : \"AggregateRating\",\n                \"ratingValue\": \"${reviewsAndRatings.averageRating}\",\n                \"reviewCount\": \"${reviewsAndRatings.count}\"\n              },\n              \"review\": ${JSON.stringify(userReviews)}\n            }`}\n        </script>\n      )}\n      {schemaData && !reviewsAndRatings && (\n        <script type='application/ld+json'>\n          {`{\n              \"@context\": \"https://schema.org\",\n              \"@type\": \"${type}\",\n              \"name\": \"${title}\",\n              \"description\": \"${description}\",\n              \"image\": \"${image}\",\n              \"category\": \"${category}\",\n              \"brand\": \"Quince\",\n              \"offers\": {\n                \"@type\": \"Offer\",\n                \"availability\": \"http://schema.org/InStock\",\n                \"price\": \"${price && price.toFixed(2)}\",\n                \"priceCurrency\": \"USD\"\n              }\n            }`}\n        </script>\n      )}\n    </Helmet>\n  )\n}\n\nexport default SEO\n","import { gql } from '@apollo/client'\n\nconst mutation = gql`\n  mutation customerAccessTokenCreateWithMultipass($multipassToken: String!) {\n    customerAccessTokenCreateWithMultipass(multipassToken: $multipassToken) {\n      customerAccessToken {\n        accessToken\n        expiresAt\n      }\n      customerUserErrors {\n        code\n        field\n        message\n      }\n    }\n  }\n`\n\n/**\n * https://help.shopify.com/en/api/storefront-api/reference/mutation/checkoutcreate\n *\n * @param {{multipassToken: String}} multipassToken\n */\nconst customerAccessTokenCreateWithMultipass = (client, variables) =>\n  client.mutate({ mutation, variables })\n\nexport default customerAccessTokenCreateWithMultipass\n","import { Auth } from 'aws-amplify'\nimport customerAccessTokenCreateWithMultipass from './customerAccessTokenCreateWithMultipass'\nimport { getUserSession } from '../utils'\n\nconst multipassTokenFetchURL =\n  process.env.GATSBY_COGNITO_SHOPIFY_MULTIPASS_TOKEN_ENDPOINT\n\nconst fetchCustomerAccessToken = async client => {\n  if (!Auth.user) return null\n  const userSession = await getUserSession()\n  const headers = new Headers()\n  headers.append('Content-Type', 'application/json')\n  headers.append('Authorization', userSession.idToken.jwtToken)\n\n  const multipassFetch = await fetch(multipassTokenFetchURL, {\n    method: 'GET',\n    headers,\n  })\n  const multipassToken = await multipassFetch.json()\n\n  const accessTokenResult = await customerAccessTokenCreateWithMultipass(\n    client,\n    {\n      multipassToken,\n    },\n  )\n\n  const {\n    data: {\n      customerAccessTokenCreateWithMultipass: { customerAccessToken },\n    },\n  } = accessTokenResult\n\n  return customerAccessToken\n}\n\nexport default fetchCustomerAccessToken\n","import React from 'react'\n\nconst Facebook = props => {\n  return (\n    <svg width={9} height={18} viewBox='0 0 9 18' fill='none' {...props}>\n      <path\n        d='M2.297 18V9.554H0V6.513h2.297V3.915C2.297 1.875 3.655 0 6.782 0c1.266 0 2.202.118 2.202.118l-.074 2.84s-.954-.01-1.996-.01c-1.128 0-1.309.506-1.309 1.344v2.22H9l-.148 3.042H5.605V18H2.297z'\n        fill='#000'\n      />\n    </svg>\n  )\n}\n\nexport default Facebook\n","import React from 'react'\n\nconst Messenger = props => {\n  return (\n    <svg width={18} height={18} viewBox='0 0 18 18' fill='none' {...props}>\n      <path\n        d='M9.02.281C4.095.281.28 3.88.28 8.74c0 2.542 1.045 4.738 2.745 6.255.293.264.233.417.283 2.048a.7.7 0 00.98.617c1.86-.819 1.884-.883 2.2-.798 5.388 1.483 11.23-1.965 11.23-8.122 0-4.86-3.776-8.458-8.7-8.458zm5.246 6.509L11.7 10.853a1.315 1.315 0 01-1.896.349L7.762 9.674a.527.527 0 00-.632 0l-2.756 2.09c-.367.278-.849-.162-.601-.552L6.339 7.15A1.313 1.313 0 018.235 6.8l2.04 1.528a.527.527 0 00.634 0l2.756-2.087c.367-.281.849.16.601.549z'\n        fill='#000'\n      />\n    </svg>\n  )\n}\n\nexport default Messenger\n","import React from 'react'\n\nconst Twitter = props => {\n  return (\n    <svg width={22} height={22} viewBox='0 0 22 22' fill='none' {...props}>\n      <path\n        d='M19.937 5.463a7.346 7.346 0 01-2.11.568 3.654 3.654 0 001.612-2.02 7.232 7.232 0 01-2.325.885 3.654 3.654 0 00-2.677-1.158 3.663 3.663 0 00-3.663 3.666c0 .283.035.567.09.84a10.411 10.411 0 01-7.553-3.835c-.329.56-.5 1.2-.499 1.85 0 1.271.647 2.393 1.633 3.052a3.695 3.695 0 01-1.656-.466v.045a3.664 3.664 0 002.937 3.597c-.316.082-.64.123-.965.124-.239 0-.464-.023-.692-.056a3.67 3.67 0 003.425 2.542 7.343 7.343 0 01-4.549 1.566c-.307 0-.59-.01-.885-.045a10.374 10.374 0 005.627 1.644c6.737 0 10.424-5.582 10.424-10.427 0-.159 0-.318-.01-.477a7.89 7.89 0 001.836-1.895z'\n        fill='#000'\n      />\n    </svg>\n  )\n}\n\nexport default Twitter\n","import * as React from 'react'\n\nconst EntypoLink = props => {\n  return (\n    <svg width={18} height={18} viewBox='0 0 18 18' fill='none' {...props}>\n      <path\n        d='M7.073 13.222l-.729.725a1.633 1.633 0 01-2.29 0 1.587 1.587 0 010-2.254l2.682-2.66c.555-.551 1.6-1.363 2.363-.607a.893.893 0 101.257-1.266c-1.294-1.285-3.21-1.048-4.877.607l-2.682 2.66A3.347 3.347 0 001.8 12.82a3.348 3.348 0 00.997 2.392A3.402 3.402 0 005.2 16.2c.87 0 1.74-.329 2.402-.987l.73-.724a.89.89 0 00-.625-1.523.895.895 0 00-.633.257zm8.129-10.335c-1.392-1.38-3.338-1.456-4.625-.178l-.908.902a.892.892 0 101.256 1.266l.91-.901c.665-.663 1.539-.388 2.11.177a1.581 1.581 0 010 2.253l-2.861 2.838c-1.31 1.297-1.923.69-2.185.43a.892.892 0 10-1.256 1.265c.601.596 1.287.891 2.005.891.88 0 1.809-.443 2.694-1.32l2.862-2.838A3.358 3.358 0 0016.2 5.28a3.353 3.353 0 00-.998-2.393z'\n        fill='#000'\n      />\n    </svg>\n  )\n}\n\nexport default EntypoLink\n","import React, { useRef } from 'react'\nimport styled, { keyframes } from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport { CopyField } from '../FormElements'\n\nimport Facebook from '../icons/Facebook'\nimport Messenger from '../icons/Messenger'\nimport Twitter from '../icons/Twitter'\nimport EntypoLink from '../icons/EntypoLink'\n\nconst StyledReferralLink = styled.div`\n  text-align: center;\n`\n\nconst rotate = keyframes`\n 0% {\n    transform: rotate(0); }\n  100% {\n    transform: rotate(360deg); }\n `\n\nconst Info = styled.p`\n  margin: 0 0 13px;\n  font-size: 16px;\n  line-height: 25px;\n  text-align: center;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 0 ${desktopVw(24)};\n    font-size: ${desktopVw(16)};\n    line-height: ${desktopVw(25)};\n  }\n`\n\nconst FacebookIcon = styled(Facebook)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(9)};\n    height: ${desktopVw(18)};\n  }\n`\n\nconst MessengerIcon = styled(Messenger)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(18)};\n    height: ${desktopVw(18)};\n  }\n`\n\nconst TwitterIcon = styled(Twitter)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(22)};\n    height: ${desktopVw(22)};\n  }\n`\n\nconst CopyIcon = styled(EntypoLink)`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${desktopVw(18)};\n    height: ${desktopVw(18)};\n  }\n`\n\nconst SocialWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 22px;\n  margin: 0 auto 15px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(22)};\n    margin: 0 auto ${desktopVw(31)};\n  }\n`\n\nconst Anchor = styled.a`\n  margin-right: 27px;\n  cursor: pointer;\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${props =>\n      props.lessMargin ? desktopVw(10) : desktopVw(16)};\n  }\n`\n\nconst Hidden = styled.textarea`\n  position: absolute;\n  font-size: 0;\n  opacity: 0;\n  line-height: 0;\n  height: 0;\n  width: 0;\n`\n\nconst Loader = styled.div`\n  height: 24px;\n  width: 24px;\n  color: ${props => props.theme.colors.greyLighter};\n  display: inline-block;\n  position: relative;\n  border: 3px solid;\n  border-radius: 50%;\n  border-right-color: ${props => props.theme.colors.greyLight};\n  animation: ${rotate} 1s linear infinite;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    height: ${desktopVw(24)};\n    border-width: ${desktopVw(3)};\n    width: ${desktopVw(24)};\n  }\n`\n\nconst ReferralLink = ({ referralLink, loading }) => {\n  const ref = useRef()\n\n  const CopyLinkValue = () => {\n    ref.current.select()\n    document.execCommand('copy')\n  }\n\n  return (\n    <StyledReferralLink>\n      <Info>Paste your link anywhere</Info>\n      {loading ? (\n        <Loader />\n      ) : (\n        <>\n          <CopyField value={referralLink} />\n          <SocialWrapper>\n            <Anchor\n              href='javascript:void(0)'\n              className='swell-share-referral-facebook'\n            >\n              <FacebookIcon />\n            </Anchor>\n            <Anchor\n              href='javascript:void(0)'\n              className='swell-share-referral-messenger'\n            >\n              <MessengerIcon />\n            </Anchor>\n            <Anchor\n              href='javascript:void(0)'\n              className='swell-share-referral-twitter'\n              lessMargin\n            >\n              <TwitterIcon />\n            </Anchor>\n            <Anchor onClick={() => CopyLinkValue()}>\n              <CopyIcon />\n            </Anchor>\n          </SocialWrapper>\n          <Hidden value={referralLink} ref={ref} />\n        </>\n      )}\n    </StyledReferralLink>\n  )\n}\n\nexport default ReferralLink\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\nimport { isLoggedIn } from '../../utils'\n\nimport { Input, Container } from '../../components/FormElements'\nimport Button from '../Button'\nimport FormHeader from '../Auth/FormHeader'\nimport { CopyField } from '../../components/FormElements'\nimport ReferralPoints from './ReferralPoints'\n\nconst Form = styled.form`\n  margin-bottom: 42px;\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(44)};\n  }\n`\n\nconst StyledButton = styled(Button)`\n  display: block;\n  width: 100%;\n  font-size: 20px;\n  padding: 22px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(20)};\n    padding: ${desktopVw(22)} ${desktopVw(50)};\n  }\n`\n\nconst ActivateAccount = styled(Button)`\n  padding: 22px;\n  margin-bottom: 30px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(30)};\n    padding: ${desktopVw(11)} ${desktopVw(50)};\n  }\n`\n\nconst ReferralPointsContainer = styled.div``\n\nconst ReferralPointsWrapper = styled.div`\n  margin-bottom: 36px;\n  border-top: ${({ isLast, theme }) =>\n    isLast && `1px solid ${theme.colors.greyLight}`};\n  padding-top: ${({ isLast }) => isLast && '17px'};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${({ isLast }) => (isLast ? desktopVw(67) : desktopVw(39))};\n    padding-top: ${({ isLast }) => isLast && desktopVw(20)};\n  }\n`\n\nconst Success = ({\n  handleSubmit,\n  handleChange,\n  referralCode,\n  targetEmail,\n  successfulReferrals,\n  invitedReferrals,\n  submitButtonText,\n  loading,\n}) => {\n  return (\n    <>\n      <Form onSubmit={handleSubmit}>\n        <FormHeader>\n          <h1>\n            <i>\n              Thanks for referring! remind your friends to check their email\n            </i>\n          </h1>\n        </FormHeader>\n        <Container>\n          <Input\n            type='text'\n            name='targetEmail'\n            required\n            value={targetEmail}\n            placeholder='Your friend’s email (separated by commas)'\n            onChange={handleChange}\n            required\n          />\n        </Container>\n        <Container>\n          <StyledButton type='submit' black loading={loading}>\n            {submitButtonText}\n          </StyledButton>\n        </Container>\n        <CopyField\n          value={`http://rwrd.io/${\n            referralCode && referralCode !== 'null' ? referralCode : ''\n          }`}\n        />\n      </Form>\n      <ReferralPointsContainer>\n        <ReferralPointsWrapper>\n          <ReferralPoints\n            title='Successfully referred friends'\n            referrals={successfulReferrals && successfulReferrals}\n            totalText='Total earned points'\n            noReferralsMsg='No successful referrals yet'\n          />\n        </ReferralPointsWrapper>\n        {!isLoggedIn() && (\n          <ActivateAccount\n            black\n            to='/sign-up'\n            trackParams={{\n              trackInternal: true,\n              trackGA: true,\n              category: 'referral',\n              action: 'activate_account',\n            }}\n          >\n            Activate your account to access rewards\n          </ActivateAccount>\n        )}\n        <ReferralPointsWrapper isLast>\n          <ReferralPoints\n            title='Your referrals'\n            referrals={invitedReferrals && invitedReferrals}\n            totalText='Total potential points'\n            noReferralsMsg='No referrals yet'\n          />\n        </ReferralPointsWrapper>\n      </ReferralPointsContainer>\n    </>\n  )\n}\n\nexport default Success\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { graphql } from 'gatsby'\nimport { documentToReactComponents } from '@contentful/rich-text-react-renderer'\n\nimport { desktopVw } from '../../styles/utils'\nimport {\n  isLoggedIn,\n  validateEmail,\n  decodeIdFromGraphQLResponse,\n  getCurrentUser,\n} from '../../utils'\n\nimport useFetch from '../../hooks/useFetch'\nimport useCustomer from '../../hooks/useCustomer'\nimport useReferralPoints from '../../hooks/useReferralPoints'\n\nimport { Input, Container, ErrorMessage } from '../../components/FormElements'\nimport AuthWrapper from '../../components/Auth/AuthWrapper'\nimport FormHeader from '../../components/Auth/FormHeader'\nimport FormFooter from '../../components/Auth/FormFooter'\nimport ReferralLink from '../../components/ReferAndEarn/ReferralLink'\nimport Success from '../../components/ReferAndEarn/Success'\nimport Button from '../../components/Button'\nimport SEO from '../../components/SEO'\nimport eventTracker from '../../trackers/EventTracker'\nimport EventType from '../../trackers/eventType'\n\nimport { captureEvent } from '../../components/Sentry/utils'\n\nconst StyledReferAndEarn = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    .authwrapper__form-wrapper {\n      margin-top: ${({ reduceMarginTop }) =>\n        reduceMarginTop ? desktopVw(40) : null};\n    }\n    .authwrapper__form-container {\n      height: unset;\n      min-height: ${({ theme }) =>\n        `calc(100vh - ${desktopVw(\n          theme.announcementBar.desktop.height + theme.header.desktop.height,\n        )})`};\n    }\n    .authwrapper__image-wrapper {\n      height: auto;\n    }\n  }\n`\n\nconst StyledInput = styled(Input)`\n  padding: 22px 20px 19px 13.25px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    padding: ${desktopVw(21)} ${desktopVw(20)} ${desktopVw(19)}\n      ${desktopVw(13.25)};\n  }\n`\n\nconst StyledFormFooter = styled(FormFooter)`\n  margin: 0 0 40px;\n\n  p {\n    text-align: left;\n    font-size: 11px;\n    line-height: 20px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0 0 ${desktopVw(20)};\n    p {\n      font-size: ${desktopVw(11)};\n      line-height: ${desktopVw(20)};\n    }\n  }\n`\n\nconst StyledButton = styled(Button)`\n  display: block;\n  width: 100%;\n  font-size: 20px;\n  padding: 22px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(20)};\n    padding: ${desktopVw(22)};\n  }\n`\n\nconst ReferAndEarn = ({ data }) => {\n  const page = data.contentfulAuthenticationPage\n  const [stage, setStage] = useState(0)\n  const [formData, setFormData] = useState({})\n  const [errorMsg, setErrorMsg] = useState('')\n\n  const {\n    response: customerDetails,\n    fetchData: fetchCustomerDetails,\n    loading: customerDetailsLoading,\n  } = useFetch()\n\n  const { email } = getCurrentUser()\n\n  const { customer } = useCustomer()\n\n  useEffect(() => {\n    if (email) {\n      setFormData({\n        sourceEmail: email,\n        referralLink: '',\n      })\n    }\n  }, [email])\n\n  useEffect(() => {\n    if (formData?.sourceEmail && customer) {\n      fetchCustomerDetails(\n        `${\n          process.env.GATSBY_YOTPO_ENDPOINT\n        }/api/v1/customer_details?customer_email=${\n          formData?.sourceEmail\n        }&customer_external_id=${decodeIdFromGraphQLResponse(\n          customer.id,\n        )}&merchant_id=${process.env.GATSBY_YOTPO_MERCHANT_ID}`,\n      )\n    }\n  }, [formData?.sourceEmail, customer])\n\n  const handleChange = e => {\n    setErrorMsg('')\n\n    const { name } = e.target\n    const { value } = e.target\n    setFormData({\n      ...formData,\n      [name]: value,\n      referralLink: '',\n    })\n  }\n\n  const { fetchData, response, error, loading } = useFetch()\n  const url = `https://api.onequince.com/referralEmails/sendEmailToReferred`\n\n  const handleSubmit = e => {\n    e.preventDefault()\n\n    const { sourceEmail, targetEmail } = formData\n\n    if (!validateEmail(sourceEmail)) {\n      setErrorMsg('Please enter a valid email address')\n      return\n    }\n\n    if (!targetEmail) {\n      setErrorMsg('Please enter at least one Email')\n      return\n    }\n\n    const targetEmailArr = targetEmail.split(',')\n\n    for (const e of targetEmailArr) {\n      if (!validateEmail(e.trim())) {\n        setErrorMsg(`${e} is not a valid email address`)\n        return\n      }\n    }\n\n    if (!loading) {\n      const body = { ...formData, targetEmail: targetEmailArr }\n\n      const options = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n      }\n\n      fetchData(url, options)\n      eventTracker.track(EventType.SEND_REFERRAL_EMAIL_INVITE, {\n        email: sourceEmail,\n        targetEmail,\n      })\n      eventTracker.trackClick(EventType.FORM_SUBMIT, {\n        trackGA: true,\n        trackInternal: true,\n        category: 'referral',\n        action: 'send_invite',\n      })\n    }\n  }\n\n  const [referralCode, setReferralCode] = useState('')\n\n  const {\n    fetchReferrals,\n    successfulReferrals,\n    invitedReferrals,\n  } = useReferralPoints(formData.sourceEmail)\n\n  useEffect(() => {\n    if (!response && !error) {\n      return\n    }\n\n    if (response && response.code) {\n      setReferralCode(response.code)\n      // Reset field\n      setFormData({\n        ...formData,\n        targetEmail: '',\n      })\n      setStage(1)\n      fetchReferrals()\n    } else if (response && response.error) {\n      setErrorMsg('An error occurred while referring your friends.')\n      captureEvent(\n        `Error in sending referral email. Server responded with error: ${response.error} and message: ${response.message}. Sent by : ${formData.sourceEmail} & Sent to: ${formData.targetEmail}.`,\n      )\n    } else if (error) {\n      setErrorMsg('An error occurred while referring your friends.')\n      captureEvent(\n        `Error in sending referral email. There was an error : ${error} in sending referrals. Sent by : ${formData.sourceEmail} & Sent to: ${formData.targetEmail}`,\n      )\n    } else if (response && !response.code) {\n      captureEvent(\n        `Error in sending referral email. Empty response code. Sent by : ${formData.sourceEmail} & Sent to: ${formData.targetEmail}`,\n      )\n    }\n  }, [response, error])\n\n  return (\n    <>\n      <SEO\n        title={page.seoTitle}\n        description={page.seoDescripton}\n        slug={page.slug}\n        image={page.metaImage ? page.metaImage.fluid.src : null}\n      />\n      <StyledReferAndEarn reduceMarginTop={isLoggedIn()}>\n        <AuthWrapper\n          image={page.image}\n          largeImage\n          imageText={page.imageText.imageText}\n          stage={stage}\n        >\n          {stage === 0 && (\n            <form onSubmit={handleSubmit}>\n              <FormHeader marginTop={isLoggedIn()}>\n                {documentToReactComponents(page.formHeader.json)}\n              </FormHeader>\n              <Container>\n                <StyledInput\n                  type='email'\n                  placeholder='Email address'\n                  name='sourceEmail'\n                  onChange={handleChange}\n                  defaultValue={email}\n                  readOnly={isLoggedIn()}\n                />\n              </Container>\n              <Container>\n                <StyledInput\n                  type='text'\n                  name='targetEmail'\n                  placeholder='Your friend’s email (separated by commas)'\n                  onChange={handleChange}\n                />\n              </Container>\n              <Container>\n                <StyledButton black type='submit' loading={loading}>\n                  {page.buttonText}\n                </StyledButton>\n                {errorMsg && <ErrorMessage>{errorMsg}</ErrorMessage>}\n              </Container>\n              {isLoggedIn() && (\n                <ReferralLink\n                  referralLink={`http://rwrd.io/${customerDetails?.referral_code}`}\n                  loading={customerDetailsLoading}\n                />\n              )}\n              <StyledFormFooter>\n                {documentToReactComponents(page.formFooter.json)}\n              </StyledFormFooter>\n            </form>\n          )}\n          {stage === 1 && (\n            <Success\n              handleSubmit={handleSubmit}\n              targetEmail={formData.targetEmail}\n              referralCode={referralCode}\n              handleChange={handleChange}\n              successfulReferrals={successfulReferrals}\n              invitedReferrals={invitedReferrals}\n              submitButtonText={page.buttonText}\n              loading={loading}\n            />\n          )}\n        </AuthWrapper>\n      </StyledReferAndEarn>\n    </>\n  )\n}\n\nexport default ReferAndEarn\n\nexport const ReferAndEarnQuery = graphql`\n  query ReferAndEarn($id: String!) {\n    contentfulAuthenticationPage(id: { eq: $id }) {\n      id\n      slug\n      seoTitle\n      seoDescripton\n      image {\n        description\n        fluid(maxWidth: 3840) {\n          ...GatsbyContentfulFluid_withWebp\n        }\n      }\n      imageText {\n        imageText\n      }\n      formHeader {\n        json\n      }\n      formFooter {\n        json\n      }\n      buttonText\n    }\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nimport ScaledImage from '../../components/ScaledImage'\n\nconst StyledAuthWrapper = styled.section`\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    flex-direction: row;\n  }\n`\n\nconst ImageWrapper = styled.div`\n  position: relative;\n  box-sizing: border-box;\n  height: ${props => (props.largeImage ? '587px' : '310px')};\n  flex-shrink: 0;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    top: 0;\n    width: ${props => (props.largeImage ? desktopVw(880) : '50%')};\n    height: ${props =>\n      `calc(100vh - ${desktopVw(props.theme.announcementBar.desktop.height)})`};\n    margin: 0;\n    margin-top: -${props => desktopVw(props.theme.header.desktop.height)};\n  }\n`\n\nconst ImageTextWrapper = styled.div`\n  text-align: center;\n  justify-self: center;\n`\n\nconst ImageText = styled.div`\n  white-space: pre-wrap;\n  text-transform: uppercase;\n  color: ${props => props.theme.colors.red};\n  font-family: ${props => props.theme.fonts.secondary};\n  position: absolute;\n  margin-left: auto;\n  margin-right: auto;\n  left: 0;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 80px;\n  line-height: 70px;\n  letter-spacing: -2px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(200)};\n    line-height: ${desktopVw(169)};\n    letter-spacing: -${desktopVw(2)};\n  }\n`\n\nconst ImageTextAlt = styled.div`\n  position: absolute;\n  top: 124px;\n  left: 20px;\n  right: 20px;\n  bottom: 0;\n  font-size: 80px;\n\n  letter-spacing: -2px;\n  text-transform: uppercase;\n  color: ${props => props.theme.colors.red};\n  font-family: ${props => props.theme.fonts.secondary};\n\n  div {\n    margin-bottom: 15px;\n    text-align: left;\n\n    &:nth-child(2) {\n      text-align: right;\n    }\n\n    &:nth-child(3) {\n      margin-left: 20px;\n    }\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    top: 50%;\n    transform: translateY(-50%);\n    left: ${desktopVw(80)};\n    right: ${desktopVw(200)};\n    font-size: ${desktopVw(130)};\n    letter-spacing: -${desktopVw(2)};\n\n    div {\n      margin-bottom: ${desktopVw(20)};\n\n      &:nth-child(3) {\n        margin-top: -${desktopVw(10)};\n        margin-left: ${desktopVw(40)};\n      }\n    }\n  }\n`\n\nconst FormContainer = styled.div`\n  padding: 0 20px;\n  align-self: center;\n  position: relative;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    width: ${desktopVw(400)};\n\n    margin: auto;\n    padding: 0 ${desktopVw(80)};\n    height: ${({ theme }) =>\n      `calc(100vh - ${desktopVw(\n        theme.announcementBar.desktop.height + theme.header.desktop.height,\n      )})`};\n  }\n`\n\nconst FormWrapper = styled.div`\n  margin: 18px 0 0;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: 0;\n    overflow-y: scroll;\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n`\n\nconst AuthWrapper = ({ children, image, imageText, stage, largeImage }) => {\n  return (\n    <StyledAuthWrapper>\n      <ImageWrapper\n        largeImage={largeImage}\n        className='authwrapper__image-wrapper'\n      >\n        <ScaledImage\n          style={{ height: '100%', width: '100%' }}\n          fluid={image.fluid}\n        />\n        {imageText && stage === 0 && (\n          <ImageTextWrapper>\n            <ImageText>{imageText}</ImageText>\n          </ImageTextWrapper>\n        )}\n        {imageText && stage === 1 && (\n          <ImageTextWrapper>\n            <ImageTextAlt>\n              <div>Share</div>\n              <div>The</div>\n              <div>Word</div>\n            </ImageTextAlt>\n          </ImageTextWrapper>\n        )}\n      </ImageWrapper>\n      <FormContainer className='authwrapper__form-container'>\n        <FormWrapper className='authwrapper__form-wrapper'>\n          {children}\n        </FormWrapper>\n      </FormContainer>\n    </StyledAuthWrapper>\n  )\n}\n\nexport default AuthWrapper\n","import { useCallback } from 'react'\n\nimport useFetch from './useFetch'\n\nconst useReferralPoints = email => {\n  const { fetchData, response, error, loading } = useFetch()\n\n  const url = `https://api.onequince.com/referralEmails/referredCustomers?emailId=${email}`\n\n  const options = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  }\n\n  const fetchReferrals = useCallback(() => fetchData(url, options), [\n    url,\n    email,\n  ])\n\n  return {\n    fetchReferrals,\n    successfulReferrals: response && response.successfulReferrals,\n    invitedReferrals: response && response.invitedReferrals,\n  }\n}\n\nexport default useReferralPoints\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\n\nimport { desktopVw } from '../../styles/utils'\n\nconst StyledReferralPoints = styled.div``\n\nconst Overview = styled.div`\n  display: block;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-bottom: ${desktopVw(15)};\n  }\n`\n\nconst OverviewTitle = styled.div`\n  width: 280px;\n  font-size: 25px;\n  line-height: 30px;\n  margin-bottom: 11px;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(25)};\n    line-height: ${desktopVw(30)};\n    width: ${desktopVw(280)};\n    margin-bottom: ${desktopVw(35)};\n  }\n`\n\nconst RewardOverviewText = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n  line-height: 25px;\n\n  &:last-child {\n    margin-bottom: 13px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(14)};\n    line-height: ${desktopVw(25)};\n\n    &:last-child {\n      margin-bottom: ${desktopVw(13)};\n    }\n  }\n`\n\nconst Total = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding-top: 18px;\n  font-size: 19px;\n  line-height: 25px;\n  border-top: 1px solid ${props => props.theme.colors.greyLight};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(19)};\n    line-height: ${desktopVw(25)};\n    padding-top: ${desktopVw(18)};\n  }\n`\n\nconst TotalText = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin-right: ${desktopVw(32)};\n  }\n`\n\nconst NoReferrals = styled.p`\n  color: ${props => props.theme.colors.greyLight};\n`\n\nconst ReferralPoints = ({ title, referrals, totalText, noReferralsMsg }) => {\n  const [totalPoints, setTotalPoints] = useState(null)\n\n  useEffect(() => {\n    if (!referrals) return\n\n    const total = referrals.reduce((acc, v) => acc + v.points, 0)\n\n    setTotalPoints(total)\n  }, [referrals])\n\n  return (\n    <StyledReferralPoints className='referral-points'>\n      <Overview>\n        <OverviewTitle>{title}</OverviewTitle>\n        {referrals &&\n          referrals.map(({ email, points }, i) => (\n            <RewardOverviewText key={`${email}${i}`}>\n              <div>{email}</div>\n              <div>{parseInt(points).toLocaleString()}</div>\n            </RewardOverviewText>\n          ))}\n      </Overview>\n      {referrals && referrals.length > 0 ? (\n        <Total className='referral-points__total'>\n          <TotalText>{totalText}</TotalText>\n          {totalPoints ? parseInt(totalPoints).toLocaleString() : 0}\n        </Total>\n      ) : (\n        <NoReferrals>{noReferralsMsg}</NoReferrals>\n      )}\n    </StyledReferralPoints>\n  )\n}\n\nexport default ReferralPoints\n","import styled from 'styled-components'\nimport { desktopVw } from '../../styles/utils'\n\nconst FormHeader = styled.div`\n  white-space: pre-wrap;\n\n  h1 {\n    text-transform: uppercase;\n    font-size: 30px;\n    line-height: 30px;\n    margin-bottom: 16px;\n\n    i {\n      font-family: ${props => props.theme.fonts.secondary};\n      font-size: 45px;\n      line-height: 40px;\n      font-style: normal;\n    }\n  }\n\n  p {\n    margin-bottom: 16px;\n    line-height: 25px;\n    font-size: 14px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    h1 {\n      font-size: ${desktopVw(30)};\n      line-height: ${desktopVw(30)};\n      margin-bottom: ${desktopVw(25)};\n\n      i {\n        font-size: ${desktopVw(45)};\n        line-height: ${desktopVw(40)};\n      }\n    }\n\n    p {\n      margin-bottom: ${desktopVw(14)};\n      line-height: ${desktopVw(25)};\n      font-size: ${desktopVw(14)};\n    }\n  }\n`\n\nexport default FormHeader\n","import { gql } from '@apollo/client'\n\nconst query = gql`\n  query ShopifyCustomer($customerAccessToken: String!) {\n    customer(customerAccessToken: $customerAccessToken) {\n      id\n      addresses(first: 250) {\n        edges {\n          node {\n            id\n            address1\n            address2\n            country\n            city\n            province\n            provinceCode\n            zip\n            company\n            name\n            phone\n            firstName\n            lastName\n          }\n        }\n      }\n      defaultAddress {\n        id\n        address1\n        address2\n        country\n        city\n        province\n        provinceCode\n        zip\n        company\n        name\n        phone\n        firstName\n        lastName\n      }\n    }\n  }\n`\n\n/**\n * https://help.shopify.com/en/api/storefront-api/reference/queryroot\n *\n * @param {{handle: string}} variables\n */\nconst queryShopifyCustomer = (client, variables) =>\n  client.query({ query, variables })\n\nexport default queryShopifyCustomer\n","import { gql } from '@apollo/client'\n\nconst query = gql`\n  query ShopifyCustomer($customerAccessToken: String!) {\n    customer(customerAccessToken: $customerAccessToken) {\n      id\n      addresses(first: 250) {\n        edges {\n          node {\n            id\n            address1\n            address2\n            country\n            city\n            province\n            provinceCode\n            zip\n            company\n            name\n            phone\n            firstName\n            lastName\n          }\n        }\n      }\n      defaultAddress {\n        id\n        address1\n        address2\n        country\n        city\n        province\n        provinceCode\n        zip\n        company\n        name\n        phone\n        firstName\n        lastName\n      }\n    }\n  }\n`\n\n/**\n *\n * NOTE: Separate from queryShopifyCustomer - Because of no-cache policy\n *\n * */\nconst queryShopifyLatestCustomer = (client, variables) =>\n  client.query({ query, variables, fetchPolicy: 'no-cache' })\n\nexport default queryShopifyLatestCustomer\n","import fetchCustomerAccessToken from './fetchCustomerAccessToken'\nimport { loadState, saveState } from '../utils/localStorage'\n\nconst saveCustomerAccessToken = saveState('customerAccessToken')\n\nconst loadCustomerAccessToken = async client => {\n  const customerAccessToken = loadState('customerAccessToken')\n  if (\n    !customerAccessToken ||\n    Date.parse(customerAccessToken.expiresAt) < new Date()\n  ) {\n    console.log('fetching accessToken')\n    const newAccessToken = await fetchCustomerAccessToken(client)\n\n    if (newAccessToken != null) {\n      saveCustomerAccessToken(newAccessToken)\n    }\n\n    return newAccessToken\n  }\n  return customerAccessToken\n}\n\nexport default loadCustomerAccessToken\n","import { useState, useEffect, useContext } from 'react'\n\n// Shopify\nimport queryShopifyCustomer from '../shopify/queryCustomer'\nimport queryShopifyLatestCustomer from '../shopify/queryLatestCustomer'\n\n// Context\nimport { StoreContext } from '../contexts'\n\n// Utils\nimport loadCustomerAccessToken from '../shopify/loadCustomerAccessToken'\n\nconst useCustomer = () => {\n  const stores = useContext(StoreContext)\n  const [customer, setCustomer] = useState(null)\n  const [refreshCustomerData, setRefreshCustomerData] = useState(false)\n  const [loading, setLoading] = useState(false)\n\n  const getCustomer = async () => {\n    setLoading(true)\n    const customerAccessToken = await loadCustomerAccessToken(\n      stores.lastbrand.client,\n    )\n    const { data } = await queryShopifyCustomer(stores.lastbrand.client, {\n      customerAccessToken: customerAccessToken.accessToken,\n    })\n    setCustomer(data.customer)\n    setLoading(false)\n  }\n\n  const getLatestCustomer = async () => {\n    const customerAccessToken = await loadCustomerAccessToken(\n      stores.lastbrand.client,\n    )\n    const { data } = await queryShopifyLatestCustomer(stores.lastbrand.client, {\n      customerAccessToken: customerAccessToken.accessToken,\n    })\n    setCustomer(data.customer)\n  }\n\n  const refreshCustomer = () => {\n    getLatestCustomer()\n    setRefreshCustomerData(true)\n  }\n\n  useEffect(() => {\n    async function checkRefreshCustomer() {\n      const customerAccessToken = await loadCustomerAccessToken(\n        stores.lastbrand.client,\n      )\n      if (customerAccessToken && !refreshCustomerData) {\n        getCustomer()\n      } else if (!refreshCustomerData) {\n        setCustomer(null)\n      }\n    }\n\n    checkRefreshCustomer()\n  }, [refreshCustomerData])\n\n  return { customer, refreshCustomer, loading }\n}\n\nexport default useCustomer\n"],"sourceRoot":""}