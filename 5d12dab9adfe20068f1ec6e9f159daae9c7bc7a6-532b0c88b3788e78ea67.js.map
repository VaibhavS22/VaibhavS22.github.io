{"version":3,"sources":["webpack:///./src/components/SEO.js","webpack:///./src/assets/close-black.svg","webpack:///./src/assets/close-white.svg","webpack:///./src/hooks/useAttentiveSMS.js","webpack:///./src/components/Experiment/ExpVariant.js","webpack:///./src/components/Experiment/index.js","webpack:///./src/components/WelcomeModal.js"],"names":["SEO","title","description","type","slug","canonicalUrl","image","schemaData","noindex","nofollow","category","reviewsAndRatings","price","userReviews","reviews","map","review","author","datePublished","dateCreated","body","reviewRating","bestRating","ratingValue","rating","worstRating","name","content","index","property","rel","href","hrefLang","toFixed","averageRating","count","JSON","stringify","React","CloseBlack","props","createElement","defaultProps","module","exports","default","CloseWhite","useAttentiveSMS","postSubscriber","params","a","process","options","method","headers","Authorization","fetch","response","error","loading","captureException","Error","mobile","ExpVariant","bucketName","children","Experiment","useState","bucket","setBucket","useEffect","experimentManager","getBucketForUser","filter","c","StyledWelcomeModal","styled","Modal","theme","breakpoints","desktopSmall","desktopVw","Container","div","colorTheme","colors","green","salmon","Header","header","Title","h2","secondary","primary","subscriptionType","Subtitle","CloseButton","button","StyledCloseWhiteBtnIcon","CloseWhiteBtnIcon","StyledCloseBlackBtnIcon","CloseBlackBtnIcon","StyledSubscribeForm","SubscribeForm","AnotherStyledSubscribeForm","Preferences","StyledCheckboxOption","CheckboxOption","CheckboxGroup","Footer","FooterContent","StyledLink","Link","StyledAnchor","LinkContainer","p","saveWelcomePopupState","saveState","loadWelcomePopupState","loadState","loadFirstPurchaseCouponCode","saveFirstPurchaseCouponCode","loadReferralCouponCode","getGenderPreferences","preferences","Object","keys","reduce","acc","key","push","WelcomeModal","heading","subHeading","klaviyoListId","successMessage","activeStore","useSelector","storeSubdomain","email","setEmail","mobileNumber","setMobileNumber","showSuccessMsg","setShowSuccessMsg","errorMsg","setErrorMsg","open","setOpen","setInvalidEmail","loadingMsg","setLoadingMsg","signup","useKlaviyoSignup","newsLetterSignUp","useNewsLetterSignUp","checkOldUser","useCustomerService","addDiscountToCheckout","useDiscount","useAttentiveSdk","initializeAttentive","setPreferences","user","getCurrentUser","somethingWentWrong","closeModal","getCookie","FEATURE_COOKIES","IS_WELCOME_POPUP_PREVIOUSLY_OPENED","timer","setTimeout","setCookie","eventTracker","track","EventType","FORM_OPEN","action","clearTimeout","onFocus","handleEmailSubmit","e","preventDefault","isValidEmail","subscribeEmail","EMAIL_NEWSLETTER_SUBSCRIBE","context","$gender","handleSMSSubmit","isValidUSNumber","subscribeSMS","SMS_NEWSLETTER_SUBSCRIBE","location","useLocation","captureEmailError","captureWarning","queryStringParameters","signupOneQuince","status","popupOpened","isOldUser","data","marks","nodeType","value","then","discountCode","code","checkoutId","window","localStorage","getItem","getLocalStorageCheckoutKey","errors","checkoutDiscountCodeApplyV2","checkoutUserErrors","length","message","indexOf","deleteState","captureEvent","phone","onClose","showCloseBtn","onClick","handleChange","handleSubmit","success","successMessageText","placeholder","id","label","checked","women","onChange","target","men","home","to"],"mappings":"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","file":"5d12dab9adfe20068f1ec6e9f159daae9c7bc7a6-532b0c88b3788e78ea67.js","sourcesContent":["import React from 'react'\nimport { Helmet } from 'react-helmet'\n\nconst SEO = ({\n  title,\n  description,\n  type,\n  slug,\n  canonicalUrl,\n  image,\n  noindex,\n  nofollow,\n  schemaData,\n  category,\n  reviewsAndRatings,\n  price,\n}) => {\n  const index =\n    noindex || process.env.GATSBY_BUILD_ENVIRONMENT !== 'production'\n      ? 'noindex'\n      : 'index'\n  const follow =\n    nofollow || process.env.GATSBY_BUILD_ENVIRONMENT !== 'production'\n      ? 'nofollow'\n      : 'follow'\n  const userReviews =\n    schemaData &&\n    reviewsAndRatings &&\n    reviewsAndRatings.reviews.map(review => {\n      return {\n        '@type': 'Review',\n        author: review.author,\n        datePublished: review.dateCreated,\n        description: review.body,\n        reviewRating: {\n          '@type': 'Rating',\n          bestRating: '5',\n          ratingValue: `${review.rating}`,\n          worstRating: '1',\n        },\n      }\n    })\n  return (\n    <Helmet>\n      <title>{title}</title>\n      <meta name='robots' content={`${index}, ${follow}`} />\n      <meta name='description' content={description || ''} />\n      <meta property='og:title' content={title || ''} />\n      <meta property='og:type' content={type || ''} />\n      <meta property='og:url' content={`https://www.onequince.com/${slug}`} />\n      <meta property='og:image' content={image && image} />\n      <link\n        rel='alternate'\n        href={`https://www.onequince.com/${slug}`}\n        hrefLang='en-US'\n      />\n      <link\n        rel='canonical'\n        href={canonicalUrl || `https://www.onequince.com/${slug}`}\n      />\n      {schemaData && reviewsAndRatings && (\n        <script type='application/ld+json'>\n          {`{\n              \"@context\": \"https://schema.org\",\n              \"@type\": \"${type}\",\n              \"name\": \"${title}\",\n              \"description\": \"${description}\",\n              \"image\": \"${image}\",\n              \"category\": \"${category}\",\n              \"brand\": \"Quince\",\n              \"offers\": {\n                \"@type\": \"Offer\",\n                \"availability\": \"http://schema.org/InStock\",\n                \"price\": \"${price && price.toFixed(2)}\",\n                \"priceCurrency\": \"USD\"\n              },\n              \"aggregateRating\": {\n                \"@type\" : \"AggregateRating\",\n                \"ratingValue\": \"${reviewsAndRatings.averageRating}\",\n                \"reviewCount\": \"${reviewsAndRatings.count}\"\n              },\n              \"review\": ${JSON.stringify(userReviews)}\n            }`}\n        </script>\n      )}\n      {schemaData && !reviewsAndRatings && (\n        <script type='application/ld+json'>\n          {`{\n              \"@context\": \"https://schema.org\",\n              \"@type\": \"${type}\",\n              \"name\": \"${title}\",\n              \"description\": \"${description}\",\n              \"image\": \"${image}\",\n              \"category\": \"${category}\",\n              \"brand\": \"Quince\",\n              \"offers\": {\n                \"@type\": \"Offer\",\n                \"availability\": \"http://schema.org/InStock\",\n                \"price\": \"${price && price.toFixed(2)}\",\n                \"priceCurrency\": \"USD\"\n              }\n            }`}\n        </script>\n      )}\n    </Helmet>\n  )\n}\n\nexport default SEO\n","var React = require('react');\n\nfunction CloseBlack (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"defs\",{\"key\":0},React.createElement(\"style\",null,\"\\n      .cls-black {\\n        fill-rule: evenodd;\\n      }\\n    \")),React.createElement(\"path\",{\"className\":\"cls-black\",\"d\":\"M408.777,27.371l35.852,35.852L59.223,448.629,23.371,412.777Z\",\"key\":1}),React.createElement(\"path\",{\"id\":\"Rectangle_4_copy\",\"data-name\":\"Rectangle 4 copy\",\"className\":\"cls-black\",\"d\":\"M59.223,27.371L444.629,412.777l-35.852,35.852L23.371,63.223Z\",\"key\":2})]);\n}\n\nCloseBlack.defaultProps = {\"width\":\"476\",\"height\":\"476\",\"viewBox\":\"0 0 476 476\"};\n\nmodule.exports = CloseBlack;\n\nCloseBlack.default = CloseBlack;\n","var React = require('react');\n\nfunction CloseWhite (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"defs\",{\"key\":0},React.createElement(\"style\",null,\"\\n      .cls-close {\\n        fill: #fff;\\n        fill-rule: evenodd;\\n      }\\n    \")),React.createElement(\"path\",{\"className\":\"cls-close\",\"d\":\"M408.777,27.371l35.852,35.852L59.223,448.629,23.371,412.777Z\",\"key\":1}),React.createElement(\"path\",{\"id\":\"Rectangle_4_copy\",\"data-name\":\"Rectangle 4 copy\",\"className\":\"cls-close\",\"d\":\"M59.223,27.371L444.629,412.777l-35.852,35.852L23.371,63.223Z\",\"key\":2})]);\n}\n\nCloseWhite.defaultProps = {\"width\":\"476\",\"height\":\"476\",\"viewBox\":\"0 0 476 476\"};\n\nmodule.exports = CloseWhite;\n\nCloseWhite.default = CloseWhite;\n","import { captureException } from '../components/Sentry/utils'\n\nconst useAttentiveSMS = () => {\n  const postSubscriber = async params => {\n    const attentiveEndpoint =\n      process.env.GATSBY_ATTENTIVE_SMS_MARKETING_ENDPOINT\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${process.env.GATSBY_ATTENTIVE_SMS_MARKETING_AUTHORIZATION_TOKEN}`,\n      },\n      body: JSON.stringify(params),\n    }\n    try {\n      const response = await fetch(attentiveEndpoint, options)\n      return { response, error: null, loading: false }\n    } catch (error) {\n      captureException(\n        new Error(\n          `Error in subscribing the user via SMS. Number: ${params.mobile}`,\n        ),\n      )\n      return { response: null, error, loading: false }\n    }\n  }\n\n  return { postSubscriber }\n}\n\nexport default useAttentiveSMS\n","import React from 'react'\n\n// Note: This doesn't do anything but acts as abstraction.\nconst ExpVariant = ({ bucketName, children }) => {\n  return <>{children}</>\n}\n\nexport default ExpVariant\n","import React, { useEffect, useState } from 'react'\nimport experimentManager from '../../trackers/ExperimentManager'\n\nconst Experiment = ({ name, children }) => {\n  const [bucket, setBucket] = useState('control')\n  useEffect(() => {\n    setBucket(experimentManager.getBucketForUser(name))\n  }, [])\n  return <>{children.filter(c => bucket === c.props.bucketName)}</>\n}\n\nexport default Experiment\n","import React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useLocation } from '@reach/router'\nimport styled from 'styled-components'\nimport { Link } from 'gatsby'\nimport Modal from './Modal'\nimport SubscribeForm from './SubscribeForm'\n\nimport { desktopVw } from '../styles/utils'\nimport CloseWhiteBtnIcon from '../assets/close-white.svg'\nimport CloseBlackBtnIcon from '../assets/close-black.svg'\nimport { loadState, saveState } from '../utils/localStorage'\nimport {\n  isValidEmail,\n  isValidUSNumber,\n  setCookie,\n  getCookie,\n  getCurrentUser,\n  getLocalStorageCheckoutKey,\n  deleteState,\n} from '../utils'\nimport eventTracker from '../trackers/EventTracker'\nimport EventType from '../trackers/eventType'\nimport useAttentiveSMS from '../hooks/useAttentiveSMS'\nimport useKlaviyoSignup from '../hooks/useKlaviyoSignup'\nimport useNewsLetterSignUp from '../hooks/useNewsLetterSignUp'\nimport useCustomerService from '../hooks/useCustomerService'\nimport useDiscount from '../hooks/useDiscount'\n\nimport experimentManager from '../trackers/ExperimentManager'\nimport ExpVariant from './Experiment/ExpVariant'\nimport Experiment from './Experiment'\nimport { captureEvent, captureWarning } from './Sentry/utils'\nimport { CheckboxOption } from './FormElements'\nimport useAttentiveSdk from '../hooks/useAttentiveSdk'\nimport { FEATURE_COOKIES } from '../utils/constants'\n\nconst StyledWelcomeModal = styled(Modal)`\n  bottom: 0;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: initial;\n    min-width: ${desktopVw(700)};\n    height: initial;\n  }\n`\n\nconst Container = styled.div`\n  z-index: 2000;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  padding: 40px 35px 40px 35px;\n  margin: auto 0 0;\n  background: ${props =>\n    props.colorTheme ? props.theme.colors.green : props.theme.colors.salmon};\n  text-align: center;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    position: relative;\n    padding: ${desktopVw(50)} ${desktopVw(35)} ${desktopVw(50)} ${desktopVw(35)};\n  }\n`\n\nconst Header = styled.header`\n  margin: 0 0 27px;\n  padding: 0px;\n  flex-direction: column;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: ${desktopVw(19)} 0 0;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n\nconst Title = styled.h2`\n  font-size: 22px;\n  line-height: 30px;\n  margin: 0 0 5px;\n  padding: 0 25px;\n  color: ${props =>\n    props.colorTheme\n      ? props.theme.colors.secondary\n      : props.theme.colors.primary};\n  text-transform: uppercase;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${props =>\n      props.subscriptionType === 'email' ? desktopVw(360) : '100%'};\n    font-size: ${desktopVw(25)};\n    line-height: ${desktopVw(30)};\n    margin: 0;\n    padding: 0;\n  }\n`\n\nconst Subtitle = styled.div`\n  font-size: 12px;\n  text-transform: uppercase;\n  color: ${props =>\n    props.colorTheme\n      ? props.theme.colors.secondary\n      : props.theme.colors.primary};\n  margin: 30px 0px;\n  line-height: 2;\n  padding: ${props =>\n    props.subscriptionType === 'email' ? '0px 0px' : '0px 15px'};\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: ${props => (props.subscriptionType === 'email' ? '60%' : '50%')};\n    right: ${desktopVw(-20)};\n    margin: ${desktopVw(30)} 0;\n    font-size: ${desktopVw(14)};\n  }\n`\n\nconst CloseButton = styled.button`\n  float: right;\n\n  svg {\n    height: 24px;\n    width: 24px;\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    position: absolute;\n    right: ${desktopVw(32.44)};\n    top: ${desktopVw(36)};\n    width: ${desktopVw(11)};\n    height: ${desktopVw(11)};\n\n    svg {\n      height: ${desktopVw(24)};\n      width: ${desktopVw(24)};\n    }\n  }\n`\n\nconst StyledCloseWhiteBtnIcon = styled(CloseWhiteBtnIcon)`\n  top: -25px;\n  left: 25px;\n  position: relative;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    position: absolute;\n    top: ${desktopVw(-12)};\n    left: ${desktopVw(-12)};\n  }\n`\n\nconst StyledCloseBlackBtnIcon = styled(CloseBlackBtnIcon)`\n  top: -25px;\n  left: 25px;\n  position: relative;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    position: absolute;\n    top: ${desktopVw(-12)};\n    left: ${desktopVw(-12)};\n  }\n`\n\nconst StyledSubscribeForm = styled(SubscribeForm)`\n  margin: auto;\n\n  .subscribeform {\n    &__input,\n    &__submit {\n      height: 72px;\n      border-color: ${props => props.theme.colors.secondary};\n      color: ${props => props.theme.colors.secondary};\n      &::placeholder {\n        color: ${props => props.theme.colors.secondary};\n      }\n    }\n    &__success-msg {\n      color: ${props => props.theme.colors.secondary};\n    }\n    &__loading-msg {\n      color: ${props => props.theme.colors.secondary};\n    }\n  }\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    width: 60%;\n    .subscribeform {\n      &__input,\n      &__submit {\n        height: ${desktopVw(72)};\n        text-transform: uppercase;\n        &::placeholder {\n          text-transform: uppercase;\n        }\n      }\n    }\n  }\n`\n\nconst AnotherStyledSubscribeForm = styled(StyledSubscribeForm)`\n    .subscribeform {\n        &__input {\n            border-color: ${props => props.theme.colors.primary};\n            color: ${props => props.theme.colors.primary};\n\n            &::placeholder {\n                color: ${props => props.theme.colors.primary};\n            }\n        }\n        &__submit {\n            border-color: ${props => props.theme.colors.primary};\n            background-color:  ${props => props.theme.colors.primary};\n            color: ${props => props.theme.colors.secondary};\n        }\n        &__success-msg {\n            color: ${props => props.theme.colors.primary};\n        }\n        &__loading-msg {\n          color: ${props => props.theme.colors.primary};\n        }\n    }\n  }\n`\n\nconst Preferences = styled.div`\n  margin: 37px 0;\n  color: ${props =>\n    props.colorTheme\n      ? props.theme.colors.secondary\n      : props.theme.colors.primary};\n  p {\n    margin-bottom: 10px;\n  }\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    margin: ${desktopVw(37)} 0;\n  }\n`\n\nconst StyledCheckboxOption = styled(CheckboxOption)`\n  margin-right: 15px;\n  label {\n    color: ${props =>\n      props.colorTheme\n        ? props.theme.colors.secondary\n        : props.theme.colors.primary};\n  }\n`\n\nconst CheckboxGroup = styled.div`\n  color: ${props =>\n    props.colorTheme\n      ? props.theme.colors.secondary\n      : props.theme.colors.primary};\n  display: flex;\n  justify-content: center;\n  ${StyledCheckboxOption}:last-child {\n    margin-right: 0;\n  }\n`\n\nconst Footer = styled.div`\n  font-size: 10px;\n  color: ${props =>\n    props.colorTheme\n      ? props.theme.colors.secondary\n      : props.theme.colors.primary};\n  margin-top: 40px;\n  padding: 0px 25px;\n  display: flex;\n  justify-content: center;\n\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    font-size: ${desktopVw(10)};\n    margin-top: ${desktopVw(40)};\n    padding: 0px 0px;\n  }\n`\n\nconst FooterContent = styled.div`\n  @media (min-width: ${props => props.theme.breakpoints.desktopSmall}px) {\n    max-width: ${desktopVw(375)};\n  }\n`\n\nconst StyledLink = styled(Link)`\n  text-decoration: underline;\n`\n\nconst StyledAnchor = styled.a`\n  text-decoration: underline;\n`\n\nconst LinkContainer = styled.p``\n\nconst saveWelcomePopupState = saveState('welcomePopup')\nconst loadWelcomePopupState = loadState('welcomePopup')\nconst loadFirstPurchaseCouponCode = loadState('firstPurchaseCouponCode')\nconst saveFirstPurchaseCouponCode = saveState('firstPurchaseCouponCode')\nconst loadReferralCouponCode = loadState('referralCouponCode')\n\nfunction getGenderPreferences(preferences) {\n  return Object.keys(preferences).reduce((acc, key) => {\n    if (preferences[key]) acc.push(key)\n    return acc\n  }, [])\n}\n\nconst WelcomeModal = ({\n  heading,\n  subHeading,\n  klaviyoListId,\n  successMessage,\n  colorTheme,\n  subscriptionType,\n}) => {\n  const activeStore = useSelector(({ storeSubdomain }) => storeSubdomain)\n  const [email, setEmail] = useState('')\n  const [mobileNumber, setMobileNumber] = useState('')\n  const [showSuccessMsg, setShowSuccessMsg] = useState(false)\n  const [errorMsg, setErrorMsg] = useState(null)\n  const [open, setOpen] = useState(false)\n  const [invalidEmail, setInvalidEmail] = useState(false)\n  const [loadingMsg, setLoadingMsg] = useState(null)\n  const { postSubscriber } = useAttentiveSMS()\n  const { signup } = useKlaviyoSignup()\n  const { newsLetterSignUp } = useNewsLetterSignUp()\n  const { checkOldUser } = useCustomerService()\n  const { addDiscountToCheckout } = useDiscount()\n  const { initializeAttentive } = useAttentiveSdk()\n  const [preferences, setPreferences] = useState({})\n  const user = getCurrentUser()\n\n  const mobileTitle = 'Want 5% off this order?'\n  const emailFivePercentTitle = 'Get 5% Off on Your First Order'\n  const emailFivePercentSubTitle = 'And free shipping on all orders'\n  const emailTitle = 'Get Free Shipping on All Orders'\n  const emailSubTitle =\n    'And, be the first to know about our latest drops and exclusive offers'\n  const mobileSubTitle = 'Save 5% when you sign up to message with us'\n  const subscribing = 'Subscribing..'\n  const somethingWentWrong = 'Oops something went wrong, please try again later'\n  const successMessageText = 'Thanks for Subscribing!'\n\n  const WELCOME_COOKIE_EXPIRY_MINUTES = 43200\n\n  const closeModal = () => {\n    setOpen(false)\n  }\n\n  useEffect(() => {\n    if (\n      !loadWelcomePopupState &&\n      !getCookie(FEATURE_COOKIES.IS_WELCOME_POPUP_PREVIOUSLY_OPENED)\n    ) {\n      const timer = setTimeout(() => {\n        setOpen(true)\n        setCookie(\n          FEATURE_COOKIES.IS_WELCOME_POPUP_PREVIOUSLY_OPENED,\n          true,\n          WELCOME_COOKIE_EXPIRY_MINUTES,\n        )\n        eventTracker.track(EventType.FORM_OPEN, {\n          action: 'email_newsletter_open',\n        })\n      }, 10000)\n      return () => clearTimeout(timer)\n    }\n\n    if (user && user.email) {\n      setEmail(user.email)\n    }\n  }, [])\n\n  const onFocus = () => {\n    setErrorMsg('')\n  }\n\n  const handleEmailSubmit = e => {\n    e.preventDefault()\n\n    if (!isValidEmail(email)) {\n      setInvalidEmail(true)\n      setShowSuccessMsg(false)\n      setErrorMsg(`${email} is an invalid e-mail address`)\n      return\n    }\n\n    subscribeEmail()\n    eventTracker.track(EventType.EMAIL_NEWSLETTER_SUBSCRIBE, {\n      email,\n      context: { $gender: getGenderPreferences(preferences) },\n    })\n  }\n\n  const handleSMSSubmit = e => {\n    e.preventDefault()\n\n    if (!isValidUSNumber(mobileNumber)) {\n      setShowSuccessMsg(false)\n      setErrorMsg(`${mobileNumber} is an invalid number`)\n      return\n    }\n\n    subscribeSMS()\n    eventTracker.track(EventType.SMS_NEWSLETTER_SUBSCRIBE, {\n      mobileNumber,\n    })\n  }\n\n  const location = useLocation()\n\n  useEffect(() => {\n    setEmail(user && user.email ? user.email : '')\n    setMobileNumber('')\n    setErrorMsg('')\n    setShowSuccessMsg(false)\n    setInvalidEmail(false)\n    setLoadingMsg(null)\n  }, [location])\n\n  const captureEmailError = email => {\n    captureWarning(\n      `Something went wrong in subscribing user via E-mail - Welcome Popup. Email : ${email}`,\n    )\n  }\n\n  /* Klaviyo API for E-mails */\n  const subscribeEmail = async () => {\n    setShowSuccessMsg(false)\n    setLoadingMsg(subscribing)\n\n    try {\n      const queryStringParameters = {\n        klaviyoListId,\n        email,\n        $gender: getGenderPreferences(preferences),\n      }\n\n      const { response, error } = await signup(queryStringParameters)\n      await signupOneQuince()\n\n      if (response.status === 400) {\n        setErrorMsg(somethingWentWrong)\n        setLoadingMsg(null)\n        captureEmailError(email)\n      }\n\n      if (response.status === 200) {\n        setShowSuccessMsg(true)\n        setLoadingMsg(null)\n        saveWelcomePopupState({ popupOpened: true })\n      } else if (error) {\n        setErrorMsg(somethingWentWrong)\n        setLoadingMsg(null)\n        captureEmailError(email)\n      }\n    } catch (err) {\n      setErrorMsg(somethingWentWrong)\n      setLoadingMsg(null)\n      captureEmailError(email)\n    }\n  }\n\n  /* Storefront API for news letter sign up */\n  const signupOneQuince = async () => {\n    const bucket = experimentManager.getBucketForUser(\n      'first_purchase_email_discount',\n    )\n    try {\n      const isOldUser = await checkOldUser(email)\n      if (bucket === 'five-percent') {\n        if (!loadFirstPurchaseCouponCode && isOldUser.response == 'false') {\n          successMessage.content[0].content[1] = {\n            data: {},\n            marks: [],\n            nodeType: 'text',\n            value: `\\nYour discount code is sent via email!`,\n          }\n        } else {\n          successMessage.content[0].content.push({\n            data: {},\n            marks: [],\n            nodeType: 'text',\n            value: `\\nYou are already registered`,\n          })\n        }\n      }\n      newsLetterSignUp(email, bucket, isOldUser.response).then(\n        ({ response, error, loading }) => {\n          if (\n            response &&\n            bucket === 'five-percent' &&\n            isOldUser.response == 'false'\n          ) {\n            const discountCode = response.code\n            saveFirstPurchaseCouponCode({ code: discountCode })\n            if (loadReferralCouponCode) {\n              return\n            }\n            const windowGlobal = typeof window !== 'undefined' && window\n            const checkoutId = windowGlobal.localStorage.getItem(\n              getLocalStorageCheckoutKey(activeStore),\n            )\n            addDiscountToCheckout(discountCode, checkoutId).then(\n              ({ response, error, loading }) => {\n                if (response) {\n                  const { data } = response\n                  const errors =\n                    data.checkoutDiscountCodeApplyV2.checkoutUserErrors\n\n                  if (errors.length > 0) {\n                    captureWarning(\n                      `Discount code generated could not be applied : ${discountCode} - ${errors[0].message}`,\n                    )\n                    const errorCodes = errors.map(e => e.code)\n                    if (errorCodes.indexOf('DISCOUNT_LIMIT_REACHED') > -1) {\n                      deleteState('firstPurchaseCouponCode')\n                    }\n                  }\n                } else if (error) {\n                  captureWarning(\n                    `Discount code generated could not be applied : ${discountCode} - ${error}`,\n                  )\n                }\n              },\n            )\n          } else if (error) {\n            captureWarning(\n              `Discount code generated in first purchase could not be applied : ${response.code} - ${email} and bucket: ${bucket}`,\n            )\n          } else {\n            // disable attentive discount bc of first purchase discount\n            // initializeAttentive()\n            // setTimeout(() => {\n            //   closeModal()\n            // }, 5000)\n          }\n        },\n      )\n    } catch (err) {\n      captureEvent(\n        `Something went wrong in applying first purchase discount : ${email} and bucket: ${bucket}`,\n      )\n      setErrorMsg(somethingWentWrong)\n      setLoadingMsg(null)\n    }\n  }\n\n  /* Attentive API for SMSes */\n  const subscribeSMS = async () => {\n    setShowSuccessMsg(false)\n    setLoadingMsg(subscribing)\n\n    try {\n      const queryStringParameters = {\n        phone: mobileNumber,\n      }\n\n      const { response, error } = await postSubscriber(queryStringParameters)\n\n      if (response && (response.status === 201 || response.status === 200)) {\n        setShowSuccessMsg(true)\n        setLoadingMsg(null)\n        setMobileNumber('')\n      } else if (response && response.status === 500) {\n        setErrorMsg(somethingWentWrong)\n        setLoadingMsg(null)\n        captureEvent(\n          `Something went wrong in subscribing user via SMS - Welcome Popup. Attentive Server Error. Mobile Number : ${mobileNumber}`,\n        )\n      } else if (error) {\n        setErrorMsg(somethingWentWrong)\n        setLoadingMsg(null)\n      } else {\n        captureEvent(\n          `Something went wrong in subscribing user via SMS - Welcome Popup. Unknown Error. Mobile Number : ${mobileNumber}`,\n        )\n      }\n    } catch (err) {\n      captureEvent(\n        `Something went wrong in subscribing user via SMS - Welcome Popup. Mobile Number : ${mobileNumber}`,\n      )\n      setErrorMsg(somethingWentWrong)\n      setLoadingMsg(null)\n    }\n  }\n\n  return (\n    <StyledWelcomeModal open={open} onClose={closeModal} showCloseBtn={false}>\n      <Container colorTheme={colorTheme}>\n        <CloseButton onClick={closeModal}>\n          {colorTheme ? (\n            <StyledCloseWhiteBtnIcon />\n          ) : (\n            <StyledCloseBlackBtnIcon />\n          )}\n        </CloseButton>\n        {/**  Header Content */}\n        {subscriptionType === 'email' ? (\n          <Header>\n            <Experiment name='first_purchase_email_discount'>\n              <ExpVariant bucketName='control'>\n                <Title\n                  colorTheme={colorTheme}\n                  subscriptionType={subscriptionType}\n                >\n                  {emailTitle}\n                </Title>\n                <Subtitle\n                  colorTheme={colorTheme}\n                  subscriptionType={subscriptionType}\n                >\n                  {emailSubTitle}\n                </Subtitle>\n              </ExpVariant>\n              <ExpVariant bucketName='five-percent'>\n                <Title\n                  colorTheme={colorTheme}\n                  subscriptionType={subscriptionType}\n                >\n                  {emailFivePercentTitle}\n                </Title>\n                <Subtitle\n                  colorTheme={colorTheme}\n                  subscriptionType={subscriptionType}\n                >\n                  {emailFivePercentSubTitle}\n                </Subtitle>\n              </ExpVariant>\n            </Experiment>\n          </Header>\n        ) : (\n          <Header>\n            <Title colorTheme={colorTheme} subscriptionType={subscriptionType}>\n              {mobileTitle}\n            </Title>\n            <Subtitle\n              colorTheme={colorTheme}\n              subscriptionType={subscriptionType}\n            >\n              {mobileSubTitle}\n            </Subtitle>\n          </Header>\n        )}\n        {/**  Form Content */}\n        {subscriptionType === 'email' && colorTheme ? (\n          <StyledSubscribeForm\n            email={email}\n            handleChange={setEmail}\n            onFocus={onFocus}\n            handleSubmit={handleEmailSubmit}\n            success={showSuccessMsg}\n            successMessage={successMessage}\n            errorMsg={errorMsg}\n            loadingMsg={loadingMsg}\n          />\n        ) : subscriptionType === 'email' && !colorTheme ? (\n          <AnotherStyledSubscribeForm\n            email={email}\n            handleChange={setEmail}\n            onFocus={onFocus}\n            handleSubmit={handleEmailSubmit}\n            success={showSuccessMsg}\n            successMessage={successMessage}\n            errorMsg={errorMsg}\n            loadingMsg={loadingMsg}\n          />\n        ) : null}\n        {/**  Footer Content */}\n        {subscriptionType === 'mobile' && colorTheme ? (\n          <StyledSubscribeForm\n            email={mobileNumber}\n            handleChange={setMobileNumber}\n            onFocus={onFocus}\n            handleSubmit={handleSMSSubmit}\n            success={showSuccessMsg}\n            successMessageText={successMessageText}\n            errorMsg={errorMsg}\n            loadingMsg={loadingMsg}\n            title='Add your number to subscribe'\n            placeholder='Your number'\n          />\n        ) : subscriptionType === 'mobile' && !colorTheme ? (\n          <AnotherStyledSubscribeForm\n            email={mobileNumber}\n            handleChange={setMobileNumber}\n            onFocus={onFocus}\n            handleSubmit={handleSMSSubmit}\n            success={showSuccessMsg}\n            successMessageText={successMessageText}\n            errorMsg={errorMsg}\n            loadingMsg={loadingMsg}\n            title='Add your number to subscribe'\n            placeholder='Your number'\n          />\n        ) : null}\n\n        <Preferences colorTheme={colorTheme}>\n          <p>I'm interested in..</p>\n          <CheckboxGroup colorTheme={colorTheme}>\n            <StyledCheckboxOption\n              colorTheme={colorTheme}\n              id='women'\n              name='women'\n              value='women'\n              label=\"Women's\"\n              checked={!!preferences.women}\n              onChange={e =>\n                setPreferences({\n                  ...preferences,\n                  [e.target.value]: e.target.checked,\n                })\n              }\n            />\n            <StyledCheckboxOption\n              colorTheme={colorTheme}\n              id='men'\n              name='men'\n              value='men'\n              label=\"Men's\"\n              checked={!!preferences.men}\n              onChange={e =>\n                setPreferences({\n                  ...preferences,\n                  [e.target.value]: e.target.checked,\n                })\n              }\n            />\n            <StyledCheckboxOption\n              colorTheme={colorTheme}\n              id='home'\n              name='home'\n              value='home'\n              label='Home'\n              checked={!!preferences.home}\n              onChange={e =>\n                setPreferences({\n                  ...preferences,\n                  [e.target.value]: e.target.checked,\n                })\n              }\n            />\n          </CheckboxGroup>\n        </Preferences>\n        {subscriptionType === 'email' && (\n          <Footer colorTheme={colorTheme}>\n            <LinkContainer>\n              By signing up for our newsletter, you agree to our&nbsp;\n              <StyledLink to='/terms-of-service'>Terms</StyledLink>&nbsp;+&nbsp;\n              <StyledLink to='/privacy-policy'>Privacy Policy</StyledLink>\n            </LinkContainer>\n          </Footer>\n        )}\n        {subscriptionType === 'mobile' && (\n          <Footer colorTheme={colorTheme}>\n            <FooterContent>\n              By submitting this form, you agree to receive recurring automated\n              promotional and personalized marketing text messages (e.g. cart\n              reminders) from Quince at the cell number used when signing up.\n              Consent is not a condition of any purchase. Reply HELP for help\n              and STOP to cancel. Msg frequency varies. Msg & data rates may\n              apply. View&nbsp;\n              <StyledAnchor href='http://attn.tv/lastbrand/terms.html'>\n                Terms\n              </StyledAnchor>\n              &nbsp;&&nbsp;\n              <StyledLink to='/privacy-policy'>Privacy</StyledLink>.\n            </FooterContent>\n          </Footer>\n        )}\n      </Container>\n    </StyledWelcomeModal>\n  )\n}\n\nexport default WelcomeModal\n"],"sourceRoot":""}